<!DOCTYPE html>

<html>

<head>

<title>AndBaseDemo文档</title>

<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<style type="text/css">

/* GitHub stylesheet for MarkdownPad (http://markdownpad.com) */

/* Author: Nicolas Hery - http://nicolashery.com */

/* Version: b13fe65ca28d2e568c6ed5d7f06581183df8f2ff */

/* Source: https://github.com/nicolahery/markdownpad-github */



/* RESET

=============================================================================*/



html, body, div, span, applet, object, iframe, h1, h2, h3, h4, h5, h6, p, blockquote, pre, a, abbr, acronym, address, big, cite, code, del, dfn, em, img, ins, kbd, q, s, samp, small, strike, strong, sub, sup, tt, var, b, u, i, center, dl, dt, dd, ol, ul, li, fieldset, form, label, legend, table, caption, tbody, tfoot, thead, tr, th, td, article, aside, canvas, details, embed, figure, figcaption, footer, header, hgroup, menu, nav, output, ruby, section, summary, time, mark, audio, video {

  margin: 0;

  padding: 0;

  border: 0;

}



/* BODY

=============================================================================*/



body {

  font-family: Helvetica, arial, freesans, clean, sans-serif;

  font-size: 14px;

  line-height: 1.6;

  color: #333;

  background-color: #fff;

  padding: 20px;

  max-width: 960px;

  margin: 0 auto;

}



body>*:first-child {

  margin-top: 0 !important;

}



body>*:last-child {

  margin-bottom: 0 !important;

}



/* BLOCKS

=============================================================================*/



p, blockquote, ul, ol, dl, table, pre {

  margin: 15px 0;

}



/* HEADERS

=============================================================================*/



h1, h2, h3, h4, h5, h6 {

  margin: 20px 0 10px;

  padding: 0;

  font-weight: bold;

  -webkit-font-smoothing: antialiased;

}



h1 tt, h1 code, h2 tt, h2 code, h3 tt, h3 code, h4 tt, h4 code, h5 tt, h5 code, h6 tt, h6 code {

  font-size: inherit;

}



h1 {

  font-size: 28px;

  color: #000;

}



h2 {

  font-size: 24px;

  border-bottom: 1px solid #ccc;

  color: #000;

}



h3 {

  font-size: 18px;

}



h4 {

  font-size: 16px;

}



h5 {

  font-size: 14px;

}



h6 {

  color: #777;

  font-size: 14px;

}



body>h2:first-child, body>h1:first-child, body>h1:first-child+h2, body>h3:first-child, body>h4:first-child, body>h5:first-child, body>h6:first-child {

  margin-top: 0;

  padding-top: 0;

}



a:first-child h1, a:first-child h2, a:first-child h3, a:first-child h4, a:first-child h5, a:first-child h6 {

  margin-top: 0;

  padding-top: 0;

}



h1+p, h2+p, h3+p, h4+p, h5+p, h6+p {

  margin-top: 10px;

}



/* LINKS

=============================================================================*/



a {

  color: #4183C4;

  text-decoration: none;

}



a:hover {

  text-decoration: underline;

}



/* LISTS

=============================================================================*/



ul, ol {

  padding-left: 30px;

}



ul li > :first-child, 

ol li > :first-child, 

ul li ul:first-of-type, 

ol li ol:first-of-type, 

ul li ol:first-of-type, 

ol li ul:first-of-type {

  margin-top: 0px;

}



ul ul, ul ol, ol ol, ol ul {

  margin-bottom: 0;

}



dl {

  padding: 0;

}



dl dt {

  font-size: 14px;

  font-weight: bold;

  font-style: italic;

  padding: 0;

  margin: 15px 0 5px;

}



dl dt:first-child {

  padding: 0;

}



dl dt>:first-child {

  margin-top: 0px;

}



dl dt>:last-child {

  margin-bottom: 0px;

}



dl dd {

  margin: 0 0 15px;

  padding: 0 15px;

}



dl dd>:first-child {

  margin-top: 0px;

}



dl dd>:last-child {

  margin-bottom: 0px;

}



/* CODE

=============================================================================*/



pre, code, tt {

  font-size: 12px;

  font-family: Consolas, "Liberation Mono", Courier, monospace;

}



code, tt {

  margin: 0 0px;

  padding: 0px 0px;

  white-space: nowrap;

  border: 1px solid #eaeaea;

  background-color: #f8f8f8;

  border-radius: 3px;

}



pre>code {

  margin: 0;

  padding: 0;

  white-space: pre;

  border: none;

  background: transparent;

}



pre {

  background-color: #f8f8f8;

  border: 1px solid #ccc;

  font-size: 13px;

  line-height: 19px;

  overflow: auto;

  padding: 6px 10px;

  border-radius: 3px;

}



pre code, pre tt {

  background-color: transparent;

  border: none;

}



kbd {

    -moz-border-bottom-colors: none;

    -moz-border-left-colors: none;

    -moz-border-right-colors: none;

    -moz-border-top-colors: none;

    background-color: #DDDDDD;

    background-image: linear-gradient(#F1F1F1, #DDDDDD);

    background-repeat: repeat-x;

    border-color: #DDDDDD #CCCCCC #CCCCCC #DDDDDD;

    border-image: none;

    border-radius: 2px 2px 2px 2px;

    border-style: solid;

    border-width: 1px;

    font-family: "Helvetica Neue",Helvetica,Arial,sans-serif;

    line-height: 10px;

    padding: 1px 4px;

}



/* QUOTES

=============================================================================*/



blockquote {

  border-left: 4px solid #DDD;

  padding: 0 15px;

  color: #777;

}



blockquote>:first-child {

  margin-top: 0px;

}



blockquote>:last-child {

  margin-bottom: 0px;

}



/* HORIZONTAL RULES

=============================================================================*/



hr {

  clear: both;

  margin: 15px 0;

  height: 0px;

  overflow: hidden;

  border: none;

  background: transparent;

  border-bottom: 4px solid #ddd;

  padding: 0;

}



/* TABLES

=============================================================================*/



table th {

  font-weight: bold;

}



table th, table td {

  border: 1px solid #ccc;

  padding: 6px 13px;

}



table tr {

  border-top: 1px solid #ccc;

  background-color: #fff;

}



table tr:nth-child(2n) {

  background-color: #f8f8f8;

}



/* IMAGES

=============================================================================*/



img {

  max-width: 100%

}

</style>

<style type="text/css">

.highlight  { background: #ffffff; }

.highlight .c { color: #999988; font-style: italic } /* Comment */

.highlight .err { color: #a61717; background-color: #e3d2d2 } /* Error */

.highlight .k { font-weight: bold } /* Keyword */

.highlight .o { font-weight: bold } /* Operator */

.highlight .cm { color: #999988; font-style: italic } /* Comment.Multiline */

.highlight .cp { color: #999999; font-weight: bold } /* Comment.Preproc */

.highlight .c1 { color: #999988; font-style: italic } /* Comment.Single */

.highlight .cs { color: #999999; font-weight: bold; font-style: italic } /* Comment.Special */

.highlight .gd { color: #000000; background-color: #ffdddd } /* Generic.Deleted */

.highlight .gd .x { color: #000000; background-color: #ffaaaa } /* Generic.Deleted.Specific */

.highlight .ge { font-style: italic } /* Generic.Emph */

.highlight .gr { color: #aa0000 } /* Generic.Error */

.highlight .gh { color: #999999 } /* Generic.Heading */

.highlight .gi { color: #000000; background-color: #ddffdd } /* Generic.Inserted */

.highlight .gi .x { color: #000000; background-color: #aaffaa } /* Generic.Inserted.Specific */

.highlight .go { color: #888888 } /* Generic.Output */

.highlight .gp { color: #555555 } /* Generic.Prompt */

.highlight .gs { font-weight: bold } /* Generic.Strong */

.highlight .gu { color: #aaaaaa } /* Generic.Subheading */

.highlight .gt { color: #aa0000 } /* Generic.Traceback */

.highlight .kc { font-weight: bold } /* Keyword.Constant */

.highlight .kd { font-weight: bold } /* Keyword.Declaration */

.highlight .kp { font-weight: bold } /* Keyword.Pseudo */

.highlight .kr { font-weight: bold } /* Keyword.Reserved */

.highlight .kt { color: #445588; font-weight: bold } /* Keyword.Type */

.highlight .m { color: #009999 } /* Literal.Number */

.highlight .s { color: #d14 } /* Literal.String */

.highlight .na { color: #008080 } /* Name.Attribute */

.highlight .nb { color: #0086B3 } /* Name.Builtin */

.highlight .nc { color: #445588; font-weight: bold } /* Name.Class */

.highlight .no { color: #008080 } /* Name.Constant */

.highlight .ni { color: #800080 } /* Name.Entity */

.highlight .ne { color: #990000; font-weight: bold } /* Name.Exception */

.highlight .nf { color: #990000; font-weight: bold } /* Name.Function */

.highlight .nn { color: #555555 } /* Name.Namespace */

.highlight .nt { color: #000080 } /* Name.Tag */

.highlight .nv { color: #008080 } /* Name.Variable */

.highlight .ow { font-weight: bold } /* Operator.Word */

.highlight .w { color: #bbbbbb } /* Text.Whitespace */

.highlight .mf { color: #009999 } /* Literal.Number.Float */

.highlight .mh { color: #009999 } /* Literal.Number.Hex */

.highlight .mi { color: #009999 } /* Literal.Number.Integer */

.highlight .mo { color: #009999 } /* Literal.Number.Oct */

.highlight .sb { color: #d14 } /* Literal.String.Backtick */

.highlight .sc { color: #d14 } /* Literal.String.Char */

.highlight .sd { color: #d14 } /* Literal.String.Doc */

.highlight .s2 { color: #d14 } /* Literal.String.Double */

.highlight .se { color: #d14 } /* Literal.String.Escape */

.highlight .sh { color: #d14 } /* Literal.String.Heredoc */

.highlight .si { color: #d14 } /* Literal.String.Interpol */

.highlight .sx { color: #d14 } /* Literal.String.Other */

.highlight .sr { color: #009926 } /* Literal.String.Regex */

.highlight .s1 { color: #d14 } /* Literal.String.Single */

.highlight .ss { color: #990073 } /* Literal.String.Symbol */

.highlight .bp { color: #999999 } /* Name.Builtin.Pseudo */

.highlight .vc { color: #008080 } /* Name.Variable.Class */

.highlight .vg { color: #008080 } /* Name.Variable.Global */

.highlight .vi { color: #008080 } /* Name.Variable.Instance */

.highlight .il { color: #009999 } /* Literal.Number.Integer.Long */

.pl-c {

    color: #969896;

}



.pl-c1,.pl-mdh,.pl-mm,.pl-mp,.pl-mr,.pl-s1 .pl-v,.pl-s3,.pl-sc,.pl-sv {

    color: #0086b3;

}



.pl-e,.pl-en {

    color: #795da3;

}



.pl-s1 .pl-s2,.pl-smi,.pl-smp,.pl-stj,.pl-vo,.pl-vpf {

    color: #333;

}



.pl-ent {

    color: #63a35c;

}



.pl-k,.pl-s,.pl-st {

    color: #a71d5d;

}



.pl-pds,.pl-s1,.pl-s1 .pl-pse .pl-s2,.pl-sr,.pl-sr .pl-cce,.pl-sr .pl-sra,.pl-sr .pl-sre,.pl-src,.pl-v {

    color: #df5000;

}



.pl-id {

    color: #b52a1d;

}



.pl-ii {

    background-color: #b52a1d;

    color: #f8f8f8;

}



.pl-sr .pl-cce {

    color: #63a35c;

    font-weight: bold;

}



.pl-ml {

    color: #693a17;

}



.pl-mh,.pl-mh .pl-en,.pl-ms {

    color: #1d3e81;

    font-weight: bold;

}



.pl-mq {

    color: #008080;

}



.pl-mi {

    color: #333;

    font-style: italic;

}



.pl-mb {

    color: #333;

    font-weight: bold;

}



.pl-md,.pl-mdhf {

    background-color: #ffecec;

    color: #bd2c00;

}



.pl-mdht,.pl-mi1 {

    background-color: #eaffea;

    color: #55a532;

}



.pl-mdr {

    color: #795da3;

    font-weight: bold;

}



.pl-mo {

    color: #1d3e81;

}

.task-list {

padding-left:10px;

margin-bottom:0;

}



.task-list li {

    margin-left: 20px;

}



.task-list-item {

list-style-type:none;

padding-left:10px;

}



.task-list-item label {

font-weight:400;

}



.task-list-item.enabled label {

cursor:pointer;

}



.task-list-item+.task-list-item {

margin-top:3px;

}



.task-list-item-checkbox {

display:inline-block;

margin-left:-20px;

margin-right:3px;

vertical-align:1px;

}

</style>

</head>

<body>

<h1 id="2017-08-01">2017 08 01</h1>
<p><a href="http://pan.baidu.com/disk/home?errno=0&amp;errmsg=Auth%20Login%20Sucess&amp;&amp;bduss=&amp;ssnerror=0&amp;#list/vmode=list&amp;path=%2F%E5%8E%8B%E7%BC%A9%E6%96%87%E4%BB%B6%E5%A4%B9%2F%E5%AE%89%E5%8D%93%E9%A1%B9%E7%9B%AE%E4%BB%A3%E7%A0%81%E4%BB%93%E5%BA%93%2FMarkDown%E5%BC%80%E5%8F%91%E6%96%87%E6%A1%A3" title="查看">文档地址</a>→<a href="http://pan.baidu.com/disk/home?errno=0&amp;errmsg=Auth%20Login%20Sucess&amp;&amp;bduss=&amp;ssnerror=0&amp;#list/vmode=list&amp;path=%2F%E5%8E%8B%E7%BC%A9%E6%96%87%E4%BB%B6%E5%A4%B9%2F%E9%A1%B9%E7%9B%AE%E6%A8%A1%E5%9D%97%2FAndBaseDemo%E6%A1%86%E6%9E%B6" title="查看">源文件相关</a>→<a href="https://tanyinqing.github.io/">首页</a></p>
<p>D:\workspace\AndBaseDemo</p>
<h1 id="1">目录列表</h1> 

<ul>
<li><h3 id="-1-mainactivity-0301-">页面→<a href="#0301">1. 类 MainActivity主页</a>→</h3>
</li><li><h3 id="-1-themes-0103-2-styles-0104-3-colors-0105-4-drawable-0106-5-0101-6-0108-2-android-studio-9-png-0107-">资源→<a href="#0103">1. themes</a>→<a href="#0104">2. styles</a>→<a href="#0105">3. colors</a>→<a href="#0106">4. Drawable资源</a>→<a href="#0101">5. 权限</a>→<a href="#0108">6. 清单文件</a>→<a href="#0107">2. Android Studio中使用.9.png</a></h3>
</li></ul>
<h1 id="-">最常用的服务</h1>
<h1 id="106">106. 各种集合框架</h1><br><a href="#10601">1.各种集合框架</a> ——  <a href="#10602">2.进度条</a> —— <a href="#10603">3.土司</a> ——  <a href="#10604">4.容器的运用list与map相互嵌套 动态获得数据</a> ——  <a href="#10605">5.图片下载器</a><br><br><h1 id="107">107. 各种类</h1>

<p><a href="#10701">1. MediaRecorder</a></p>
<h1 id="01">1. 简介</h1><br>1. 简介<br>2. studio bug<br><a href="#0102">1. No resource found that matches the given name</a><br><br><h1 id="58">58. IocViewActivity  ioc示例  注解绑定</h1>  <a href="#5801">1. IOC适配View  注解绑定</a><br><br><h1 id="02">2.LauncherActivity  首页</h1> 


<h1 id="04">04. DemoMainActivity  程序案例</h1><br><a href="#0401">1. listView的数据容器</a><br><br><h1 id="05">05. DialogActivity  Dialog示例</h1><br><a href="#0501">1. 多种弹出框的用法</a><br><br><h1 id="06">06. ImageDownActivity  下载图片与裁剪缩放</h1><br><a href="#0601">1. 下载图片与裁剪缩放</a><br><br><h1 id="07">07. AnimationActivity  动画效果汇总</h1><br><h1 id="08">08. UIElementActivity  常用控件汇总</h1>

<h1 id="09">09. CityListActivity  城市选择</h1><br><a href="#0901">1. 城市选择</a><br><br><h1 id="10">10. DemoAbActivity  AbActivity用法</h1>

<h1 id="11">11. DBInsideSampleActivity  数据库在 内置存储 中建表</h1><br><a href="#1101">1. 数据库的基本操作</a><br><br><h1 id="12">12. DBSDSampleActivity  数据库建立在SD卡中</h1><br><a href="#1201">1. 数据库建立在SD卡中</a><br><br><h1 id="13">13. DBOne2OneActivity  一对一关联</h1><br><a href="#1301">1. 两个对象在两个表里的一对一关联</a><br><h1 id="14">14. DBOne2ManyActivity  一对多关联</h1><br><a href="#1401">1. 两个表里对象的一对多关联</a><br><br><h1 id="15">15. DBObjectActivity  对象化存储</h1><br><a href="#1501">1. 数据库演示andbase的对象化存储</a><br><br><h1 id="16">16. TitleBarActivity  多功能标题栏</h1><br><a href="#1601">1. 各种标题栏的修改和底部导航栏的用法</a><br><br><br><h1 id="72">72. HttpActivity  Http框架</h1><br><a href="#7201">1. Http框架</a><br><br><h1 id="73">73. HttpMiniActivity  快速响应的请求</h1><br><a href="#7301">1. 适合大量频繁快速响应的请求</a><br><br><h1 id="17">17. ThreadControlActivity  线程管理</h1><br><a href="#1701">1. 异步线程的使用参照</a><br><br><h1 id="42">42. PullToRefreshViewActivity  下拉刷新上滑加载普通控件</h1><br><a href="#4201">1. 下拉刷新上滑加载普通控件</a><br><br><h1 id="25">25. PullToRefreshListActivity  下拉刷新上滑加载分页</h1><br><a href="#2501">1. 下拉刷新上滑加载分页</a><br><br><h1 id="26">26. PullToRefreshGridActivity  GridView下拉刷新分页加载</h1>

<h1 id="43">43. PullToRefreshMultiColumnListActivity  多列View瀑布流</h1><br><a href="#4301">1. 运用集成的方法实现访问网络并把字符串解析成对象</a><br><br><h1 id="18">18. TabActivity  Tab切换</h1><br><h1 id="19">19. TabTopActivity  顶部切换Tab</h1><br><a href="#1901">1. 顶部切换Tab</a><br><a href="#1902">2. FragmentLoad 每一个的Activity碎片</a><br><br><h1 id="20">20. TabBottomActivity  底部切换Tab</h1><br><a href="#2001">1. 底部切换Tab</a><br><br><h1 id="21">21. DownListActivity  下载器</h1><br><a href="#2101">1. 多线程断点续传 下载器</a><br><br><h1 id="22">22. DBActivity  数据库操作</h1><br><h1 id="23">23. PullToRefreshActivity  下拉刷新分页</h1><br><h1 id="24">24. ChartActivity  图表</h1> 

<h1 id="27">27. SlidingButtonActivity  滑动按钮</h1><br><a href="#2701">1. 滑动按钮</a><br><br><h1 id="28">28. SlidingPlayViewActivity  图片联播</h1><br><a href="#2801">1. 图片联播</a><br><br><h1 id="29">29. SlidingLeftActivity  </h1><br><h1 id="30">30. WelcomeActivity  欢迎页面</h1><br><a href="#3001">1. 欢迎页面</a><br><br><h1 id="31">31. XYLineChartActivity  XY线图</h1><br><h1 id="32">32. XYBarChartActivity  XY柱图</h1><br><a href="#3201">1. XY柱图</a><br><br><h1 id="33">33. PieChartActivity  饼图</h1><br><a href="#3301">1.  饼图</a><br><br><h1 id="34">34. TimeChartActivity  线图</h1><br><h1 id="35">35. XYAreaChartActivity  区域图</h1><br><h1 id="36">36. LevelChartActivity  等级条</h1><br><h1 id="37">37. WheelActivity  轮子选择</h1><br><a href="#3701">1. 轮子选择</a><br><br><h1 id="38">38. CropImageActivity  裁剪界面</h1><br><h1 id="39">39. AddPhotoActivity  拍照相册选择</h1><br><a href="#3901">1. 拍照相册选择</a><br><br><h1 id="40">40. CalendarActivity  日历选择器</h1>

<h1 id="41">41. PHashActivity  图片相近查询</h1> 

<h1 id="44">44. SlidingMenuActivity  侧边栏</h1><br><a href="#4401">1. 侧边栏</a><br><br><h1 id="45">45. SlidingMenuLeftActivity  左边的侧边栏</h1><br><a href="#4501">1. 左边的侧边栏</a><br><br><h1 id="46">46. SlidingMenuRightActivity  侧边栏</h1><br><h1 id="47">47. SlidingMenuLeftRightActivity  侧边栏</h1><br><h1 id="48">48. SlidingMenuZoomActivity  侧边栏</h1><br><h1 id="49">49. SlidingMenuSlideActivity  侧边栏</h1><br><h1 id="50">50. SlidingMenuScaleActivity  侧边栏</h1>

<h1 id="51">51. SlidingMenuTitleHoldActivity  侧边栏</h1><br><h1 id="52">52. CarouselActivity  旋转木马</h1><br><h1 id="53">53. CarouselImageActivity  图片适配的旋转木马</h1><br><a href="#5301">1. 图片适配的旋转木马</a><br><br><h1 id="54">54. CarouselViewActivity  View适配的旋转木马</h1><br><h1 id="55">55. ProgressBarActivity  2种漂亮的进度条</h1><br><h1 id="56">56. ProgressBarCircleActivity  环形进度条</h1><br><a href="#5601">1. 环形进度条</a><br><br><h1 id="57">57. ProgressBarHorizontalActivity  水平进度条</h1><br><a href="#5701">1. 水平进度条</a><br><br><h1 id="59">59. Rotate3DActivity  3D翻转示例</h1><br><h1 id="60">60. Rotate3DActivity1  硬币翻转</h1><br><a href="#6001">1. 硬币翻转</a><br><br><h1 id="71">71. Rotate3DActivity2  3d旋转View</h1> 

<h1 id="74">74. SoapActivity  soap框架</h1><br><h1 id="75">75. NestScrollActivity  各种嵌套</h1><br><h1 id="76">76. ListNestViewPagerActivity  ListView与ViewPager组合</h1><br><a href="#7601">1.ListView与ViewPager组合</a><br><br><h1 id="77">77. SlidingMenuNestViewPagerActivity  SlidingMenu+ViewPager冲突解决的演示</h1><br><a href="#7701">1.SlidingMenuNestViewPagerActivity  SlidingMenu+ViewPager冲突解决的演示</a><br><br><h1 id="78">78. SceneActivity  场景化UI</h1><br><h1 id="79">79. AnalogClockActivity  圆形挂钟</h1><br><a href="#7901">1.圆形挂钟</a><br><h1 id="80">80. NumberClockActivity  数字时钟</h1><br><a href="#8001">1.数字时钟</a><br><h1 id="91">91. DeskCalendarActivity  台历</h1><br><a href="#9101">1.台历</a><br><br><h1 id="92">92. PopoverActivity  提示框</h1><br><a href="#9201">1.提示框</a><br><br> <h1 id="93">93. SlidingMenuNestTabActivity  SlidingMenu+SlidingTab冲突解决的演示</h1> 

<h1 id="94">94. WebActivity  网站Wap</h1><br><h1 id="95">95. LoginActivity  </h1><br><h1 id="96">96. RegisterActivity  </h1><br><h1 id="97">97. AgreementActivity  用户注册协议</h1><br><h1 id="98">98. FindPwdActivity  </h1><br><h1 id="99">99. AboutActivity  </h1><br><h1 id="100">100. ContacterActivity  我的联系人</h1><br><a href="#10001">1.我的联系人</a><br><a href="#10002">1.ContacterFragment 联系人列表界面</a><br><br><h1 id="101">101. MessageActivity  系统通知</h1><br><a href="#10101">1.系统通知 分配从数据库加载数据</a><br><br><h1 id="102">102. IMContactService  联系人服务</h1><br><a href="#10201">1.联系人服务</a><br><br><h1 id="103">103. IMChatService  聊天服务</h1><br><a href="#10301">1.聊天服务</a><br><br><h1 id="104">104. IMSystemMsgService  系统消息服务</h1><br><a href="#10401">1.系统消息服务</a><br><br><h1 id="105">105. ReConnectService  重连接服务</h1><br><a href="#10501">1.重连接服务  服务中注册了监听器</a><br><br><h1 id="108">108. ChatActivity  与朋友的会话</h1><br><a href="#10801">1.与朋友的会话</a><br><br><h1 id="109">109. IMMessageReceiver  接收消息的广播接受器</h1><br><a href="#10901">1.接收消息的广播接受器</a><br><br>参考文档<br><a href="http://lib.csdn.net/article/android/4461" title="查看">Android 快速开发框架</a><br><br>1. 简介<br><br><h1 id="0101">1. 权限</h1>

<blockquote>
<h2 id="-1-"><a href="#1">返回目录</a></h2>
</blockquote>
<pre><code>&lt;!-- 权限 --&gt;
    //联网
    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;
    &lt;uses-permission android:name=&quot;android.permission.READ_PHONE_STATE&quot; /&gt;
    &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;
    &lt;uses-permission android:name=&quot;android.permission.ACCESS_COARSE_LOCATION&quot; /&gt;
    &lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot; /&gt; 
    &lt;uses-permission android:name=&quot;android.permission.ACCESS_WIFI_STATE&quot; /&gt; 
    &lt;uses-permission android:name=&quot;android.permission.CHANGE_WIFI_STATE&quot; /&gt;
　　  &lt;uses-permission android:name=&quot;android.permission.SYSTEM_ALERT_WINDOW&quot; /&gt;
    &lt;uses-permission android:name=&quot;android.permission.WAKE_LOCK&quot; /&gt;
    &lt;uses-permission android:name=&quot;android.permission.VIBRATE&quot; /&gt;
    &lt;uses-permission android:name=&quot;android.permission.RECORD_AUDIO&quot; /&gt;

    &lt;!-- --&gt;
    &lt;uses-permission android:name=&quot;com.android.launcher.permission.INSTALL_SHORTCUT&quot; /&gt;
    &lt;uses-permission android:name=&quot;com.android.browser.permission.READ_HISTORY_BOOKMARKS&quot; /&gt;
    &lt;uses-permission android:name=&quot;com.android.browser.permission.WRITE_HISTORY_BOOKMARKS&quot; /&gt;
</code></pre><blockquote>
<h2 id="-h1-id-0102-1-no-resource-found-that-matches-the-given-name-h1-"><h1 id="0102">1. No resource found that matches the given name</h1></h2>
<h2 id="-01-"><a href="#01">返回目录</a></h2>
</blockquote>
<p>app_panel_bg_f.9.png  这个命名方式 在studio中找不到 会报错  重命名时去掉 .9</p>
<blockquote>
<h2 id="-h1-id-0103-1-themes-h1-"><h1 id="0103">1. themes</h1></h2>
<h2 id="-1-"><a href="#1">返回目录</a></h2>
</blockquote>
<h1 id="-">定义了各种全局的控件的变量</h1>
<p> android:theme=&quot;@style/myTheme&quot;  清单文件中配置</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;resources xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;
    &lt;style name=&quot;myTheme&quot; parent=&quot;android:Theme&quot;&gt;
        &lt;!-- &lt;item name=&quot;android:windowBackground&quot;&gt;@drawable/start&lt;/item&gt; --&gt;
        &lt;item name=&quot;android:windowFullscreen&quot;&gt;false&lt;/item&gt;  //是否全屏
        &lt;item name=&quot;android:windowContentOverlay&quot;&gt;@null&lt;/item&gt;  &lt;!--定义ActionBar窗体的背景--&gt;
        &lt;item name=&quot;android:windowNoTitle&quot;&gt;false&lt;/item&gt;  //没有标题
        &lt;item name=&quot;android:windowTitleSize&quot;&gt;55dip&lt;/item&gt;
        &lt;item name=&quot;android:windowTitleBackgroundStyle&quot;&gt;@style/mCustomWindowTitleBackground&lt;/item&gt;
        &lt;!--这个的各种常用控件的样式--&gt;
        &lt;item name=&quot;android:expandableListViewStyle&quot;&gt;@style/mExpandableListView&lt;/item&gt;
        &lt;item name=&quot;android:listViewStyle&quot;&gt;@style/mListView&lt;/item&gt;
        &lt;item name=&quot;android:buttonStyle&quot;&gt;@style/mButtonWhite&lt;/item&gt;
        &lt;item name=&quot;android:editTextStyle&quot;&gt;@style/mEditText&lt;/item&gt;
        &lt;item name=&quot;android:checkboxStyle&quot;&gt;@style/mCheckBox&lt;/item&gt;

        &lt;item name=&quot;android:progressBarStyleHorizontal&quot;&gt;@style/mProgressBarHorizontal&lt;/item&gt;

        &lt;item name=&quot;android:scrollbarSize&quot;&gt;15dip&lt;/item&gt;
        &lt;item name=&quot;android:scrollbarThumbVertical&quot;&gt;@drawable/scrollbar_handle_vertical&lt;/item&gt;
        &lt;item name=&quot;android:scrollbarTrackVertical&quot;&gt;@drawable/scrollbar_vertical&lt;/item&gt;
    &lt;/style&gt;

&lt;/resources&gt;
</code></pre><blockquote>
<h2 id="-h1-id-0104-2-styles-h1-"><h1 id="0104">2. styles</h1></h2>
<h2 id="-1-"><a href="#1">返回目录</a></h2>
</blockquote>
<h1 id="-">定义了各种控件的样式</h1>
<pre><code>这个是控件单击加样式的代码
style=&quot;@style/mEditText&quot;


&lt;resources&gt;

    &lt;!-- Base application theme. --&gt;
    &lt;style name=&quot;AppTheme&quot; parent=&quot;Theme.AppCompat.Light.DarkActionBar&quot;&gt;
        &lt;!-- Customize your theme here. --&gt;
    &lt;/style&gt;

    &lt;style name=&quot;Widget&quot; parent=&quot;android:Widget&quot;&gt;&lt;/style&gt;

    &lt;style name=&quot;mCustomWindowTitleBackground&quot; parent=&quot;@style/Widget&quot;&gt;
        &lt;item name=&quot;android:background&quot;&gt;@color/transparent&lt;/item&gt;
    &lt;/style&gt;

    &lt;style name=&quot;mExpandableListView&quot; parent=&quot;@style/Widget&quot;&gt;
        &lt;item name=&quot;android:groupIndicator&quot;&gt;@drawable/expander_group&lt;/item&gt;
        &lt;item name=&quot;android:indicatorLeft&quot;&gt;10dip&lt;/item&gt;
        &lt;item name=&quot;android:indicatorRight&quot;&gt;?android:attr/expandableListPreferredItemIndicatorRight&lt;/item&gt;
        &lt;item name=&quot;android:childDivider&quot;&gt;@drawable/list_divider&lt;/item&gt;
    &lt;/style&gt;

     &lt;style name=&quot;mProgressBarHorizontal&quot; parent=&quot;@style/Widget&quot;&gt;
         &lt;item name=&quot;android:indeterminateOnly&quot;&gt;false&lt;/item&gt;
         &lt;item name=&quot;android:progressDrawable&quot;&gt;@drawable/progress_horizontal&lt;/item&gt;
         &lt;item name=&quot;android:indeterminateDrawable&quot;&gt;@drawable/progress_indeterminate_horizontal&lt;/item&gt;
         &lt;item name=&quot;android:minHeight&quot;&gt;5dip&lt;/item&gt;
         &lt;item name=&quot;android:maxHeight&quot;&gt;5dip&lt;/item&gt;
     &lt;/style&gt;

     &lt;style name=&quot;mProgressBarCircular&quot; parent=&quot;@style/Widget&quot;&gt;
         &lt;item name=&quot;android:indeterminateOnly&quot;&gt;true&lt;/item&gt;
         &lt;item name=&quot;android:indeterminateDrawable&quot;&gt;@drawable/progress_circular&lt;/item&gt;
         &lt;item name=&quot;android:minHeight&quot;&gt;5dip&lt;/item&gt;
         &lt;item name=&quot;android:maxHeight&quot;&gt;5dip&lt;/item&gt;
     &lt;/style&gt;

      &lt;style name=&quot;mButtonWhite&quot; parent=&quot;@style/Widget&quot;&gt;
          &lt;item name=&quot;android:background&quot;&gt;@drawable/button_selector_white&lt;/item&gt;
          &lt;item name=&quot;android:focusable&quot;&gt;true&lt;/item&gt;
          &lt;item name=&quot;android:clickable&quot;&gt;true&lt;/item&gt;
          &lt;item name=&quot;android:textAppearance&quot;&gt;?android:attr/textAppearanceSmallInverse&lt;/item&gt;
          &lt;item name=&quot;android:gravity&quot;&gt;center_vertical|center_horizontal&lt;/item&gt;
          &lt;item name=&quot;android:textColor&quot;&gt;@android:color/primary_text_light&lt;/item&gt;
      &lt;/style&gt;

      &lt;style name=&quot;mListView&quot; parent=&quot;@style/Widget&quot;&gt;
          &lt;item name=&quot;android:listSelector&quot;&gt;@drawable/list_selector_background&lt;/item&gt;
          &lt;item name=&quot;android:cacheColorHint&quot;&gt;?android:attr/colorBackgroundCacheHint&lt;/item&gt;
          &lt;item name=&quot;android:divider&quot;&gt;@drawable/list_divider&lt;/item&gt;
      &lt;/style&gt;

      &lt;style name=&quot;mEditText&quot; parent=&quot;@style/Widget&quot;&gt;
          &lt;item name=&quot;android:focusable&quot;&gt;true&lt;/item&gt;
          &lt;item name=&quot;android:focusableInTouchMode&quot;&gt;true&lt;/item&gt;
          &lt;item name=&quot;android:clickable&quot;&gt;true&lt;/item&gt;
          &lt;item name=&quot;android:background&quot;&gt;@drawable/input_bg&lt;/item&gt;
          &lt;item name=&quot;android:textAppearance&quot;&gt;?android:attr/textAppearanceMediumInverse&lt;/item&gt;
          &lt;item name=&quot;android:textColor&quot;&gt;@color/gray&lt;/item&gt;
          &lt;item name=&quot;android:gravity&quot;&gt;center_vertical&lt;/item&gt;
      &lt;/style&gt;

      &lt;style name=&quot;mCheckBox&quot; parent=&quot;@android:style/Widget.CompoundButton.CheckBox&quot;&gt;
          &lt;item name=&quot;android:textSize&quot;&gt;18sp&lt;/item&gt;
          &lt;item name=&quot;android:textColor&quot;&gt;@color/gray&lt;/item&gt;
          &lt;item name=&quot;android:paddingLeft&quot;&gt;10dip&lt;/item&gt;
          &lt;item name=&quot;android:button&quot;&gt;@drawable/check_box&lt;/item&gt;
      &lt;/style&gt;
&lt;/resources&gt;
</code></pre><blockquote>
<h2 id="-h1-id-0105-3-colors-h1-"><h1 id="0105">3. colors</h1></h2>
<h2 id="-1-"><a href="#1">返回目录</a></h2>
</blockquote>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;resources&gt;
    &lt;color name=&quot;red&quot;&gt;#FF0000&lt;/color&gt;
    &lt;color name=&quot;green&quot;&gt;#00FF00&lt;/color&gt;
    &lt;color name=&quot;green_dark&quot;&gt;#9CDC6A&lt;/color&gt;
    &lt;color name=&quot;blue&quot;&gt;#33B5E5&lt;/color&gt;
    &lt;color name=&quot;white&quot;&gt;#FFFFFFFF&lt;/color&gt;
    &lt;color name=&quot;black&quot;&gt;#000000&lt;/color&gt;
    &lt;color name=&quot;gray&quot;&gt;#7c7c7c&lt;/color&gt;
    &lt;color name=&quot;gray_white&quot;&gt;#ebebeb&lt;/color&gt;
    &lt;color name=&quot;gray_light&quot;&gt;#887c7c7c&lt;/color&gt;
    &lt;color name=&quot;gray_dark&quot;&gt;#2e2e2e&lt;/color&gt;
    &lt;color name=&quot;yellow&quot;&gt;#FFFC00&lt;/color&gt;
    &lt;color name=&quot;pink&quot;&gt;#FF87EF&lt;/color&gt;
    &lt;color name=&quot;orange&quot;&gt;#ff6200&lt;/color&gt;
    &lt;color name=&quot;list_divider&quot;&gt;#D3D3D3&lt;/color&gt;
    &lt;color name=&quot;transparent&quot;&gt;#00000000&lt;/color&gt;
    &lt;color name=&quot;transparent_bg&quot;&gt;#88838B8B&lt;/color&gt;
&lt;/resources&gt;
</code></pre><blockquote>
<h2 id="-h1-id-0106-4-drawable-h1-"><h1 id="0106">4.  Drawable资源</h1></h2>
<h2 id="-1-"><a href="#1">返回目录</a></h2>
</blockquote>
<p><a href="#0106_01">常规转圈进度条</a></p>
<pre><code>
选择器  expander_group
&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;selector xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;
    &lt;item android:drawable=&quot;@drawable/indicator_expanded&quot; android:state_expanded=&quot;true&quot;/&gt;
    &lt;item android:drawable=&quot;@drawable/indicator_unexpanded&quot;/&gt;
&lt;/selector&gt;

背景色渐变
&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;shape xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; &gt;
    &lt;gradient
        android:endColor=&quot;#33000000&quot;
        android:centerColor=&quot;#11000000&quot;
        android:startColor=&quot;#00000000&quot; /&gt;
&lt;/shape&gt;


check_box
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;selector xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;
    &lt;item android:drawable=&quot;@drawable/btn_check_box_on&quot; android:state_checked=&quot;true&quot; android:state_enabled=&quot;true&quot; android:state_window_focused=&quot;false&quot;/&gt;
    &lt;item android:drawable=&quot;@drawable/btn_check_box_off&quot; android:state_checked=&quot;false&quot; android:state_enabled=&quot;true&quot; android:state_window_focused=&quot;false&quot;/&gt;
    &lt;item android:drawable=&quot;@drawable/btn_check_box_on&quot; android:state_checked=&quot;true&quot; android:state_enabled=&quot;true&quot; android:state_pressed=&quot;true&quot;/&gt;
    &lt;item android:drawable=&quot;@drawable/btn_check_box_off&quot; android:state_checked=&quot;false&quot; android:state_enabled=&quot;true&quot; android:state_pressed=&quot;true&quot;/&gt;
    &lt;item android:drawable=&quot;@drawable/btn_check_box_on&quot; android:state_checked=&quot;true&quot; android:state_enabled=&quot;true&quot; android:state_focused=&quot;true&quot;/&gt;
    &lt;item android:drawable=&quot;@drawable/btn_check_box_off&quot; android:state_checked=&quot;false&quot; android:state_enabled=&quot;true&quot; android:state_focused=&quot;true&quot;/&gt;
    &lt;item android:drawable=&quot;@drawable/btn_check_box_off&quot; android:state_checked=&quot;false&quot; android:state_enabled=&quot;true&quot;/&gt;
    &lt;item android:drawable=&quot;@drawable/btn_check_box_on&quot; android:state_checked=&quot;true&quot; android:state_enabled=&quot;true&quot;/&gt;
&lt;/selector&gt;
</code></pre><blockquote>
<h2 id="-h1-id-0106_01-4-drawable-h1-"><h1 id="0106_01">4.  Drawable资源</h1></h2>
<h2 id="-0106-"><a href="#0106">返回目录</a></h2>
</blockquote>
<p><img src="http://i.imgur.com/uxt8NdP.png" alt=""></p>
<pre><code>    &lt;style name=&quot;mProgressBarCircular&quot; parent=&quot;@style/Widget&quot;&gt;
        &lt;item name=&quot;android:indeterminateOnly&quot;&gt;true&lt;/item&gt;
        &lt;item name=&quot;android:indeterminateDrawable&quot;&gt;@drawable/progress_circular&lt;/item&gt;
        &lt;item name=&quot;android:minHeight&quot;&gt;5dip&lt;/item&gt;
        &lt;item name=&quot;android:maxHeight&quot;&gt;5dip&lt;/item&gt;
    &lt;/style&gt;

差值
&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;animated-rotate xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    android:duration=&quot;200&quot;  时间200秒
    android:fromDegrees=&quot;0.0&quot;  度数
    android:interpolator=&quot;@android:anim/accelerate_decelerate_interpolator&quot;
    android:pivotX=&quot;50.0%&quot;   旋转圆心
    android:pivotY=&quot;50.0%&quot;
    android:repeatMode=&quot;restart&quot;  不断重复
    android:toDegrees=&quot;360.0&quot; 
    android:drawable=&quot;@drawable/progress_loading2&quot;&gt;
&lt;/animated-rotate&gt;
</code></pre><blockquote>
<h2 id="-h1-id-0107-android-studio-9-png-h1-"><h1 id="0107">Android Studio中使用.9.png</h1></h2>
<h2 id="-01-"><a href="#01">返回目录</a></h2>
</blockquote>
<h1 id="-">用鼠标左键画黑线  画黑线的表明可以拉伸，否则不拉伸</h1>
<h1 id="-9-">点9图片每个边都必须有黑线标记；</h1>
<h1 id="-eclipse-9-png-as-">在Eclipse中不检查.9.png的边，但是AS会检查，在每个边上要求有且仅有一段黑色标记</h1>
<p><a href="http://blog.csdn.net/sky_castle/article/details/49426015">android studio 中 .9.png的制作</a><br><a href="http://blog.csdn.net/dengpeng0419/article/details/52902869">Android Studio中关于.9.png图片的使用</a></p>
<h1 id="0108">清单文件</h1>

<p><a href="#01">返回目录</a></p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    xmlns:tools=&quot;http://schemas.android.com/tools&quot;
    package=&quot;com.andbase&quot;
    android:versionCode=&quot;18&quot;
    android:versionName=&quot;1.6&quot;&gt;

    &lt;uses-sdk
        android:minSdkVersion=&quot;14&quot;
        android:targetSdkVersion=&quot;17&quot;/&gt;

    &lt;!-- 权限 --&gt;
    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;
    &lt;uses-permission android:name=&quot;android.permission.READ_PHONE_STATE&quot; /&gt;
    &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;
    &lt;uses-permission android:name=&quot;android.permission.ACCESS_COARSE_LOCATION&quot; /&gt;
    &lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot; /&gt; 
    &lt;uses-permission android:name=&quot;android.permission.ACCESS_WIFI_STATE&quot; /&gt; 
    &lt;uses-permission android:name=&quot;android.permission.CHANGE_WIFI_STATE&quot; /&gt;
　　  &lt;uses-permission android:name=&quot;android.permission.SYSTEM_ALERT_WINDOW&quot; /&gt;
    &lt;uses-permission android:name=&quot;android.permission.WAKE_LOCK&quot; /&gt;
    &lt;uses-permission android:name=&quot;android.permission.VIBRATE&quot; /&gt;
    &lt;uses-permission android:name=&quot;android.permission.RECORD_AUDIO&quot; /&gt;

    &lt;!-- --&gt;
    &lt;uses-permission android:name=&quot;com.android.launcher.permission.INSTALL_SHORTCUT&quot; /&gt;
    &lt;uses-permission android:name=&quot;com.android.browser.permission.READ_HISTORY_BOOKMARKS&quot; /&gt;
    &lt;uses-permission android:name=&quot;com.android.browser.permission.WRITE_HISTORY_BOOKMARKS&quot; /&gt;


    &lt;application
        android:name=&quot;.global.MyApplication&quot;
        android:icon=&quot;@drawable/ic_launcher&quot;
        android:label=&quot;@string/app_name&quot;
        android:theme=&quot;@style/myTheme&quot; &gt;
         //android:name=&quot;.main.LauncherActivity&quot;
    &lt;!-- android:configChanges=&quot;keyboardHidden|orientation&quot; 
     切屏不会重新调用各个生命周期，只会执行onConfigurationChanged方法 

     对android:configChanges属性，一般认为有以下几点：
1、不设置Activity的android:configChanges时，切屏会重新调用各个生命周期，切横屏时会执行一次，切竖屏时会执行两次

2、设置Activity的android:configChanges=&quot;orientation&quot;时，切屏还是会重新调用各个生命周期，切横、竖屏时只会执行一次

3、设置Activity的android:configChanges=&quot;orientation|keyboardHidden&quot;时，
切屏不会重新调用各个生命周期，只会执行onConfigurationChanged方法

     但是，自从Android 3.2（API 13），
     在设置Activity的android:configChanges=&quot;orientation|keyboardHidden&quot;后，
     还是一样会重新调用各个生命周期的。因为screen size也开始跟着设备的横竖切换而改变。
     所以，在AndroidManifest.xml里设置的MiniSdkVersion和 TargetSdkVersion属性大于等于13的情况下，
     如果你想阻止程序在运行时重新加载Activity，除了设置&quot;orientation&quot;，你还必须设置&quot;ScreenSize&quot;。
解决方法：
AndroidManifest.xml中设置android:configChanges=&quot;orientation|screenSize“--&gt;
        &lt;activity
           android:name=&quot;.main.LauncherActivity&quot;           
            android:launchMode=&quot;singleTop&quot;
            android:label=&quot;引导页&quot;
            android:configChanges=&quot;keyboardHidden|orientation&quot; &gt;
            &lt;intent-filter&gt;
                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;
                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;
            &lt;/intent-filter&gt;
        &lt;/activity&gt;

        &lt;activity
            android:name=&quot;.main.MainActivity&quot;
               android:label=&quot;主页页&quot;
            android:configChanges=&quot;keyboardHidden|orientation&quot; &gt;
        &lt;/activity&gt;

         &lt;activity
            android:name=&quot;.demo.activity.DemoMainActivity&quot;
            android:label=&quot;程序案例&quot;
            android:configChanges=&quot;keyboardHidden|orientation&quot; &gt;
        &lt;/activity&gt;

         &lt;activity
            android:name=&quot;.demo.activity.DialogActivity&quot;
            android:configChanges=&quot;keyboardHidden|orientation&quot; &gt;
        &lt;/activity&gt;

         &lt;activity
            android:name=&quot;.demo.activity.ImageDownActivity&quot;
            android:configChanges=&quot;keyboardHidden|orientation&quot; &gt;
        &lt;/activity&gt;

         &lt;activity
            android:name=&quot;.demo.activity.AnimationActivity&quot;
            android:configChanges=&quot;keyboardHidden|orientation&quot; &gt;
        &lt;/activity&gt;

         &lt;activity
            android:name=&quot;.demo.activity.UIElementActivity&quot;
            android:configChanges=&quot;keyboardHidden|orientation&quot; &gt;
        &lt;/activity&gt;

        &lt;activity
            android:name=&quot;.demo.activity.CityListActivity&quot;
            android:configChanges=&quot;keyboardHidden|orientation&quot; &gt;
        &lt;/activity&gt;

        &lt;activity
            android:name=&quot;.demo.activity.DemoAbActivity&quot;
            android:configChanges=&quot;keyboardHidden|orientation&quot; &gt;
        &lt;/activity&gt;

        &lt;activity
            android:name=&quot;.demo.activity.DBInsideSampleActivity&quot;
              android:label=&quot;数据库内置存储&quot;
            android:configChanges=&quot;keyboardHidden|orientation&quot; &gt;
        &lt;/activity&gt;

        &lt;activity
            android:name=&quot;.demo.activity.DBSDSampleActivity&quot;
            android:configChanges=&quot;keyboardHidden|orientation&quot; &gt;
        &lt;/activity&gt;

        &lt;activity
            android:name=&quot;.demo.activity.DBOne2OneActivity&quot;
            android:configChanges=&quot;keyboardHidden|orientation&quot; &gt;
        &lt;/activity&gt;

        &lt;activity
            android:name=&quot;.demo.activity.DBOne2ManyActivity&quot;
            android:configChanges=&quot;keyboardHidden|orientation&quot; &gt;
        &lt;/activity&gt;

        &lt;activity
            android:name=&quot;.demo.activity.DBObjectActivity&quot;
            android:configChanges=&quot;keyboardHidden|orientation&quot; &gt;
        &lt;/activity&gt;

        &lt;activity
            android:name=&quot;.demo.activity.TitleBarActivity&quot;
            android:configChanges=&quot;keyboardHidden|orientation&quot; &gt;
        &lt;/activity&gt;

        &lt;activity
            android:name=&quot;.demo.activity.ThreadControlActivity&quot;
            android:configChanges=&quot;keyboardHidden|orientation&quot; &gt;
        &lt;/activity&gt;

        &lt;activity
            android:name=&quot;.demo.activity.TabActivity&quot;
            android:configChanges=&quot;keyboardHidden|orientation&quot; &gt;
        &lt;/activity&gt;

         &lt;activity
            android:name=&quot;.demo.activity.TabTopActivity&quot;
            android:configChanges=&quot;keyboardHidden|orientation&quot; &gt;
        &lt;/activity&gt;

        &lt;activity
            android:name=&quot;.demo.activity.TabBottomActivity&quot;
            android:configChanges=&quot;keyboardHidden|orientation&quot; &gt;
        &lt;/activity&gt;

        &lt;activity
            android:name=&quot;.demo.activity.DownListActivity&quot;
            android:configChanges=&quot;keyboardHidden|orientation&quot; &gt;
        &lt;/activity&gt;

        &lt;activity
            android:name=&quot;.demo.activity.DBActivity&quot;
            android:configChanges=&quot;keyboardHidden|orientation&quot; &gt;
        &lt;/activity&gt;

        &lt;activity
            android:name=&quot;.demo.activity.PullToRefreshActivity&quot;
            android:configChanges=&quot;keyboardHidden|orientation&quot; &gt;
        &lt;/activity&gt;

        &lt;activity
            android:name=&quot;.demo.activity.ChartActivity&quot;
            android:configChanges=&quot;keyboardHidden|orientation&quot; &gt;
        &lt;/activity&gt;

        &lt;activity
            android:name=&quot;.demo.activity.PullToRefreshListActivity&quot;
            android:configChanges=&quot;keyboardHidden|orientation&quot; &gt;
        &lt;/activity&gt;

         &lt;activity
            android:name=&quot;.demo.activity.PullToRefreshGridActivity&quot;
            android:configChanges=&quot;keyboardHidden|orientation&quot; &gt;
        &lt;/activity&gt;

        &lt;activity
            android:name=&quot;.demo.activity.SlidingButtonActivity&quot;
            android:configChanges=&quot;keyboardHidden|orientation&quot; &gt;
        &lt;/activity&gt;

        &lt;activity
            android:name=&quot;.demo.activity.SlidingPlayViewActivity&quot;
            android:configChanges=&quot;keyboardHidden|orientation&quot; &gt;
        &lt;/activity&gt;

         &lt;activity
            android:name=&quot;.demo.activity.SlidingLeftActivity&quot;
            android:configChanges=&quot;keyboardHidden|orientation&quot; &gt;
        &lt;/activity&gt;


        &lt;activity
            android:name=&quot;.demo.activity.WelcomeActivity&quot;
            android:configChanges=&quot;keyboardHidden|orientation&quot; &gt;
        &lt;/activity&gt;

        &lt;activity
            android:name=&quot;.demo.activity.XYLineChartActivity&quot;
            android:configChanges=&quot;keyboardHidden|orientation&quot; &gt;
        &lt;/activity&gt;

        &lt;activity
            android:name=&quot;.demo.activity.XYBarChartActivity&quot;
            android:configChanges=&quot;keyboardHidden|orientation&quot; &gt;
        &lt;/activity&gt;

        &lt;activity
            android:name=&quot;.demo.activity.PieChartActivity&quot;
            android:configChanges=&quot;keyboardHidden|orientation&quot; &gt;
        &lt;/activity&gt;

        &lt;activity
            android:name=&quot;.demo.activity.TimeChartActivity&quot;
            android:configChanges=&quot;keyboardHidden|orientation&quot; &gt;
        &lt;/activity&gt;

        &lt;activity
            android:name=&quot;.demo.activity.XYAreaChartActivity&quot;
            android:configChanges=&quot;keyboardHidden|orientation&quot; &gt;
        &lt;/activity&gt;

        &lt;activity
            android:name=&quot;.demo.activity.LevelChartActivity&quot;
            android:configChanges=&quot;keyboardHidden|orientation&quot; &gt;
        &lt;/activity&gt;

        &lt;activity
            android:name=&quot;.demo.activity.WheelActivity&quot;
            android:configChanges=&quot;keyboardHidden|orientation&quot; &gt;
        &lt;/activity&gt;

        &lt;activity
            android:name=&quot;.demo.activity.CropImageActivity&quot;
            android:configChanges=&quot;keyboardHidden|orientation&quot; &gt;
        &lt;/activity&gt;

        &lt;activity
            android:name=&quot;.demo.activity.AddPhotoActivity&quot;
            android:configChanges=&quot;keyboardHidden|orientation&quot; &gt;
        &lt;/activity&gt;

        &lt;activity
            android:name=&quot;.demo.activity.CalendarActivity&quot;
            android:configChanges=&quot;keyboardHidden|orientation&quot; &gt;
        &lt;/activity&gt;


        &lt;activity
            android:name=&quot;.demo.activity.PHashActivity&quot;
            android:configChanges=&quot;keyboardHidden|orientation&quot; &gt;
        &lt;/activity&gt;

         &lt;activity
            android:name=&quot;.demo.activity.PullToRefreshViewActivity&quot;
            android:configChanges=&quot;keyboardHidden|orientation&quot; &gt;
        &lt;/activity&gt;

         &lt;activity
            android:name=&quot;.demo.activity.PullToRefreshMultiColumnListActivity&quot;
            android:configChanges=&quot;keyboardHidden|orientation&quot; &gt;
        &lt;/activity&gt;

        &lt;activity
            android:name=&quot;.demo.activity.SlidingMenuActivity&quot;
            android:configChanges=&quot;keyboardHidden|orientation&quot; &gt;
        &lt;/activity&gt;

        &lt;activity
            android:name=&quot;.demo.activity.SlidingMenuLeftActivity&quot;
            android:configChanges=&quot;keyboardHidden|orientation&quot; &gt;
        &lt;/activity&gt;

        &lt;activity
            android:name=&quot;.demo.activity.SlidingMenuRightActivity&quot;
            android:configChanges=&quot;keyboardHidden|orientation&quot; &gt;
        &lt;/activity&gt;

        &lt;activity
            android:name=&quot;.demo.activity.SlidingMenuLeftRightActivity&quot;
            android:configChanges=&quot;keyboardHidden|orientation&quot; &gt;
        &lt;/activity&gt;

        &lt;activity
            android:name=&quot;.demo.activity.SlidingMenuZoomActivity&quot;
            android:configChanges=&quot;keyboardHidden|orientation&quot; &gt;
        &lt;/activity&gt;

        &lt;activity
            android:name=&quot;.demo.activity.SlidingMenuSlideActivity&quot;
            android:configChanges=&quot;keyboardHidden|orientation&quot; &gt;
        &lt;/activity&gt;

        &lt;activity
            android:name=&quot;.demo.activity.SlidingMenuScaleActivity&quot;
            android:configChanges=&quot;keyboardHidden|orientation&quot; &gt;
        &lt;/activity&gt;

        &lt;activity
            android:name=&quot;.demo.activity.SlidingMenuTitleHoldActivity&quot;
            android:configChanges=&quot;keyboardHidden|orientation&quot; &gt;
        &lt;/activity&gt;

        &lt;activity
            android:name=&quot;.demo.activity.CarouselActivity&quot;
            android:configChanges=&quot;keyboardHidden|orientation&quot; &gt;
        &lt;/activity&gt;

        &lt;activity
            android:name=&quot;.demo.activity.CarouselImageActivity&quot;
            android:configChanges=&quot;keyboardHidden|orientation&quot; &gt;
        &lt;/activity&gt;

        &lt;activity
            android:name=&quot;.demo.activity.CarouselViewActivity&quot;
            android:configChanges=&quot;keyboardHidden|orientation&quot; &gt;
        &lt;/activity&gt;

        &lt;activity
            android:name=&quot;.demo.activity.ProgressBarActivity&quot;
            android:configChanges=&quot;keyboardHidden|orientation&quot; &gt;
        &lt;/activity&gt;

        &lt;activity
            android:name=&quot;.demo.activity.ProgressBarCircleActivity&quot;
            android:configChanges=&quot;keyboardHidden|orientation&quot; &gt;
        &lt;/activity&gt;

        &lt;activity
            android:name=&quot;.demo.activity.ProgressBarHorizontalActivity&quot;
            android:configChanges=&quot;keyboardHidden|orientation&quot; &gt;
        &lt;/activity&gt;

        &lt;activity
            android:name=&quot;.demo.activity.IocViewActivity&quot;
            android:configChanges=&quot;keyboardHidden|orientation&quot; &gt;
        &lt;/activity&gt;

        &lt;activity
            android:name=&quot;.demo.activity.Rotate3DActivity&quot;
            android:configChanges=&quot;keyboardHidden|orientation&quot; &gt;
        &lt;/activity&gt;

         &lt;activity
            android:name=&quot;.demo.activity.Rotate3DActivity1&quot;
            android:configChanges=&quot;keyboardHidden|orientation&quot; &gt;
        &lt;/activity&gt;

          &lt;activity
            android:name=&quot;.demo.activity.Rotate3DActivity2&quot;
            android:configChanges=&quot;keyboardHidden|orientation&quot; &gt;
        &lt;/activity&gt;

        &lt;activity
            android:name=&quot;.demo.activity.HttpActivity&quot;
            android:configChanges=&quot;keyboardHidden|orientation&quot; &gt;
        &lt;/activity&gt;

        &lt;activity
            android:name=&quot;.demo.activity.HttpMiniActivity&quot;
            android:configChanges=&quot;keyboardHidden|orientation&quot; &gt;
        &lt;/activity&gt;

       &lt;activity
            android:name=&quot;.demo.activity.SoapActivity&quot;
            android:configChanges=&quot;keyboardHidden|orientation&quot; &gt;
        &lt;/activity&gt;

        &lt;activity
            android:name=&quot;.demo.activity.NestScrollActivity&quot;
            android:configChanges=&quot;keyboardHidden|orientation&quot; &gt;
        &lt;/activity&gt;

        &lt;activity
            android:name=&quot;.demo.activity.ListNestViewPagerActivity&quot;
            android:configChanges=&quot;keyboardHidden|orientation&quot; &gt;
        &lt;/activity&gt;

        &lt;activity
            android:name=&quot;.demo.activity.SlidingMenuNestViewPagerActivity&quot;
            android:configChanges=&quot;keyboardHidden|orientation&quot; &gt;
        &lt;/activity&gt;

        &lt;activity
            android:name=&quot;.demo.activity.SceneActivity&quot;
            android:configChanges=&quot;keyboardHidden|orientation&quot; &gt;
        &lt;/activity&gt;

        &lt;activity
            android:name=&quot;.demo.activity.AnalogClockActivity&quot;
            android:configChanges=&quot;keyboardHidden|orientation&quot; &gt;
        &lt;/activity&gt;

        &lt;activity
            android:name=&quot;.demo.activity.NumberClockActivity&quot;
            android:configChanges=&quot;keyboardHidden|orientation&quot; &gt;
        &lt;/activity&gt;

        &lt;activity
            android:name=&quot;.demo.activity.DeskCalendarActivity&quot;
            android:configChanges=&quot;keyboardHidden|orientation&quot; &gt;
        &lt;/activity&gt;

        &lt;activity
            android:name=&quot;.demo.activity.PopoverActivity&quot;
            android:configChanges=&quot;keyboardHidden|orientation&quot; &gt;
        &lt;/activity&gt;

        &lt;activity
            android:name=&quot;.demo.activity.SlidingMenuNestTabActivity&quot;
            android:configChanges=&quot;keyboardHidden|orientation&quot; &gt;
        &lt;/activity&gt;

        &lt;activity
            android:name=&quot;.blog.WebActivity&quot;
            android:configChanges=&quot;keyboardHidden|orientation&quot; &gt;
        &lt;/activity&gt;

        &lt;activity
            android:name=&quot;.login.LoginActivity&quot;
            android:configChanges=&quot;keyboardHidden|orientation&quot; &gt;
        &lt;/activity&gt;

        &lt;activity
            android:name=&quot;.login.RegisterActivity&quot;
            android:configChanges=&quot;keyboardHidden|orientation&quot; &gt;
        &lt;/activity&gt;

         &lt;activity
            android:name=&quot;.login.AgreementActivity&quot;
            android:configChanges=&quot;keyboardHidden|orientation&quot; &gt;
        &lt;/activity&gt;

         &lt;activity
            android:name=&quot;.login.FindPwdActivity&quot;
            android:configChanges=&quot;keyboardHidden|orientation&quot; &gt;
        &lt;/activity&gt;

        &lt;activity
            android:name=&quot;.login.AboutActivity&quot;
            android:configChanges=&quot;keyboardHidden|orientation&quot; &gt;
        &lt;/activity&gt;

        &lt;activity
            android:name=&quot;.im.activity.ContacterActivity&quot;
            android:configChanges=&quot;keyboardHidden|orientation&quot; &gt;
        &lt;/activity&gt;

         &lt;activity
            android:name=&quot;.im.activity.ChatActivity&quot;
            android:configChanges=&quot;keyboardHidden|orientation&quot; &gt;
        &lt;/activity&gt; 

        &lt;activity
            android:name=&quot;.im.activity.MessageActivity&quot;
            android:configChanges=&quot;keyboardHidden|orientation&quot; &gt;
        &lt;/activity&gt;

        &lt;!-- &lt;activity android:name=&quot;com.kfb.c.Kf&quot;
            android:launchMode=&quot;singleInstance&quot;
            android:screenOrientation=&quot;portrait&quot; /&gt;

        &lt;activity
            android:name=&quot;com.kfb.a.Qim&quot;
            android:configChanges=&quot;keyboard|keyboardHidden|orientation&quot;
            android:launchMode=&quot;singleInstance&quot;
            android:theme=&quot;@android:style/Theme.Translucent.NoTitleBar&quot; /&gt; --&gt;


        &lt;!-- push service client --&gt;
        &lt;receiver android:name=&quot;.im.receiver.IMMessageReceiver&quot;&gt;
            &lt;intent-filter&gt;
                &lt;!-- 接收消息 --&gt;
                &lt;action android:name=&quot;com.andbase.action.NEW_MESSAGE&quot; /&gt;
                &lt;action android:name=&quot;com.andbase.action.CHAT_MESSAGE&quot; /&gt;
                &lt;action android:name=&quot;com.andbase.action.SYS_MESSAGE&quot; /&gt;
                &lt;!-- 收到好友邀请 --&gt;
                &lt;action android:name=&quot;com.andbase.action.ROSTER_SUBSCRIBE&quot; /&gt;
            &lt;/intent-filter&gt;
        &lt;/receiver&gt;

        &lt;!-- 联系人服务 --&gt;
        &lt;service android:name=&quot;.im.service.IMContactService&quot;&gt;&lt;/service&gt;
        &lt;!-- 聊天服务 --&gt;
        &lt;service android:name=&quot;.im.service.IMChatService&quot;&gt;&lt;/service&gt;  
        &lt;!-- 系统消息服务 --&gt;
        &lt;service android:name=&quot;.im.service.IMSystemMsgService&quot;&gt;&lt;/service&gt;
        &lt;!-- 重连接服务 --&gt;
         &lt;service android:name=&quot;.im.service.ReConnectService&quot;&gt;&lt;/service&gt;


    &lt;/application&gt;

&lt;/manifest&gt;
</code></pre><blockquote>
<h2 id="-h1-id-0401-1-listview-h1-"><h1 id="0401">1.  listView的数据容器</h1></h2>
<h2 id="-04-"><a href="#04">返回目录</a></h2>
</blockquote>
<pre><code>// 列表内是键值对
private List&lt;Map&lt;String, Object&gt;&gt; list = null;


向数据链表中添加对象
// ListView数据
        list = new ArrayList&lt;Map&lt;String, Object&gt;&gt;();
        Map&lt;String, Object&gt; map = new HashMap&lt;String, Object&gt;();

        map = new HashMap&lt;String, Object&gt;();
        map.put(&quot;itemsIcon&quot;, mPhotoList.get(0));
        map.put(&quot;itemsTitle&quot;, &quot;AbActivity基本用法&quot;);
        map.put(&quot;itemsText&quot;, &quot;AbActivity使用示例&quot;);
        list.add(map);

        map = new HashMap&lt;String, Object&gt;();
        map.put(&quot;itemsIcon&quot;, mPhotoList.get(1));
        map.put(&quot;itemsTitle&quot;, &quot;数据库ORM&quot;);
        map.put(&quot;itemsText&quot;, &quot;注解，数据库对象映射&quot;);
        list.add(map);

        map = new HashMap&lt;String, Object&gt;();
        map.put(&quot;itemsIcon&quot;, mPhotoList.get(2));
        map.put(&quot;itemsTitle&quot;, &quot;IOC 适配View&quot;);
        map.put(&quot;itemsText&quot;, &quot;像findViewById说no&quot;);
        list.add(map);

        map = new HashMap&lt;String, Object&gt;();
        map.put(&quot;itemsIcon&quot;, mPhotoList.get(3));
        map.put(&quot;itemsTitle&quot;, &quot;Http工具类&quot;);
        map.put(&quot;itemsText&quot;, &quot;网络通信首选1&quot;);
        list.add(map);




//这个是方法的使用
// 使用自定义的Adapter
        myListViewAdapter = new MyListViewAdapter(DemoMainActivity.this, list,
                R.layout.item_list, new String[] { &quot;itemsIcon&quot;, &quot;itemsTitle&quot;,
                        &quot;itemsText&quot; }, new int[] { R.id.itemsIcon,
                        R.id.itemsTitle, R.id.itemsText });
        mListView.setAdapter(myListViewAdapter);
        // item被点击事件
        mListView.setOnItemClickListener(new OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView&lt;?&gt; parent, View view,
                    int position, long id) {
                Intent intent = null;
                switch (position) {
                case 0:
                    intent = new Intent(DemoMainActivity.this, DemoAbActivity.class);
                    startActivity(intent);
                    break;



xml布局
&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    android:layout_width=&quot;fill_parent&quot;
    android:layout_height=&quot;fill_parent&quot;
    android:padding=&quot;5dip&quot; &gt;

    &lt;RelativeLayout
        android:id=&quot;@+id/itemsImage&quot;
        android:layout_width=&quot;60dip&quot;
        android:layout_height=&quot;60dip&quot;
        android:background=&quot;@drawable/image_border&quot; &gt;

        &lt;ProgressBar
            android:id=&quot;@+id/progressBar&quot;
            style=&quot;?android:attr/progressBarStyleSmall&quot;
            android:layout_width=&quot;wrap_content&quot;
            android:layout_height=&quot;wrap_content&quot;
            android:layout_centerInParent=&quot;true&quot; /&gt;

        &lt;ImageView
            android:id=&quot;@+id/itemsIcon&quot;
            android:layout_width=&quot;fill_parent&quot;
            android:layout_height=&quot;fill_parent&quot;
            android:layout_centerInParent=&quot;true&quot;
            android:padding=&quot;2dip&quot;
            android:scaleType=&quot;fitXY&quot; /&gt;
    &lt;/RelativeLayout&gt;

    &lt;TextView
        android:id=&quot;@+id/itemsTitle&quot;
        android:layout_width=&quot;wrap_content&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:layout_gravity=&quot;center_vertical&quot;
        android:layout_toRightOf=&quot;@+id/itemsImage&quot;
        android:paddingLeft=&quot;10dip&quot;
        android:paddingRight=&quot;10dip&quot;
        android:paddingTop=&quot;5dip&quot;
        android:textColor=&quot;@color/gray_dark&quot;
        android:textSize=&quot;18sp&quot; /&gt;

    &lt;TextView
        android:id=&quot;@+id/itemsText&quot;
        android:layout_width=&quot;fill_parent&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:layout_below=&quot;@+id/itemsTitle&quot;
        android:layout_toRightOf=&quot;@+id/itemsImage&quot;
        android:gravity=&quot;left&quot;
        android:paddingBottom=&quot;2dip&quot;
        android:paddingLeft=&quot;10dip&quot;
        android:paddingRight=&quot;10dip&quot;
        android:textColor=&quot;@color/gray&quot;
        android:textSize=&quot;15sp&quot; /&gt;

&lt;/RelativeLayout&gt;
</code></pre><blockquote>
<h2 id="-h1-id-1601-1-listview-h1-"><h1 id="1601">1.  listView的数据容器</h1></h2>
<h2 id="-16-"><a href="#16">返回目录</a></h2>
</blockquote>
<pre><code>各种标题栏的修改和弹出框的用法
</code></pre><blockquote>
<h2 id="-h1-id-1101-1-h1-"><h1 id="1101">1.   数据库的基本操作</h1></h2>
<h2 id="-11-"><a href="#11">返回目录</a></h2>
</blockquote>
<pre><code>分页查询数据的应用

 //初始化数据库操作实现类
        userDao = new UserInsideDao(DBInsideSampleActivity.this);

        //(1)获取数据库 
          userDao.startReadableDatabase();

//(2)执行查询    userDao表明查询的表  按create_time进行desc升序排列  pageSize显示的条数   查询从0到10的数据  得到的是符合条件的列表
        userList = userDao.queryList(null, null, null, null, null, &quot;create_time desc limit &quot;+String.valueOf(pageSize)+ &quot; offset &quot; +0, null);
       //这个是总的条数
        totalCount = userDao.queryCount(null, null);
        //(3)关闭数据库
          userDao.closeDatabase();

// 修改和删除按钮
        // 释放焦点
        holder.modifyBtn.setFocusable(false);
        holder.delBtn.setFocusable(false);

Java 中的instanceof 运算符是用来在运行时指出对象是否是特定类的一个实例。instanceof通过返回一个布尔值来指出，这个对象是否是这个特定类或者是它的子类的一个实例。
 if(mContext instanceof DBInsideSampleActivity){
                     ((DBInsideSampleActivity)mContext).updateData(user);
                 }


/**
     * 更新数据
     * 描述：TODO
     * @param u
     */
    public void updateData(LocalUser u){
        //(1)获取数据库
        userDao.startWritableDatabase(false);
        userDao.update(u);
        userDao.closeDatabase();
    }


/**
     * 
     * 描述：删除数据
     * @param id
     */
    public void delData(int id){

        //(1)获取数据库
        userDao.startWritableDatabase(false);
        //(2)执行查询
        userDao.delete(id);
        //(3)关闭数据库
        userDao.closeDatabase();

        queryData();
    }


/**
     * 
     * 描述：查询数据
     * @throws 
     */
    public void queryData(){
        //(1)获取数据库
        userDao.startReadableDatabase();
        //(2)执行查询
        List&lt;LocalUser&gt; userListNew = userDao.queryList(null, null, null, null, null, &quot;create_time desc limit &quot;+String.valueOf(pageSize)+ &quot; offset &quot; +String.valueOf((pageNum-1)*pageSize), null);
        //(3)关闭数据库
        userDao.closeDatabase();

        userList.clear();
        if(userListNew!=null){
             userList.addAll(userListNew);
        }

        myListViewAdapter.notifyDataSetChanged();
        checkPageBar();
    }


//检查分页的条数
    private void checkPageBar(){
        if(userList == null || userList.size()==0){
            //无数据隐藏分页栏
            mListViewForPage.setVisibility(View.GONE);
        }else{
            queryDataCount();
        }
    }


/**
     * 
     * 描述：查询数量
     * @throws 
     */
    public void queryDataCount(){
        //(1)获取数据库
        userDao.startReadableDatabase();
        //(2)执行查询
        totalCount = userDao.queryCount(null, null);
        //(3)关闭数据库
        userDao.closeDatabase();

        total.setText(&quot;总条数:&quot; +String.valueOf(totalCount));
        current.setText(&quot;当前页:&quot; + String.valueOf(pageNum));
        checkView();
        mListViewForPage.setVisibility(View.VISIBLE);

    }

/**
     * 
     * 描述：保存数据
     * @param u
     * @throws 
     */
    public void saveData(LocalUser u){
        //(1)获取数据库
        userDao.startWritableDatabase(false);
        //(2)执行查询
        long id = userDao.insert(u);
        //(3)关闭数据库
        userDao.closeDatabase();

        //showToast(&quot;插入数据成功,ID:&quot;+id);
        //插入数据成功
        if(id!=-1){
            //查询数据
            queryData();
        }
    }


UserInsideDao  是把数据表建立在项目的内部
</code></pre><blockquote>
<h2 id="-h1-id-1201-1-sd-h1-"><h1 id="1201">1.  数据库建立在SD卡中</h1></h2>
<h2 id="-12-"><a href="#12">返回目录</a></h2>
</blockquote>
<pre><code>一个把数据库建立在程序内部，一个把程序建立在SD卡上，主要区别是它们的构造器不同DBInsideHelper与DBSDHelper区别
/**
 * 
 * © 2012 amsoft.cn
 * 名称：UserInsideDao.java 
 * 描述：本地数据库 在data下面
 * @author 还如一梦中
 * @date：2013-7-31 下午4:12:36
 * @version v1.0
 */
public class UserInsideDao extends AbDBDaoImpl&lt;LocalUser&gt; {
    public UserInsideDao(Context context) {
        super(new DBInsideHelper(context),LocalUser.class);
    }
}


/**
 * 
 * © 2012 amsoft.cn
 * 名称：UserDao.java 
 * 描述：本地数据库在sd中
 * @author 还如一梦中
 * @date：2013-7-31 下午4:13:02
 * @version v1.0
 */
public class UserSDDao extends AbDBDaoImpl&lt;LocalUser&gt; {
    public UserSDDao(Context context) {
        super(new DBSDHelper(context),LocalUser.class);
    }
}
</code></pre><blockquote>
<h2 id="-h1-id-1301-1-listview-h1-"><h1 id="1301">1.  listView的数据容器</h1></h2>
<h2 id="-13-"><a href="#13">返回目录</a></h2>
</blockquote>
<pre><code>// 包含实体的存储，指定外键 类型1对1 外键
    @Relations(name=&quot;stock&quot;,type=&quot;one2one&quot;,foreignKey = &quot;u_id&quot;,action=&quot;query_insert&quot;)
    private Stock stock;


 //测试数据
        final LocalUser mLocalUser  = new LocalUser();
        mLocalUser.setuId(&quot;99&quot;);
        mLocalUser.setName(&quot;测试内容&quot;);

        Stock mStock = new Stock();
        mStock.setuId(&quot;99&quot;);
        mStock.setText1(&quot;关联内容&quot;);

        mLocalUser.setStock(mStock);

// 查询结果
 public void queryData(){
            //查询出结果检查是否成功了
            userDao.startReadableDatabase();
            List&lt;LocalUser&gt;  mLocalUserList = userDao.queryList();
            userDao.closeDatabase();
            resultData.setText(&quot;查询结果为：&quot;);
            if(mLocalUserList==null || mLocalUserList.size()==0){
                resultData.append(&quot;查询结果为：0&quot;);
            }else{
                for(LocalUser localUser:mLocalUserList){
                    Stock stock = localUser.getStock();
                    resultData.append(&quot;\nlocal_user{\n_id:&quot;+localUser.get_id()+&quot;,uId:&quot;+localUser.getuId()+&quot;,name:&quot;+localUser.getName());
                    if(stock!=null){
                        resultData.append(&quot;\n,stock{_id:&quot;+stock.get_id()+&quot;,uId:&quot;+stock.getuId()+&quot;,text1:&quot;+stock.getText1()+&quot;}&quot;);
                    }


                    resultData.append(&quot;\n}&quot;);

                    resultData.append(&quot;\n-----------------------&quot;);
                }
            }
     }
</code></pre><blockquote>
<h2 id="-h1-id-1401-1-h1-"><h1 id="1401">1. 两个表里对象的一对多关联</h1></h2>
<h2 id="-14-"><a href="#14">返回目录</a></h2>
</blockquote>
<pre><code>// 包含List的存储，指定外键
    @Relations(name=&quot;stocks&quot;,type=&quot;one2many&quot;,foreignKey = &quot;u_id&quot;,action=&quot;query_insert&quot;)
    private List&lt;Stock&gt; stocks;



//测试数据
        final LocalUser mLocalUser  = new LocalUser();
        mLocalUser.setuId(&quot;100&quot;);
        mLocalUser.setName(&quot;测试内容&quot;);

        final Stock mStock1 = new Stock();
        mStock1.setuId(&quot;100&quot;);
        mStock1.setText1(&quot;关联内容1&quot;);

        final Stock mStock2 = new Stock();
        mStock2.setuId(&quot;100&quot;);
        mStock2.setText1(&quot;关联内容2&quot;);

        List&lt;Stock&gt; stocks = new ArrayList&lt;Stock&gt;();

        stocks.add(mStock1);
        stocks.add(mStock2);

        mLocalUser.setStocks(stocks);
</code></pre><blockquote>
<h2 id="-h1-id-1501-1-andbase-h1-"><h1 id="1501">1. 数据库演示andbase的对象化存储</h1></h2>
<h2 id="-15-"><a href="#15">返回目录</a></h2>
</blockquote>
<pre><code>//创建一个HeaderView用于向数据库中增加一条数据
        View headerView = mInflater.inflate(R.layout.db_list_header,null);
        //加到ListView的顶部
        mListView.addHeaderView(headerView);

/**
     * 
     * 描述：根据ID查询数据
     * @param id
     * @return
     */
    public void queryDataById(int id){

        //条件
        AbStorageQuery mAbStorageQuery = new AbStorageQuery();
        mAbStorageQuery.equals(&quot;_id&quot;, String.valueOf(id));

        //无sql存储的查询
        mAbSqliteStorage.findData(mAbStorageQuery, userDao, new AbDataSelectListener(){

            @Override
            public void onFailure(int errorCode, String errorMessage) {
                AbToastUtil.showToast(DBObjectActivity.this,errorMessage);
            }

            @Override
            public void onSuccess(List&lt;?&gt; paramList) {
                if(paramList!=null &amp;&amp; paramList.size()&gt;0){
                    LocalUser u = (LocalUser)paramList.get(0);
                    AbToastUtil.showToast(DBObjectActivity.this,&quot;结果：_id:&quot;+u.get_id()+&quot;,name:&quot;+u.getName());
                }
            }

        });

    }

    /**
     * 
     * 描述：删除数据
     * @param id
     */
    public void delData(int id){

        //条件
        AbStorageQuery mAbStorageQuery = new AbStorageQuery();
        mAbStorageQuery.equals(&quot;_id&quot;, String.valueOf(id));

        //无sql存储的删除
        mAbSqliteStorage.deleteData(mAbStorageQuery, userDao, new AbDataDeleteListener(){

            @Override
            public void onSuccess(int rows) {
                queryData();
            }

            @Override
            public void onFailure(int errorCode, String errorMessage) {
                AbToastUtil.showToast(DBObjectActivity.this,errorMessage);
            }

        });

    }



/**
     * 更新数据
     * 描述：TODO
     * @param u
     */
    public void updateData(LocalUser u){

        //无sql存储的更新
        mAbSqliteStorage.updateData(u, userDao, new AbDataUpdateListener(){

            @Override
            public void onFailure(int errorCode, String errorMessage) {
                AbToastUtil.showToast(DBObjectActivity.this,errorMessage);
            }

            @Override
            public void onSuccess(int rows) {
                queryData();
            }

        });


    }
</code></pre><blockquote>
<h2 id="-h1-id-5801-1-ioc-view-h1-"><h1 id="5801">1. IOC适配View  注解绑定</h1></h2>
<h2 id="-58-"><a href="#58">返回目录</a></h2>
</blockquote>
<pre><code>@AbIocView(id = R.id.mBtn,click=&quot;btnClick&quot;)
    Button button;

    @AbIocView(id = R.id.mText)
    TextView mTextView;


  public void btnClick(View v){
        mTextView.setText(&quot;我变了&quot;);
    }
</code></pre><blockquote>
<h2 id="-h1-id-7201-1-http-h1-"><h1 id="7201">1. Http框架</h1></h2>
<h2 id="-72-"><a href="#72">返回目录</a></h2>
</blockquote>
<pre><code>  //获取Http工具类
        mAbHttpUtil = AbHttpUtil.getInstance(this);
        mAbHttpUtil.setTimeout(10000);
        //get请求
        getBtn.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {

                // 一个url地址
                //String urlString = &quot;http://www.amsoft.cn/rss.php&quot;; 
                String urlString = &quot;http://211.149.169.221:8080/umijoyappsvr/common/findDistrict.do&quot;; 
                mAbHttpUtil.get(urlString, new AbStringHttpResponseListener() {

                    //获取数据成功会调用这里
                    @Override
                    public void onSuccess(int statusCode, String content) {
                        Log.d(TAG, &quot;onSuccess&quot;);

                        AbDialogUtil.showAlertDialog(HttpActivity.this,&quot;返回结果&quot;,content.trim(),new AbDialogOnClickListener(){

                            @Override
                            public void onNegativeClick() {
                                // TODO Auto-generated method stub

                            }

                            @Override
                            public void onPositiveClick() {
                                // TODO Auto-generated method stub

                            }


                        });

                    }


                    // 失败，调用
                    @Override
                    public void onFailure(int statusCode, String content,
                            Throwable error) {

                        Log.d(TAG, &quot;onFailure&quot;);
                        AbToastUtil.showToast(HttpActivity.this,error.getMessage());
                    }

                    // 开始执行前
                    @Override
                    public void onStart() {
                        Log.d(TAG, &quot;onStart&quot;);
                        //显示进度框
                        AbDialogUtil.showProgressDialog(HttpActivity.this,0,&quot;正在查询...&quot;);
                    }


                    // 完成后调用，失败，成功
                    @Override
                    public void onFinish() { 
                        Log.d(TAG, &quot;onFinish&quot;);
                        //移除进度框
                        AbDialogUtil.removeDialog(HttpActivity.this);
                    };

                });

            }
        });



 //post请求
        postBtn.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {

                String url = &quot;http://210.56.209.87:90/Interface/AppNews.ashx&quot;;
                // 绑定参数
                AbRequestParams params = new AbRequestParams(); 
                params.put(&quot;U_Id&quot;, &quot;42&quot;);
               /* params.put(&quot;param2&quot;, &quot;2&quot;);
                params.put(&quot;param3&quot;, &quot;10&quot;);*/
                mAbHttpUtil.post(url,params, new AbStringHttpResponseListener() {

                    // 获取数据成功会调用这里
                    @Override
                    public void onSuccess(int statusCode, String content) {
                        Log.d(TAG, &quot;onSuccess&quot;);
                        AbDialogUtil.showAlertDialog(HttpActivity.this,&quot;返回结果&quot;,content,new AbDialogOnClickListener(){

                            @Override
                            public void onPositiveClick() {
                                // TODO Auto-generated method stub

                            }

                            @Override
                            public void onNegativeClick() {
                                // TODO Auto-generated method stub

                            }

                        });
                    };

                    // 开始执行前
                    @Override
                    public void onStart() {
                        Log.d(TAG, &quot;onStart&quot;);
                        //显示进度框
                        AbDialogUtil.showProgressDialog(HttpActivity.this,0,&quot;正在查询...&quot;);
                    }

                    // 失败，调用
                    @Override
                    public void onFailure(int statusCode, String content,
                            Throwable error) {
                        AbToastUtil.showToast(HttpActivity.this,error.getMessage());
                    }

                    // 完成后调用，失败，成功
                    @Override
                    public void onFinish() { 
                        Log.d(TAG, &quot;onFinish&quot;);
                        //移除进度框
                        AbDialogUtil.removeDialog(HttpActivity.this);
                    };

                });
            }
        });


//字节数组下载  可能返回的是一个图片
        byteBtn.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {

                String url = &quot;https://timg01.bdimg.com/timg?pacompress&amp;imgtype=1&amp;sec=1439619614&amp;autorotate=1&amp;di=e2148c26123235aa7c5e07cd5d369e65&amp;quality=90&amp;size=b870_10000&amp;src=http%3A%2F%2Fbos.nj.bpc.baidu.com%2Fv1%2Fmediaspot%2F76ec2b982287bcb6244a8d4d551b38c9.jpeg&quot;;
                mAbHttpUtil.get(url, new AbBinaryHttpResponseListener() {

                    // 获取数据成功会调用这里
                    @Override
                    public void onSuccess(int statusCode, byte[] content) {
                        Log.d(TAG, &quot;onSuccess&quot;);
                        Bitmap bitmap = AbImageUtil.bytes2Bimap(content);
                        ImageView view = new ImageView(HttpActivity.this);
                        view.setImageBitmap(bitmap);

                        AbDialogUtil.showAlertDialog(&quot;返回结果&quot;,view,new AbDialogOnClickListener(){

                            @Override
                            public void onPositiveClick() {
                                // TODO Auto-generated method stub

                            }

                            @Override
                            public void onNegativeClick() {
                                // TODO Auto-generated method stub

                            }

                        });
                    }

                    // 开始执行前
                    @Override
                    public void onStart() {
                        Log.d(TAG, &quot;onStart&quot;);
                        //显示进度框
                        AbDialogUtil.showProgressDialog(HttpActivity.this,0,&quot;正在查询...&quot;);
                    }

                    // 失败，调用
                    @Override
                    public void onFailure(int statusCode, String content,
                            Throwable error) {
                        AbToastUtil.showToast(HttpActivity.this,error.getMessage());
                    }

                    // 完成后调用，失败，成功
                    @Override
                    public void onFinish() { 
                        Log.d(TAG, &quot;onFinish&quot;);
                        //移除进度框
                        AbDialogUtil.removeDialog(HttpActivity.this);
                    };

                });
            }
        });


 //文件下载
        fileDownBtn.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {

                String url = &quot;https://timg01.bdimg.com/timg?pacompress&amp;imgtype=1&amp;sec=1439619614&amp;autorotate=1&amp;di=e2148c26123235aa7c5e07cd5d369e65&amp;quality=90&amp;size=b870_10000&amp;src=http%3A%2F%2Fbos.nj.bpc.baidu.com%2Fv1%2Fmediaspot%2F76ec2b982287bcb6244a8d4d551b38c9.jpeg&quot;;

                mAbHttpUtil.get(url, new AbFileHttpResponseListener(url) {


                    // 获取数据成功会调用这里
                    @Override
                    public void onSuccess(int statusCode, File file) {
                        Log.d(TAG, &quot;onSuccess&quot;);
                        Bitmap bitmap = AbFileUtil.getBitmapFromSD(file);
                        ImageView view = new ImageView(HttpActivity.this);
                        view.setImageBitmap(bitmap);

                        AbDialogUtil.showAlertDialog(&quot;返回结果&quot;,view,new AbDialogOnClickListener(){

                            @Override
                            public void onPositiveClick() {
                                // TODO Auto-generated method stub

                            }

                            @Override
                            public void onNegativeClick() {
                                // TODO Auto-generated method stub

                            }


                        });
                    }

                    // 开始执行前
                    @Override
                    public void onStart() {
                        Log.d(TAG, &quot;onStart&quot;);
                        //打开进度框
                        View v = LayoutInflater.from(HttpActivity.this).inflate(R.layout.progress_bar_horizontal, null, false);
                        mAbProgressBar = (AbHorizontalProgressBar) v.findViewById(R.id.horizontalProgressBar);
                        numberText = (TextView) v.findViewById(R.id.numberText);
                        maxText = (TextView) v.findViewById(R.id.maxText);

                        maxText.setText(progress+&quot;/&quot;+String.valueOf(max));
                        mAbProgressBar.setMax(max);
                        mAbProgressBar.setProgress(progress);

                        mAlertDialog = AbDialogUtil.showAlertDialog(&quot;正在下载&quot;,v);
                    }

                    // 失败，调用
                    @Override
                    public void onFailure(int statusCode, String content,
                            Throwable error) {
                        Log.d(TAG, &quot;onFailure&quot;);
                        AbToastUtil.showToast(HttpActivity.this,error.getMessage());
                    }

                    // 下载进度
                    @Override
                    public void onProgress(int bytesWritten, int totalSize) {
                        maxText.setText(bytesWritten/(totalSize/max)+&quot;/&quot;+max);
                        mAbProgressBar.setProgress(bytesWritten/(totalSize/max));
                    }

                    // 完成后调用，失败，成功
                    public void onFinish() { 
                        //下载完成取消进度框
                        if(mAlertDialog!=null){
                            mAlertDialog.dismiss();
                            mAlertDialog  = null;
                        }

                        Log.d(TAG, &quot;onFinish&quot;);
                    };

                });
            }
        });



 //文件上传
        fileUploadBtn.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                //已经在后台上传
                if(mAlertDialog!=null){
                    mAlertDialog.show(getFragmentManager(), &quot;dialog&quot;);
                    return;
                }
                String url = &quot;http://210.56.209.87:90/Interface/doReceiveMessage.ashx&quot;;

                AbRequestParams params = new AbRequestParams(); 

                try {
                    //多文件上传添加多个即可
                    File pathRoot = Environment.getExternalStorageDirectory();
                    String path = pathRoot.getAbsolutePath();
                    params.put(&quot;data1&quot;,URLEncoder.encode(&quot;中文的处理&quot;,HTTP.UTF_8));
                    params.put(&quot;data2&quot;,&quot;100&quot;);
                    //参数随便加，在sd卡根目录放图片
                    File file1 = new File(path+&quot;/1.jpg&quot;);
                    File file2 = new File(path+&quot;/1.txt&quot;);
                    params.put(file1.getName(),file1);
                    params.put(file2.getName(),file2);

                    //只支持最多2个文件域，因为会产生流中断的异常，所以你需要传递更多，请分次数上传
                    //File file3 = new File(path+&quot;/3.log&quot;);
                    //File file4 = new File(path+&quot;/1.jpg&quot;);
                    //params.put(file3.getName(),file3);
                    //params.put(file4.getName(),file4);
                } catch (Exception e) {
                    e.printStackTrace();
                }

                mAbHttpUtil.post(url, params, new AbStringHttpResponseListener() {


                    @Override
                    public void onSuccess(int statusCode, String content) {
                        AbToastUtil.showToast(HttpActivity.this,&quot;onSuccess&quot;);
                    }

                    // 开始执行前
                    @Override
                    public void onStart() {
                        Log.d(TAG, &quot;onStart&quot;);
                        //打开进度框
                        View v = LayoutInflater.from(HttpActivity.this).inflate(R.layout.progress_bar_horizontal, null, false);
                        mAbProgressBar = (AbHorizontalProgressBar) v.findViewById(R.id.horizontalProgressBar);
                        numberText = (TextView) v.findViewById(R.id.numberText);
                        maxText = (TextView) v.findViewById(R.id.maxText);

                        maxText.setText(progress+&quot;/&quot;+String.valueOf(max));
                        mAbProgressBar.setMax(max);
                        mAbProgressBar.setProgress(progress);

                        mAlertDialog = AbDialogUtil.showAlertDialog(&quot;正在上传&quot;,v);
                    }

                    @Override
                    public void onFailure(int statusCode, String content,
                            Throwable error) {
                        AbToastUtil.showToast(HttpActivity.this,error.getMessage());
                    }

                    // 进度
                    @Override
                    public void onProgress(int bytesWritten, int totalSize) {
                        maxText.setText(bytesWritten/(totalSize/max)+&quot;/&quot;+max);
                        mAbProgressBar.setProgress(bytesWritten/(totalSize/max));
                    }

                    // 完成后调用，失败，成功，都要调用
                    public void onFinish() { 
                        Log.d(TAG, &quot;onFinish&quot;);
                        //下载完成取消进度框
                        if(mAlertDialog!=null){
                            //mAlertDialog.dismiss();
                           // mAlertDialog  = null;
                        }
                    };


                });
            }
        });
</code></pre><blockquote>
<h2 id="-h1-id-9301-1-h1-"><h1 id="9301">1. 适合大量频繁快速响应的请求</h1></h2>
<h2 id="-93-"><a href="#93">返回目录</a></h2>
</blockquote>
<pre><code>private RequestQueue mQueue = null;
    private Response.Listener&lt;String&gt; mListener = new Response.Listener&lt;String&gt;() {
        @Override
        public void onResponse(String response) {
            AbDialogUtil.showAlertDialog(HttpMiniActivity.this,&quot;返回结果&quot;,response.trim(),new AbDialogOnClickListener(){

                @Override
                public void onNegativeClick() {
                }

                @Override
                public void onPositiveClick() {
                }
            });
        }
    };

    private Response.ErrorListener mErrorListener = new Response.ErrorListener() {
        @Override
        public void onErrorResponse(VolleyError error) {
            AbToastUtil.showToast(HttpMiniActivity.this,error.getMessage());
        }
    };


mQueue = Volley.newRequestQueue(this);  

        // get请求
        getBtn.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {

                // 一个url地址
                String urlGet = &quot;http://blog.csdn.net/shineflowers/article/details/44176549&quot;;
                StringRequest requestGet = new StringRequest(urlGet,mListener,mErrorListener);

                mQueue.add(requestGet);

                String urlPost = &quot;http://www.baidu.com&quot;;

                StringRequest requestPost = new StringRequest(Method.POST, urlPost, mListener,mErrorListener) {
                    @Override
                    protected Map&lt;String, String&gt; getParams() throws AuthFailureError {
                        Map&lt;String, String&gt; map = new HashMap&lt;String, String&gt;();
                        map.put(&quot;params1&quot;, &quot;value1&quot;);
                        map.put(&quot;params2&quot;, &quot;value2&quot;);
                        return map;
                    }
                };

                mQueue.add(requestPost);

            }
        });



@Override
    public void finish() {
        mQueue.cancelAll(new RequestFilter(){

            @Override
            public boolean apply(Request&lt;?&gt; request) {
                //所有
                return true;
            }

        });
        super.finish();
    }
</code></pre><blockquote>
<h2 id="-h1-id-1701-1-h1-"><h1 id="1701">1. 异步的使用参照</h1></h2>
<h2 id="-17-"><a href="#17">返回目录</a></h2>
</blockquote>
<pre><code>//单个线程
        threadBtn.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View arg0) {
                //显示进度框
                AbDialogUtil.showProgressDialog(ThreadControlActivity.this,R.drawable.progress_circular,&quot;正在查询...&quot;);
                AbTask mAbTask = new AbTask();
                //定义异步执行的对象
                final AbTaskItem item = new AbTaskItem();
                item.setListener(new AbTaskListener() {

                    @Override
                    public void update() {
                        AbDialogUtil.removeDialog(ThreadControlActivity.this);
                        AbToastUtil.showToast(ThreadControlActivity.this,&quot;执行完成&quot;);
                    }

                    @Override
                    public void get() {
                           try {
                               AbToastUtil.showToastInThread(ThreadControlActivity.this,&quot;开始执行&quot;);
                               Thread.sleep(3000);
                               //下面写要执行的代码，如下载数据  完成耗时的任务
                           } catch (Exception e) {
                           }
                  };
                });
                //开始执行
                mAbTask.execute(item);
            }

        });


 //线程队列
        final AbTaskQueue mAbTaskQueue = AbTaskQueue.getInstance();;
        queueBtn.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View arg0) {
                //显示进度框
                AbDialogUtil.showProgressDialog(ThreadControlActivity.this,R.drawable.progress_circular,&quot;正在查询...&quot;);
                //获取队列
                //定义异步执行的对象
                AbTaskItem item1 = new AbTaskItem();
                item1.setListener(new AbTaskObjectListener() {


                    @SuppressWarnings(&quot;unchecked&quot;)
                    @Override
                    public String getObject() {
                        String msg1 = &quot;amsoft&quot;;
                        AbToastUtil.showToastInThread(ThreadControlActivity.this,&quot;开始执行1,&quot;+msg1);
                           try {
                            Thread.sleep(2000);
                        } catch (Exception e) {
                        }
                           //下面写要执行的代码，如下载数据
                        return msg1;
                    }

                    @Override
                    public &lt;T&gt; void update(T obj) {
                        AbToastUtil.showToast(ThreadControlActivity.this,&quot;执行完成1,&quot;+(String)obj);
                    }

                });

                AbTaskItem item2 = new AbTaskItem();
                item2.setListener(new AbTaskListener() {

                    @Override
                    public void update() {
                        AbToastUtil.showToast(ThreadControlActivity.this,&quot;执行完成2&quot;);
                        AbDialogUtil.removeDialog(ThreadControlActivity.this);
                    }

                    @Override
                    public void get() {
                           try {
                               String msg1 = &quot;amsoft&quot;;
                               Thread.sleep(2000);
                               AbToastUtil.showToastInThread(ThreadControlActivity.this,&quot;开始执行2&quot;);
                               //下面写要执行的代码，如下载数据
                           } catch (Exception e) {
                           }
                  };
                });

                //开始执行
                mAbTaskQueue.execute(item1);
                mAbTaskQueue.execute(item2);

                //强制停止
                //mAbTaskQueue.cancel(true);

                //强制停止前面的请求
                //mAbTaskQueue.execute(item2,true);
            }

        });


        //线程池
        poolBtn.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View arg0) {
                //显示进度框
                AbDialogUtil.showProgressDialog(ThreadControlActivity.this,R.drawable.progress_circular,&quot;正在查询...&quot;);
                AbTaskPool mAbTaskPool = AbTaskPool.getInstance();
                //定义异步执行的对象
                final AbTaskItem item = new AbTaskItem();
                item.setListener(new AbTaskListener() {

                    @Override
                    public void update() {
                        AbDialogUtil.removeDialog(ThreadControlActivity.this);
                        AbToastUtil.showToast(ThreadControlActivity.this,&quot;执行完成&quot;);
                    }

                    @Override
                    public void get() {
                           try {
                               AbToastUtil.showToastInThread(ThreadControlActivity.this,&quot;开始执行&quot;);
                               Thread.sleep(1000);
                               //下面写要执行的代码，如下载数据
                           } catch (Exception e) {
                           }
                  };
                });
                //开始执行
                mAbTaskPool.execute(item);
            }

        });

        //异步任务(void)
        taskBtn1.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View arg0) {
                AbDialogUtil.showProgressDialog(ThreadControlActivity.this,R.drawable.progress_circular,&quot;正在查询...&quot;);
                AbTask task = new AbTask();
                //定义异步执行的对象
                final AbTaskItem item = new AbTaskItem();
                item.setListener(new AbTaskListener() {

                    @Override
                    public void update() {
                        AbDialogUtil.removeDialog(ThreadControlActivity.this);
                        AbToastUtil.showToast(ThreadControlActivity.this,&quot;执行完成&quot;);
                    }

                    @Override
                    public void get() {
                           try {
                               AbToastUtil.showToastInThread(ThreadControlActivity.this,&quot;开始执行&quot;);
                               Thread.sleep(3000);
                               //下面写要执行的代码，如下载数据
                           } catch (Exception e) {
                           }
                  };
                });
                task.execute(item);
            }

        });

        //异步任务(对象)
        taskBtn2.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View arg0) {
                AbDialogUtil.showProgressDialog(ThreadControlActivity.this,R.drawable.progress_circular,&quot;正在查询...&quot;);
                //执行任务
                loadObjectDataTask();
            }

        });


public void loadObjectDataTask(){
        AbTask task = new AbTask();
        final AbTaskItem item = new AbTaskItem();
        item.setListener(new AbTaskObjectListener(){

            @Override
            public &lt;T&gt; void update(T entity) {
                AbDialogUtil.removeDialog(ThreadControlActivity.this);
                AbToastUtil.showToast(ThreadControlActivity.this,(String)entity);
                Log.d(&quot;TAG&quot;, &quot;执行完成:&quot;+(String)entity);
            }

            @SuppressWarnings(&quot;unchecked&quot;)
            @Override
            public String getObject() {
                String result = null;
                try {
                    Thread.sleep(3000);
                    result = &quot;hello andbase&quot;;
                } catch (Exception e) {
                    e.printStackTrace();
                }
                return result;
            }

        });

        task.execute(item);

        //task.cancel(mayInterruptIfRunning)
    }
</code></pre><blockquote>
<h2 id="-h1-id-0501-1-h1-"><h1 id="0501">1. 多种弹出框的用法</h1></h2>
<h2 id="-05-"><a href="#05">返回目录</a></h2>
<p><img src="http://i.imgur.com/QwhIfjx.jpg" alt=""></p>
</blockquote>
<pre><code> @AbIocView(id = R.id.button2,click=&quot;btnClick&quot;)Button button2;

case R.id.button11:
            //无按钮＋动画  特色标题，自己放view进去
            mView = mInflater.inflate(R.layout.dialog_text,null);
            AbDialogUtil.showDialog(mView,R.animator.fragment_top_enter,R.animator.fragment_top_exit,R.animator.fragment_pop_top_enter,R.animator.fragment_pop_top_exit);
            break;
        case R.id.button12:
            //按钮＋列表
            mView = mInflater.inflate(R.layout.dialog_button_listview,null);
            AbDialogUtil.showDialog(mView,R.animator.fragment_top_enter,R.animator.fragment_top_exit,R.animator.fragment_pop_top_enter,R.animator.fragment_pop_top_exit);
            ListView listView = (ListView)mView.findViewById(R.id.list);
            String[] mStrings = {
                    &quot;对话框选项item1&quot;, &quot;对话框选项item2&quot;, &quot;对话框选项item3&quot;, &quot;对话框选项item4&quot;};
            listView.setAdapter(new ArrayAdapter&lt;String&gt;(this,
                       R.layout.dialog_list_item_1, mStrings));
            Button leftBtn = (Button)mView.findViewById(R.id.left_btn);
            Button rightBtn = (Button)mView.findViewById(R.id.right_btn);
            leftBtn.setOnClickListener(new OnClickListener(){

                @Override
                public void onClick(View v) {
                    AbDialogUtil.removeDialog(DialogActivity.this);
                }

            });

            rightBtn.setOnClickListener(new OnClickListener(){

                @Override
                public void onClick(View v) {
                    AbDialogUtil.removeDialog(DialogActivity.this);
                }

            });

            break;
case R.id.button13:
            //按钮＋文本
            //动画未生效
            mView = mInflater.inflate(R.layout.dialog_text_button,null);
            AbDialogUtil.showDialog(mView,R.animator.fragment_top_enter,R.animator.fragment_top_exit,R.animator.fragment_pop_top_enter,R.animator.fragment_pop_top_exit);
            Button leftBtn1 = (Button)mView.findViewById(R.id.left_btn);
            Button rightBtn1 = (Button)mView.findViewById(R.id.right_btn);
            leftBtn1.setOnClickListener(new OnClickListener(){

                @Override
                public void onClick(View v) {
                    AbDialogUtil.removeDialog(DialogActivity.this);
                }

            });

            rightBtn1.setOnClickListener(new OnClickListener(){

                @Override
                public void onClick(View v) {
                    AbDialogUtil.removeDialog(DialogActivity.this);
                }

            });
            break;
case R.id.button14:
            //上
            mView = mInflater.inflate(R.layout.dialog_custom_view,null);
            AbDialogUtil.showDialog(mView,Gravity.TOP);
            break;
        case R.id.button15:
            //中
            mView = mInflater.inflate(R.layout.dialog_custom_view,null);
            AbDialogUtil.showDialog(mView,Gravity.CENTER);
            break;
        case R.id.button16:
            //下
            mView = mInflater.inflate(R.layout.dialog_custom_view,null);
            AbDialogUtil.showDialog(mView,Gravity.BOTTOM);
            break;
        case R.id.button17:
            //全屏
            mView = mInflater.inflate(R.layout.dialog_custom_view,null);
            AbDialogUtil.showFullScreenDialog(mView);
            break;
        case R.id.button18:
            AbDialogUtil.showProgressDialog(DialogActivity.this, 0,
                    &quot;查询中...&quot;);
            //AbDialogUtil.removeDialog(DemoAbActivity.this);
            break;
        case R.id.button19:
            AbToastUtil.showToast(DialogActivity.this, &quot;Toast提示框&quot;);
            break;
</code></pre><blockquote>
<h2 id="-h1-id-0601-1-h1-"><h1 id="0601">1. 下载图片与裁剪缩放</h1></h2>
<h2 id="-06-"><a href="#06">返回目录</a></h2>
</blockquote>
<pre><code>//图片下载类
    private AbImageLoader mAbImageLoader = null;


 String imageUrl = &quot;https://timg01.bdimg.com/timg?pacompress&amp;imgtype=1&amp;sec=1439619614&amp;autorotate=1&amp;di=e2148c26123235aa7c5e07cd5d369e65&amp;quality=90&amp;size=b870_10000&amp;src=http%3A%2F%2Fbos.nj.bpc.baidu.com%2Fv1%2Fmediaspot%2F76ec2b982287bcb6244a8d4d551b38c9.jpeg&quot;;


 //图片的下载
        mAbImageLoader = AbImageLoader.newInstance(this);
        mAbImageLoader.setLoadingImage(R.drawable.image_loading);
        mAbImageLoader.setErrorImage(R.drawable.image_error);
        mAbImageLoader.setEmptyImage(R.drawable.image_empty);




 //原图片的下载
        mAbImageLoader.setMaxWidth(0);
        mAbImageLoader.setMaxHeight(0);
        mAbImageLoader.display(scaleView,imageUrl);

        //缩放图片的下载（保持宽高比，计算缩放比例，使一个方向缩放后，另一方向不小与显示的大小的最合适比例）
        mAbImageLoader.setMaxWidth(150);
        mAbImageLoader.setMaxHeight(150);
        mAbImageLoader.display(scaleView2,imageUrl2);

        //放大图片的下载
        mAbImageLoader.setMaxWidth(180);
        mAbImageLoader.setMaxHeight(180);
        mAbImageLoader.display(scaleView3,imageUrl3);
</code></pre><blockquote>
<h2 id="-h1-id-4201-1-h1-"><h1 id="4201">1. 下拉刷新分页</h1></h2>
<h2 id="-42-"><a href="#42">返回目录</a></h2>
</blockquote>
<pre><code>
extends AbActivity implements OnHeaderRefreshListener,OnFooterLoadListener



//获取ListView对象
        mAbPullToRefreshView = (AbPullToRefreshView)this.findViewById(R.id.mPullRefreshView);
        mTextView = (TextView)this.findViewById(R.id.mTextView);

        //设置监听器
        mAbPullToRefreshView.setOnHeaderRefreshListener(this);
        mAbPullToRefreshView.setOnFooterLoadListener(this);

        //设置进度条的样式
        mAbPullToRefreshView.getHeaderView().setHeaderProgressBarDrawable(this.getResources().getDrawable(R.drawable.progress_circular));
        mAbPullToRefreshView.getFooterView().setFooterProgressBarDrawable(this.getResources().getDrawable(R.drawable.progress_circular));

        //显示进度框
          mDialogFragment = AbDialogUtil.showLoadDialog(this, R.drawable.ic_load, &quot;查询中,请等一小会&quot;);
          mDialogFragment
          .setAbDialogOnLoadListener(new AbDialogOnLoadListener() {

              @Override
              public void onLoad() {
                  // 下载网络数据
                  refreshTask();
              }

          });



@Override
    public void onFooterLoad(AbPullToRefreshView view) {
        loadMoreTask();
    }

    @Override
    public void onHeaderRefresh(AbPullToRefreshView view) {
        refreshTask();
    }


    public void refreshTask(){
        AbTask mAbTask = new AbTask();
        final AbTaskItem item = new AbTaskItem();
        item.setListener(new AbTaskListener() {

            @Override
            public void update() {
                AbDialogUtil.removeDialog(PullToRefreshViewActivity.this);
                mTextView.setText(&quot;This is &quot;+new Random().nextInt(100));
                mAbPullToRefreshView.onHeaderRefreshFinish();
            }

            @Override
            public void get() {
                try {
                    Thread.sleep(1000);
                } catch (Exception e) {
                }
          };
        });

        mAbTask.execute(item);
    }

    public void loadMoreTask(){
        AbTask mAbTask = new AbTask();
        final AbTaskItem item = new AbTaskItem();
        item.setListener(new AbTaskListener() {

            @Override
            public void update() {
                AbDialogUtil.removeDialog(PullToRefreshViewActivity.this);
                mTextView.append(&quot;+&quot;+new Random().nextInt(100));
                mAbPullToRefreshView.onFooterLoadFinish();
            }

            @Override
            public void get() {
                try {
                    Thread.sleep(1000);
                } catch (Exception e) {
                }
          };
        });

        mAbTask.execute(item);
    }
</code></pre><blockquote>
<h2 id="-h1-id-2501-1-h1-"><h1 id="2501">1. 下拉刷新上滑加载分页</h1></h2>
<h2 id="-25-"><a href="#25">返回目录</a></h2>
</blockquote>
<pre><code>下拉刷新，上滑加载页面，分页加载。
</code></pre><blockquote>
<h2 id="-h1-id-4301-1-h1-"><h1 id="4301">1. 运用集成的方法实现访问网络并把字符串解析成对象</h1></h2>
<h2 id="-43-"><a href="#43">返回目录</a></h2>
</blockquote>
<pre><code>public void refreshTask() {
        currentPage = 1;
        String url = &quot;http://www.duitang.com/album/1733789/masn/p/&quot;
                + currentPage + &quot;/24/&quot;;
        mAbHttpUtil.get(url, new AbStringHttpResponseListener() {


            @Override
            public void onStart() {
            }

            @Override
            public void onSuccess(int statusCode, String content) {
                List&lt;ImageInfo&gt; mNewImageList = parseJSON(content);
                mImageList.clear();
                if (mNewImageList != null &amp;&amp; mNewImageList.size() &gt; 0) {
                    mImageList.addAll(mNewImageList);
                    myListViewAdapter.notifyDataSetChanged();
                }
                mAbPullToRefreshView.onHeaderRefreshFinish();
            }

            @Override
            public void onFailure(int statusCode, String content,
                    Throwable error) {
                AbToastUtil.showToast(PullToRefreshMultiColumnListActivity.this,error.getMessage());
            }

            public void onFinish() {
            };

        });

    }

    public void loadMoreTask() {
        currentPage++;
        String url = &quot;http://www.duitang.com/album/1733789/masn/p/&quot;
                + currentPage + &quot;/24/&quot;;
        mAbHttpUtil.get(url, new AbStringHttpResponseListener() {

            @Override
            public void onStart() {
            }

            @Override
            public void onSuccess(int statusCode, String content) {
                List&lt;ImageInfo&gt; mNewImageList = parseJSON(content);

                if (mNewImageList != null &amp;&amp; mNewImageList.size() &gt; 0) {
                    mImageList.addAll(mNewImageList);
                    myListViewAdapter.notifyDataSetChanged();
                }
                mAbPullToRefreshView.onFooterLoadFinish();
            }

            @Override
            public void onFailure(int statusCode, String content,
                    Throwable error) {
                AbToastUtil.showToast(PullToRefreshMultiColumnListActivity.this,error.getMessage());
            }

            public void onFinish() {
            };

        });
    }


    /**
     * 
     * 描述：数据来源
     * 
     * @param json
     * @return
     * @throws
     */
    public List&lt;ImageInfo&gt; parseJSON(String json) {
        List&lt;ImageInfo&gt; mImageList = new ArrayList&lt;ImageInfo&gt;();
        try {
            if (null != json) {
                JSONObject newsObject = new JSONObject(json);
                JSONObject jsonObject = newsObject.getJSONObject(&quot;data&quot;);
                JSONArray blogsJson = jsonObject.getJSONArray(&quot;blogs&quot;);
                ImageInfo imageInfo = null;
                for (int i = 0; i &lt; blogsJson.length(); i++) {
                    imageInfo = new ImageInfo();
                    JSONObject newsInfoLeftObject = blogsJson.getJSONObject(i);
                    imageInfo.setUrl(newsInfoLeftObject.isNull(&quot;isrc&quot;) ? &quot;&quot;
                            : newsInfoLeftObject.getString(&quot;isrc&quot;));
                    imageInfo.setWidth(newsInfoLeftObject.getInt(&quot;iwd&quot;));
                    imageInfo.setHeight(newsInfoLeftObject.getInt(&quot;iht&quot;));
                    mImageList.add(imageInfo);
                }
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
        return mImageList;
    }
</code></pre><blockquote>
<h2 id="-h1-id-2101-1-h1-"><h1 id="2101">1. 多线程断点续传 下载器</h1></h2>
<h2 id="-21-"><a href="#21">返回目录</a></h2>
</blockquote>
<pre><code>多线程断点续传 下载器
</code></pre><blockquote>
<h2 id="-h1-id-2701-1-h1-"><h1 id="2701">1. 滑动按钮</h1></h2>
<h2 id="-27-"><a href="#27">返回目录</a></h2>
</blockquote>
<pre><code>&lt;com.ab.view.sliding.AbSlidingButton
        android:id=&quot;@+id/mSliderBtn&quot;
        android:layout_width=&quot;wrap_content&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:layout_alignParentRight=&quot;true&quot;
        android:layout_marginTop=&quot;8dip&quot;
        android:layout_marginRight=&quot;10dip&quot;&gt;
    &lt;/com.ab.view.sliding.AbSlidingButton&gt;

holder.itemsCheck = ((AbSlidingButton) convertView.findViewById(mTo[2])) ;

//设置开关显示所用的图片
          holder.itemsCheck.setImageResource(R.drawable.btn_bottom,R.drawable.btn_frame,R.drawable.btn_mask, R.drawable.btn_unpressed,R.drawable.btn_pressed);
          //holder.itemsCheck.setFocusable(false);
          //设置开关的默认状态    true开启状态
          //holder.itemsCheck.setToggleState(true);

          //设置开关的监听
          holder.itemsCheck.setOnCheckedChangeListener(new OnCheckedChangeListener() {

            @Override
            public void onCheckedChanged(CompoundButton arg0, boolean arg1) {
                AbToastUtil.showToast(mContext,&quot;开关变化&quot;);
            }
        });
</code></pre><p><img src="http://i.imgur.com/ZOSG5nE.jpg" alt=""></p>
<pre><code>这个是图形的布局

&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    android:layout_width=&quot;fill_parent&quot;
    android:layout_height=&quot;fill_parent&quot; &gt;

    &lt;TextView
        android:id=&quot;@+id/itemsTitle&quot;
        android:layout_width=&quot;wrap_content&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:layout_gravity=&quot;center_vertical&quot;
        android:paddingLeft=&quot;10dip&quot;
        android:paddingTop=&quot;5dip&quot;
        android:textColor=&quot;@color/gray_dark&quot;
        android:textSize=&quot;20dip&quot; /&gt;

    &lt;TextView
        android:id=&quot;@+id/itemsText&quot;
        android:layout_width=&quot;wrap_content&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:layout_below=&quot;@+id/itemsTitle&quot;
        android:gravity=&quot;left&quot;
        android:paddingBottom=&quot;2dip&quot;
        android:paddingLeft=&quot;10dip&quot;
        android:textColor=&quot;@color/gray&quot;
        android:textSize=&quot;15dip&quot; /&gt;

    &lt;com.ab.view.sliding.AbSlidingButton
        android:id=&quot;@+id/mSliderBtn&quot;
        android:layout_width=&quot;wrap_content&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:layout_alignParentRight=&quot;true&quot;
        android:layout_marginTop=&quot;8dip&quot;
        android:layout_marginRight=&quot;10dip&quot;&gt;
    &lt;/com.ab.view.sliding.AbSlidingButton&gt;

&lt;/RelativeLayout&gt;
</code></pre><blockquote>
<h2 id="-h1-id-2801-1-h1-"><h1 id="2801">1. 图片联播</h1></h2>
<h2 id="-28-"><a href="#28">返回目录</a></h2>
</blockquote>
<pre><code>&lt;com.ab.view.sliding.AbSlidingPlayView
        android:id=&quot;@+id/mAbSlidingPlayView&quot;
        android:layout_width=&quot;fill_parent&quot;
        android:layout_height=&quot;150dip&quot; &gt;
    &lt;/com.ab.view.sliding.AbSlidingPlayView&gt;


 addAllButton.setOnClickListener(new OnClickListener(){

            @Override
            public void onClick(View v) {
                mSlidingPlayView.removeAllViews();
                mSlidingPlayView.addView(mPlayView);
                mSlidingPlayView.addView(mPlayView1);
                mSlidingPlayView.addView(mPlayView2);
            }

        });

        removeButton.setOnClickListener(new OnClickListener(){

            @Override
            public void onClick(View v) {
                mSlidingPlayView.removeAllViews();
            }

        });

        startButton.setOnClickListener(new OnClickListener(){

            @Override
            public void onClick(View v) {
                mSlidingPlayView.startPlay();
            }

        });

        stopButton.setOnClickListener(new OnClickListener(){

            @Override
            public void onClick(View v) {
                mSlidingPlayView.stopPlay();
            }

        });

 mSlidingPlayView.setOnItemClickListener(new AbSlidingPlayView.AbOnItemClickListener() {

            @Override
            public void onClick(int position) {
                AbToastUtil.showToast(SlidingPlayViewActivity.this,&quot;点击&quot;+position);
            }
        });

        mSlidingPlayView.setOnPageChangeListener(new AbSlidingPlayView.AbOnChangeListener() {

            @Override
            public void onChange(int position) {
                AbToastUtil.showToast(SlidingPlayViewActivity.this,&quot;改变&quot;+position);
            }
        });
</code></pre><blockquote>
<h2 id="-h1-id-9201-1-h1-"><h1 id="9201">1. 提示框</h1></h2>
<h2 id="-92-"><a href="#92">返回目录</a></h2>
</blockquote>
<pre><code>    RelativeLayout rootView = null;
    AbPopoverView popoverView = null;

         rootView = (RelativeLayout)findViewById(R.id.rootLayout);
        popoverView = new AbPopoverView(this);
        popoverView.setBackgroundDrawable(this.getResources().getDrawable(R.drawable.popover_bg));
        popoverView.setArrowLeftDrawable(this.getResources().getDrawable(R.drawable.popover_arrow_left));
        popoverView.setArrowRightDrawable(this.getResources().getDrawable(R.drawable.popover_arrow_right));
        popoverView.setArrowDownDrawable(this.getResources().getDrawable(R.drawable.popover_arrow_down));
        popoverView.setArrowUpDrawable(this.getResources().getDrawable(R.drawable.popover_arrow_up));

        popoverView.setContentSizeForViewInPopover(new Point(300, 300));
        popoverView.setPopoverViewListener(new AbPopoverView.PopoverViewListener() {

            @Override
            public void popoverViewWillShow(AbPopoverView view) {
            }

            @Override
            public void popoverViewWillDismiss(AbPopoverView view) {
            }

            @Override
            public void popoverViewDidShow(AbPopoverView view) {
            }

            @Override
            public void popoverViewDidDismiss(AbPopoverView view) {
            }
        });


    @Override
    public void onClick(View v) {
        popoverView.setPopoverContentView(mInflater.inflate(R.layout.popover_showed_view, null));
        popoverView.showPopoverFromRectInViewGroup(rootView, AbPopoverView.getFrameForView(v), AbPopoverView.PopoverArrowDirectionAny, true);
    }
</code></pre><blockquote>
<h2 id="-h1-id-3701-1-h1-"><h1 id="3701">1.轮子选择</h1></h2>
<h2 id="-37-"><a href="#37">返回目录</a></h2>
</blockquote>
<p><img src="http://i.imgur.com/jlOCl8G.jpg" alt=""></p>
<pre><code> timeTextView1.setOnClickListener(new OnClickListener(){

            @Override
            public void onClick(View v) {
                mTimeView1 = mInflater.inflate(R.layout.choose_three, null);
                // mTimeView1这个是自定义的视图
                initWheelDate(mTimeView1,timeTextView1);
                AbDialogUtil.showDialog(mTimeView1,Gravity.BOTTOM);
            }

        });


            这个是自定义控件
                &lt;com.ab.view.wheel.AbWheelView
                android:id=&quot;@+id/wheelView3&quot;
                android:layout_width=&quot;wrap_content&quot;
                android:layout_height=&quot;fill_parent&quot;
                android:layout_marginLeft=&quot;5dip&quot;
                android:layout_weight=&quot;1&quot;
                android:background=&quot;@drawable/wheel_bg_1&quot; /&gt;


public void initWheelData1(View mDataView1){
        final AbWheelView mWheelView1 = (AbWheelView)mDataView1.findViewById(R.id.wheelView1);
        mWheelView1.setAdapter(new AbNumericWheelAdapter(40, 190));
        // 可循环滚动
        mWheelView1.setCyclic(true);
        // 添加文字
        mWheelView1.setLabel(getResources().getString(R.string.data1_unit));
        // 初始化时显示的数据
        mWheelView1.setCurrentItem(40);
        mWheelView1.setValueTextSize(35);
        mWheelView1.setLabelTextSize(35);
        mWheelView1.setLabelTextColor(0x80000000);
        mWheelView1.setCenterSelectDrawable(this.getResources().getDrawable(R.drawable.wheel_select));

        Button okBtn = (Button)mDataView1.findViewById(R.id.okBtn);
        Button cancelBtn = (Button)mDataView1.findViewById(R.id.cancelBtn);
        okBtn.setOnClickListener(new OnClickListener(){

            @Override
            public void onClick(View v) {
                AbDialogUtil.removeDialog(v.getContext());
                int index = mWheelView1.getCurrentItem();
                String val = mWheelView1.getAdapter().getItem(index);
                mDataTextView1.setText(val);
            }

        });

        cancelBtn.setOnClickListener(new OnClickListener(){

            @Override
            public void onClick(View v) {
                AbDialogUtil.removeDialog(v.getContext());
            }

        });
    }
</code></pre><pre><code>以下是图形的xml文件
&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;ScrollView xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    android:layout_width=&quot;match_parent&quot;
    android:layout_height=&quot;match_parent&quot;
    android:background=&quot;@color/gray_white&quot; &gt;

    &lt;LinearLayout
        android:layout_width=&quot;fill_parent&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:orientation=&quot;vertical&quot; &gt;

        &lt;include
            android:layout_width=&quot;match_parent&quot;
            android:layout_height=&quot;wrap_content&quot;
            layout=&quot;@layout/space_view_title&quot; /&gt;

        &lt;LinearLayout
            android:id=&quot;@+id/layout01&quot;
            android:layout_width=&quot;fill_parent&quot;
            android:layout_height=&quot;wrap_content&quot;
            android:layout_marginLeft=&quot;10dip&quot;
            android:layout_marginRight=&quot;10dip&quot;
            android:layout_marginTop=&quot;10dip&quot;
            android:background=&quot;@drawable/edit_text_n&quot;
            android:orientation=&quot;vertical&quot; &gt;

            &lt;RelativeLayout
                android:layout_width=&quot;fill_parent&quot;
                android:layout_height=&quot;wrap_content&quot;
                android:orientation=&quot;vertical&quot; &gt;

                &lt;TextView
                    android:layout_width=&quot;wrap_content&quot;
                    android:layout_height=&quot;wrap_content&quot;
                    android:hint=&quot;@string/date_picker&quot;
                    android:paddingBottom=&quot;8dip&quot;
                    android:paddingLeft=&quot;5dip&quot;
                    android:paddingTop=&quot;10dip&quot;
                    android:textColor=&quot;@color/gray&quot;
                    android:textSize=&quot;18sp&quot; /&gt;

                &lt;TextView
                    android:id=&quot;@+id/measureTimeText1&quot;
                    android:layout_width=&quot;fill_parent&quot;
                    android:layout_height=&quot;45dip&quot;
                    android:background=&quot;@color/transparent&quot;
                    android:clickable=&quot;true&quot;
                    android:gravity=&quot;center_vertical|right&quot;
                    android:paddingRight=&quot;10dip&quot;
                    android:singleLine=&quot;true&quot;
                    android:textColor=&quot;@color/gray&quot;
                    android:textSize=&quot;18sp&quot; /&gt;
            &lt;/RelativeLayout&gt;
            &lt;!-- 这个是分界线 --&gt;
            &lt;View
                android:layout_width=&quot;match_parent&quot;
                android:layout_height=&quot;1dip&quot;
                android:background=&quot;@drawable/list_divider&quot;
                android:focusable=&quot;true&quot;
                android:focusableInTouchMode=&quot;true&quot; /&gt;

            &lt;RelativeLayout
                android:layout_width=&quot;fill_parent&quot;
                android:layout_height=&quot;wrap_content&quot;
                android:orientation=&quot;vertical&quot; &gt;

                &lt;TextView
                    android:layout_width=&quot;wrap_content&quot;
                    android:layout_height=&quot;wrap_content&quot;
                    android:hint=&quot;@string/time_picker1&quot;
                    android:paddingBottom=&quot;8dip&quot;
                    android:paddingLeft=&quot;5dip&quot;
                    android:paddingTop=&quot;10dip&quot;
                    android:textColor=&quot;@color/gray&quot;
                    android:textSize=&quot;18sp&quot; /&gt;

                &lt;TextView
                    android:id=&quot;@+id/measureTimeText2&quot;
                    android:layout_width=&quot;fill_parent&quot;
                    android:layout_height=&quot;45dip&quot;
                    android:background=&quot;@color/transparent&quot;
                    android:clickable=&quot;true&quot;
                    android:gravity=&quot;center_vertical|right&quot;
                    android:paddingRight=&quot;10dip&quot;
                    android:singleLine=&quot;true&quot;
                    android:textColor=&quot;@color/gray&quot;
                    android:textSize=&quot;18sp&quot; /&gt;
            &lt;/RelativeLayout&gt;

            &lt;View
                android:layout_width=&quot;match_parent&quot;
                android:layout_height=&quot;1dip&quot;
                android:background=&quot;@drawable/list_divider&quot;
                android:focusable=&quot;true&quot;
                android:focusableInTouchMode=&quot;true&quot; /&gt;

            &lt;RelativeLayout
                android:layout_width=&quot;fill_parent&quot;
                android:layout_height=&quot;wrap_content&quot;
                android:orientation=&quot;vertical&quot; &gt;

                &lt;TextView
                    android:layout_width=&quot;wrap_content&quot;
                    android:layout_height=&quot;wrap_content&quot;
                    android:hint=&quot;@string/time_picker2&quot;
                    android:paddingBottom=&quot;8dip&quot;
                    android:paddingLeft=&quot;5dip&quot;
                    android:paddingTop=&quot;10dip&quot;
                    android:textColor=&quot;@color/gray&quot;
                    android:textSize=&quot;18sp&quot; /&gt;

                &lt;TextView
                    android:id=&quot;@+id/measureTimeText3&quot;
                    android:layout_width=&quot;fill_parent&quot;
                    android:layout_height=&quot;45dip&quot;
                    android:background=&quot;@color/transparent&quot;
                    android:clickable=&quot;true&quot;
                    android:gravity=&quot;center_vertical|right&quot;
                    android:paddingRight=&quot;10dip&quot;
                    android:singleLine=&quot;true&quot;
                    android:textColor=&quot;@color/gray&quot;
                    android:textSize=&quot;18sp&quot; /&gt;
            &lt;/RelativeLayout&gt;
        &lt;/LinearLayout&gt;
&lt;!-- 以上是前三个选项框 --&gt;
        &lt;LinearLayout
            android:layout_width=&quot;fill_parent&quot;
            android:layout_height=&quot;wrap_content&quot;
            android:layout_marginLeft=&quot;10dip&quot;
            android:layout_marginRight=&quot;10dip&quot;
            android:layout_marginTop=&quot;10dip&quot;
            android:background=&quot;@drawable/edit_text_n&quot;
            android:orientation=&quot;vertical&quot; &gt;

            &lt;RelativeLayout
                android:layout_width=&quot;fill_parent&quot;
                android:layout_height=&quot;wrap_content&quot;
                android:orientation=&quot;vertical&quot; &gt;

                &lt;TextView
                    android:layout_width=&quot;wrap_content&quot;
                    android:layout_height=&quot;wrap_content&quot;
                    android:hint=&quot;@string/data1_desc&quot;
                    android:paddingBottom=&quot;8dip&quot;
                    android:paddingLeft=&quot;5dip&quot;
                    android:paddingTop=&quot;10dip&quot;
                    android:textColor=&quot;@color/gray_dark&quot;
                    android:textSize=&quot;18sp&quot; /&gt;

                &lt;TextView
                    android:id=&quot;@+id/dataTextView1&quot;
                    android:layout_width=&quot;fill_parent&quot;
                    android:layout_height=&quot;45dip&quot;
                    android:background=&quot;@color/transparent&quot;
                    android:clickable=&quot;true&quot;
                    android:gravity=&quot;center_vertical|right&quot;
                    android:maxLength=&quot;20&quot;
                    android:paddingRight=&quot;80dip&quot;
                    android:singleLine=&quot;true&quot;
                    android:textColor=&quot;@color/gray&quot;
                    android:textSize=&quot;18sp&quot; /&gt;

                &lt;TextView
                    android:layout_width=&quot;70dip&quot;
                    android:layout_height=&quot;45dip&quot;
                    android:layout_alignParentRight=&quot;true&quot;
                    android:drawableLeft=&quot;@drawable/line&quot;
                    android:drawablePadding=&quot;5dip&quot;
                    android:paddingBottom=&quot;8dip&quot;
                    android:paddingRight=&quot;5dip&quot;
                    android:paddingTop=&quot;10dip&quot;
                    android:text=&quot;@string/data1_unit&quot;
                    android:textColor=&quot;@color/gray&quot;
                    android:textSize=&quot;18sp&quot; /&gt;
            &lt;/RelativeLayout&gt;

        &lt;/LinearLayout&gt;
    &lt;/LinearLayout&gt;

&lt;/ScrollView&gt;
</code></pre><blockquote>
<h2 id="-h1-id-3001-1-h1-"><h1 id="3001">1.欢迎页面</h1></h2>
<h2 id="-30-"><a href="#30">返回目录</a></h2>
</blockquote>
<pre><code>    /**
     * 初始化控件
     */
    private void init() {
        initAnim();
        initPicture();
        /**
         * 界面刚开始显示的内容
         */
        mShowPicture.setImageDrawable(mPicture_1);
        mShowText.setText(&quot;图片1&quot;);
        mShowPicture.startAnimation(mFadeIn);
    }

    /**
     * 三个切换的动画
     */
    private Animation mFadeIn;
    private Animation mFadeInScale;
    private Animation mFadeOut;

    /**
     * 初始化动画
     */
    private void initAnim() {
        mFadeIn = AnimationUtils.loadAnimation(WelcomeActivity.this,R.anim.welcome_fade_in);
        mFadeIn.setDuration(1000);
        mFadeInScale = AnimationUtils.loadAnimation(WelcomeActivity.this,R.anim.welcome_fade_in_scale);
        mFadeInScale.setDuration(6000);
        mFadeOut = AnimationUtils.loadAnimation(WelcomeActivity.this,R.anim.welcome_fade_out);
        mFadeOut.setDuration(1000);
    }


    /**
     * 三个图片
     */
    private Drawable mPicture_1;
    private Drawable mPicture_2;
    private Drawable mPicture_3;
    /**
     * 初始化图片  把图片转化成对象
     */
    private void initPicture() {
        mPicture_1 = getResources().getDrawable(R.drawable.pic1);
        mPicture_2 = getResources().getDrawable(R.drawable.pic2);
        mPicture_3 = getResources().getDrawable(R.drawable.pic3);
    }


    /**
     * 监听事件
     */
    private void setListener() {
        /**
         * 动画切换原理:开始时是用第一个渐现动画,当第一个动画结束时开始第二个放大动画,当第二个动画结束时调用第三个渐隐动画,
         * 第三个动画结束时修改显示的内容并且重新调用第一个动画,从而达到循环效果
         */
        mFadeIn.setAnimationListener(new AnimationListener() {

            public void onAnimationStart(Animation animation) {

            }

            public void onAnimationRepeat(Animation animation) {

            }

            public void onAnimationEnd(Animation animation) {
                mShowPicture.startAnimation(mFadeInScale);
            }
        });
        mFadeInScale.setAnimationListener(new AnimationListener() {

            public void onAnimationStart(Animation animation) {

            }

            public void onAnimationRepeat(Animation animation) {

            }

            public void onAnimationEnd(Animation animation) {
                mShowPicture.startAnimation(mFadeOut);
            }
        });
        mFadeOut.setAnimationListener(new AnimationListener() {

            public void onAnimationStart(Animation animation) {

            }

            public void onAnimationRepeat(Animation animation) {

            }

            public void onAnimationEnd(Animation animation) {
                /**
                 * 这里其实有些写的不好,还可以采用更多的方式来判断当前显示的是第几个,从而修改数据,
                 * 我这里只是简单的采用获取当前显示的图片来进行判断。
                 */
                if (mShowPicture.getDrawable().equals(mPicture_1)) {
                    mShowText.setText(&quot;图片1&quot;);
                    mShowPicture.setImageDrawable(mPicture_2);
                } else if (mShowPicture.getDrawable().equals(mPicture_2)) {
                    mShowText.setText(&quot;图片2&quot;);
                    mShowPicture.setImageDrawable(mPicture_3);
                } else if (mShowPicture.getDrawable().equals(mPicture_3)) {
                    mShowText.setText(&quot;图片3&quot;);
                    mShowPicture.setImageDrawable(mPicture_1);
                }
                mShowPicture.startAnimation(mFadeIn);
            }
        });

    }
</code></pre><blockquote>
<h2 id="-h1-id-3901-1-h1-"><h1 id="3901">1.拍照相册选择</h1></h2>
<h2 id="-39-"><a href="#39">返回目录</a></h2>
</blockquote>
<pre><code>这些都是变量

 private GridView mGridView = null;
    private ArrayList&lt;String&gt; mPhotoList = null;
    private int selectIndex = 0;
    private int camIndex = 0;
    private View mAvatarView = null;

    /* 用来标识请求照相功能的activity */
    private static final int CAMERA_WITH_DATA = 3023;
    /* 用来标识请求gallery的activity */
    private static final int PHOTO_PICKED_WITH_DATA = 3021;
    /* 用来标识请求裁剪图片后的activity */
    private static final int CAMERA_CROP_DATA = 3022;

    /* 拍照的照片存储位置 */
    private File PHOTO_DIR = null;
    // 照相机拍照得到的图片
    private File mCurrentPhotoFile;
    private String mFileName;

    /* ProgressBar进度控制 */
    private AbHorizontalProgressBar mAbProgressBar;
    /* 最大100 */
    private int max = 100;
    private int progress = 0;
    private TextView numberText, maxText;
    private DialogFragment mAlertDialog  = null;
    private AbHttpUtil mAbHttpUtil = null;

实例化
//获取Http工具类
        mAbHttpUtil = AbHttpUtil.getInstance(this);
        uploadFile();


网络访问的方法
public void uploadFile(){
        //已经在后台上传
        if(mAlertDialog!=null){
            mAlertDialog.show(getFragmentManager(), &quot;dialog&quot;);
            return;
        }
        //String url = &quot;http://192.168.0.104:8080/demo/upload.do&quot;;
        String url = &quot;http://211.149.169.221:8080/umijoyappsvr/distribution/DistributionLogin.do&quot;;

        AbRequestParams params = new AbRequestParams();

        try {
            //多文件上传添加多个即可
           // params.put(&quot;data1&quot;, URLEncoder.encode(&quot;如果包含中文的处理方式&quot;, HTTP.UTF_8));
            params.put(&quot;phoneNum&quot;,&quot;15132146262&quot;);
            params.put(&quot;password&quot;,&quot;123456&quot;);
            //文件参数，去掉后边那个按钮 上传多个文件
           /* for(int i=0;i&lt;list.size()-1;i++){
                String path = list.get(i);
                File file = new File(path);
                params.put(file.getName(),file);
            }*/
        } catch (Exception e) {
            e.printStackTrace();
        }

        mAbHttpUtil.post(url, params, new AbStringHttpResponseListener() {


            @Override
            public void onSuccess(int statusCode, String content) {
                AbToastUtil.showToast(MainActivity.this, content);
            }

            // 开始执行前
            @Override
            public void onStart() {
                //打开进度框
                View v = LayoutInflater.from(MainActivity.this).inflate(R.layout.progress_bar_horizontal, null, false);
                mAbProgressBar = (AbHorizontalProgressBar) v.findViewById(R.id.horizontalProgressBar);
                numberText = (TextView) v.findViewById(R.id.numberText);
                maxText = (TextView) v.findViewById(R.id.maxText);

                maxText.setText(progress+&quot;/&quot;+String.valueOf(max));
                mAbProgressBar.setMax(max);
                mAbProgressBar.setProgress(progress);

                mAlertDialog = AbDialogUtil.showAlertDialog(&quot;正在上传&quot;, v);
            }

            @Override
            public void onFailure(int statusCode, String content,
                                  Throwable error) {
                AbToastUtil.showToast(MainActivity.this,error.getMessage());
            }

            // 进度
            @Override
            public void onProgress(int bytesWritten, int totalSize) {
                maxText.setText(bytesWritten/(totalSize/max)+&quot;/&quot;+max);
                mAbProgressBar.setProgress(bytesWritten/(totalSize/max));
            }

            // 完成后调用，失败，成功，都要调用
            public void onFinish() {
                //下载完成取消进度框
                if(mAlertDialog!=null){
                  /*  mAlertDialog.dismiss();
                    mAlertDialog  = null;*/
                }
            };


        });
    }
</code></pre><blockquote>
<h2 id="-h1-id-0901-1-h1-"><h1 id="0901">1.城市选择</h1></h2>
<h2 id="-09-"><a href="#09">返回目录</a></h2>
</blockquote>
<pre><code>    &lt;com.ab.view.sample.AbLetterFilterListView
        android:id=&quot;@+id/letterView&quot;
        android:layout_width=&quot;fill_parent&quot;
        android:layout_height=&quot;fill_parent&quot; &gt;

        &lt;ListView
            android:id=&quot;@+id/listView&quot;
            android:layout_width=&quot;fill_parent&quot;
            android:layout_height=&quot;fill_parent&quot;
            android:layout_gravity=&quot;center&quot;
            android:cacheColorHint=&quot;#00000000&quot;
            android:divider=&quot;@null&quot;/&gt;
    &lt;/com.ab.view.sample.AbLetterFilterListView&gt;

添加头部
private ListView mListView = null;

        // 获取ListView对象
        View headerView = LayoutInflater.from(this).inflate(R.layout.city_header, null);
        mListView = (ListView) this.findViewById(R.id.listView);
        mListView.addHeaderView(headerView);


//填充数据
    public void downTask() {
        AbLogUtil.prepareLog(CityListActivity.class);
        AbTask mAbTask = new AbTask();
        final AbTaskItem item = new AbTaskItem();
        item.setListener(new AbTaskListListener() {
            @Override
            public List&lt;?&gt; getList() {
                List&lt;City&gt; newList = null;
                try {
                    newList = filledData(getResources().getStringArray(R.array.list));
                } catch (Exception e) {
                }
                return newList;
            }

            @Override
            public void update(List&lt;?&gt; paramList) {
                list.clear();
                list.addAll((List&lt;City&gt;)paramList);
                //通知Dialog
                mDialogFragment.loadFinish();
                mCityListAdapter.notifyDataSetChanged();
            }

        });

        mAbTask.execute(item);
    }

    /**
     * 为ListView填充数据
     * @param date
     * @return
     */
    private List&lt;City&gt; filledData(String [] array){
        List&lt;City&gt; newList = new ArrayList&lt;City&gt;();
        //实例化汉字转拼音类
        AbCharacterParser    characterParser = AbCharacterParser.getInstance();

        for(int i=0; i&lt;array.length; i++){
            City city = new City();
            city.setName(array[i]);
            //汉字转换成拼音 在得到拼音的首字母的大写
            String pinyin = characterParser.getSelling(array[i]);
            String sortString = pinyin.substring(0, 1).toUpperCase();

            // 正则表达式，判断首字母是否是英文字母
            if(sortString.matches(&quot;[A-Z]&quot;)){
                city.setFirstLetter(sortString.toUpperCase());
            }else{
                city.setFirstLetter(&quot;#&quot;);
            }
            newList.add(city);
        }
        //对数据进行排列
        Collections.sort(newList);
        return newList;

    }


/**
     * 根据输入框中的值来过滤数据并更新ListView
     * @param filterStr
     */
    private void filterData(String filterStr){
        //实例化汉字转拼音类
        AbCharacterParser characterParser = AbCharacterParser.getInstance();
        List&lt;City&gt; filterDateList = new ArrayList&lt;City&gt;();
        if(!TextUtils.isEmpty(filterStr)){
            for(City city : list){
                String name = city.getName();
                //如果城市名的拼音以filterStr开头，或者城市名中包含filterStr
                if(name.indexOf(filterStr) != -1 || characterParser.getSelling(name).startsWith(filterStr)){
                    filterDateList.add(city);
                }
            }
        }

        // 根据a-z进行排序
        Collections.sort(filterDateList);
    //跟新适配器
        mCityListAdapter.updateListView(filterDateList);
    }

    /**
     * 当ListView数据发生变化时,调用此方法来更新ListView  
     * @param list  CityListAdapter中的方法
     */
    public void updateListView(List&lt;City&gt; list){
        this.list.clear();
        this.list.addAll(list);
        notifyDataSetChanged();
    }
</code></pre><blockquote>
<h2 id="-h1-id-4501-1-h1-"><h1 id="4501">1.左边的侧边栏</h1></h2>
<h2 id="-45-"><a href="#45">返回目录</a></h2>
</blockquote>
<pre><code>private SlidingMenu menu;


 //主视图的Fragment添加
        getFragmentManager()
        .beginTransaction()
        .replace(R.id.content_frame, new FragmentLoad())
        .commit();

        //SlidingMenu的配置
        menu = new SlidingMenu(this);
        menu.setMode(SlidingMenu.LEFT);
        menu.setTouchModeAbove(SlidingMenu.TOUCHMODE_FULLSCREEN);
        menu.setShadowWidthRes(R.dimen.shadow_width);
        menu.setShadowDrawable(R.drawable.shadow);
        menu.setBehindOffsetRes(R.dimen.slidingmenu_offset);
        menu.setFadeDegree(0.35f);
        menu.attachToActivity(this, SlidingMenu.SLIDING_CONTENT);

        //menu视图的Fragment添加
        menu.setMenu(R.layout.sliding_menu_menu);
        getFragmentManager()
        .beginTransaction()
        .replace(R.id.menu_frame, new FragmentLoad())
        .commit();

        mAbTitleBar.getLogoView().setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {
                if (menu.isMenuShowing()) {
                     menu.showContent();
                 } else {
                     menu.showMenu();
                 }
            }
        });


    @Override
    public void onBackPressed() {
        if (menu.isMenuShowing()) {
            menu.showContent();
        } else {
            super.onBackPressed();
        }
    }
</code></pre><blockquote>
<h2 id="-h1-id-1901-1-tab-h1-"><h1 id="1901">1.顶部切换Tab</h1></h2>
<h2 id="-19-"><a href="#19">返回目录</a></h2>
</blockquote>
<pre><code>自定义控件
 &lt;com.ab.view.sliding.AbSlidingTabView
        android:id=&quot;@+id/mAbSlidingTabView&quot;
        android:layout_width=&quot;fill_parent&quot;
        android:layout_height=&quot;fill_parent&quot; /&gt;

private AbSlidingTabView mAbSlidingTabView;    
mAbSlidingTabView = (AbSlidingTabView) findViewById(R.id.mAbSlidingTabView);

 //AbSlidingTabView2这个类包含了另外的一种效果，和AbSlidingTabView是不同的
        mAbSlidingTabView = (AbSlidingTabView) findViewById(R.id.mAbSlidingTabView);

        //如果里面的页面列表不能下载原因：
        //Fragment里面用的AbTaskQueue,由于有多个tab，顺序下载有延迟，还没下载好就被缓存了。改成用AbTaskPool，就ok了。
        //或者setOffscreenPageLimit(0)

        //缓存数量
        mAbSlidingTabView.getViewPager().setOffscreenPageLimit(5);

        //禁止滑动
        /*mAbSlidingTabView.getViewPager().setOnTouchListener(new OnTouchListener(){

            @Override
            public boolean onTouch(View v, MotionEvent event) {
                return true;
            }

        });*/

        //这个是tab栏下对应的内容部分
        FragmentLoad page1 = new FragmentLoad();
        FragmentLoad page2 = new FragmentLoad();
        FragmentLoad page3 = new FragmentLoad();
        FragmentLoad page4 = new FragmentLoad();
        FragmentLoad page5 = new FragmentLoad();
        FragmentLoad page6 = new FragmentLoad();
        FragmentLoad page7 = new FragmentLoad();
        FragmentLoad page8 = new FragmentLoad();

        List&lt;Fragment&gt; mFragments = new ArrayList&lt;Fragment&gt;();
        mFragments.add(page1);
        mFragments.add(page2);
        mFragments.add(page3);
        mFragments.add(page4);

        List&lt;String&gt; tabTexts = new ArrayList&lt;String&gt;();
        tabTexts.add(&quot;推荐&quot;);
        tabTexts.add(&quot;排行&quot;);
        tabTexts.add(&quot;游戏中心&quot;);
        tabTexts.add(&quot;专题栏目&quot;);

        //设置样式
        mAbSlidingTabView.setTabTextColor(Color.BLACK);
        mAbSlidingTabView.setTabSelectColor(Color.rgb(30, 168, 131));
        mAbSlidingTabView.setTabBackgroundResource(R.drawable.tab_bg);
        mAbSlidingTabView.setTabLayoutBackgroundResource(R.drawable.slide_top);
        //演示增加一组 4个
        mAbSlidingTabView.addItemViews(tabTexts, mFragments);

        //演示增加一个
        mAbSlidingTabView.addItemView(&quot;咖啡屋&quot;, page5);
        mAbSlidingTabView.addItemView(&quot;英雄三国&quot;, page6);
        mAbSlidingTabView.addItemView(&quot;今日新闻&quot;, page7);
        mAbSlidingTabView.addItemView(&quot;朋友圈&quot;, page8);

        mAbSlidingTabView.setTabPadding(20, 8, 20, 8);
</code></pre><blockquote>
<h2 id="-h1-id-1902-2-fragmentload-activity-h1-"><h1 id="1902">2.FragmentLoad 每一个的Activity碎片</h1></h2>
<h2 id="-19-"><a href="#19">返回目录</a></h2>
</blockquote>
<p>每一个的Activity碎片</p>
<pre><code>
package com.andbase.demo.activity;

import java.util.ArrayList;
import java.util.List;

import android.app.Activity;
import android.os.Bundle;
import android.os.Handler;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ListView;

import com.ab.fragment.AbFragment;
import com.ab.http.AbHttpListener;
import com.ab.http.AbRequestParams;
import com.ab.util.AbToastUtil;
import com.ab.view.pullview.AbPullToRefreshView;
import com.ab.view.pullview.AbPullToRefreshView.OnFooterLoadListener;
import com.ab.view.pullview.AbPullToRefreshView.OnHeaderRefreshListener;
import com.andbase.R;
import com.andbase.demo.adapter.ArticleListAdapter;
import com.andbase.demo.model.Article;
import com.andbase.global.MyApplication;
import com.andbase.web.NetworkWeb;


public class FragmentLoad extends AbFragment {

    private MyApplication application;
    private Activity mActivity = null;
    private List&lt;Article&gt; mList = null;
    private AbPullToRefreshView mAbPullToRefreshView = null;
    private ListView mListView = null;
    private int currentPage = 1;
    private ArticleListAdapter myListViewAdapter = null;
    private int total = 50;
    private int pageSize = 5;

    @Override
    public View onCreateContentView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) { 

         mActivity = this.getActivity();
         application = (MyApplication) mActivity.getApplication();

         View view = inflater.inflate(R.layout.pull_to_refresh_list, null);
         //获取ListView对象
         mAbPullToRefreshView = (AbPullToRefreshView)view.findViewById(R.id.mPullRefreshView);
         mListView = (ListView)view.findViewById(R.id.mListView);

         //设置监听器
         mAbPullToRefreshView.setOnHeaderRefreshListener(new OnHeaderRefreshListener() {

            @Override
            public void onHeaderRefresh(AbPullToRefreshView view) {
                refreshTask();
            }
        });
         mAbPullToRefreshView.setOnFooterLoadListener(new OnFooterLoadListener() {

            @Override
            public void onFooterLoad(AbPullToRefreshView view) {
                loadMoreTask();

            }
        });

         //设置进度条的样式
         mAbPullToRefreshView.getHeaderView().setHeaderProgressBarDrawable(this.getResources().getDrawable(R.drawable.progress_circular));
         mAbPullToRefreshView.getFooterView().setFooterProgressBarDrawable(this.getResources().getDrawable(R.drawable.progress_circular));

         //ListView数据
         mList = new ArrayList&lt;Article&gt;();

         //使用自定义的Adapter
         myListViewAdapter = new ArticleListAdapter(mActivity, mList);
         mListView.setAdapter(myListViewAdapter);
         //item被点击事件
         mListView.setOnItemClickListener(new OnItemClickListener(){
            @Override
            public void onItemClick(AdapterView&lt;?&gt; parent, View view,
                    int position, long id) {
            }
         });

         //加载数据必须
         this.setAbFragmentOnLoadListener(new AbFragmentOnLoadListener(){

            @Override
            public void onLoad() {
                //第一次下载数据
                refreshTask();
            }

         });

         return view;
    } 

    @Override
    public void setResource() {
        //设置加载的资源
        this.setLoadDrawable(R.drawable.ic_load);
        this.setLoadMessage(&quot;正在查询,请稍候&quot;);

        this.setRefreshDrawable(R.drawable.ic_refresh);
        this.setRefreshMessage(&quot;请求出错，请重试&quot;);
    }

    /**
     * 下载数据
     */
    public void refreshTask() {
        currentPage = 1;
        // 绑定参数
        AbRequestParams params = new AbRequestParams();
        params.put(&quot;cityCode&quot;, &quot;11&quot;);
        params.put(&quot;pageSize&quot;, String.valueOf(pageSize));
        params.put(&quot;toPageNo&quot;,String.valueOf(currentPage));
        // 下载网络数据
        NetworkWeb web = NetworkWeb.newInstance(mActivity);
        web.findLogList(params, new AbHttpListener(){

            @Override
            public void onSuccess(List&lt;?&gt; newList) {
                mList.clear();
                if(newList!=null &amp;&amp; newList.size()&gt;0){
                    mList.addAll((List&lt;Article&gt;)newList);
                    myListViewAdapter.notifyDataSetChanged();
                    newList.clear();
                   }
                mAbPullToRefreshView.onHeaderRefreshFinish();

                //模拟用，真是开发中需要直接调用run内的内容
                new Handler().postDelayed(new Runnable(){

                    @Override
                    public void run() {
                        //显示内容
                        showContentView();
                    }

                }, 3000);

            }

            @Override
            public void onFailure(String content) {
                AbToastUtil.showToast(mActivity, content);
                //显示重试的框
                showRefreshView();
            }

        });
    }

    public void loadMoreTask(){
        currentPage++;
        // 绑定参数
        AbRequestParams params = new AbRequestParams();
        params.put(&quot;cityCode&quot;, &quot;11&quot;);
        params.put(&quot;pageSize&quot;, String.valueOf(pageSize));
        params.put(&quot;toPageNo&quot;,String.valueOf(currentPage));
        // 下载网络数据
        NetworkWeb web = NetworkWeb.newInstance(this.getActivity());
        web.findLogList(params, new AbHttpListener(){

            @Override
            public void onSuccess(List&lt;?&gt; newList) {
                if(newList!=null &amp;&amp; newList.size()&gt;0){
                    mList.addAll((List&lt;Article&gt;)newList);
                    myListViewAdapter.notifyDataSetChanged();
                    newList.clear();
                   }
                mAbPullToRefreshView.onFooterLoadFinish();
            }

            @Override
            public void onFailure(String content) {

            }

        });
    }

}
</code></pre><h1 id="2001">1.底部切换Tab</h1>

<p><a href="#20">返回目录</a></p>
<pre><code> &lt;com.ab.view.sliding.AbBottomTabView
        android:id=&quot;@+id/mBottomTabView&quot;
        android:layout_width=&quot;fill_parent&quot;
        android:layout_height=&quot;fill_parent&quot; /&gt;

private AbBottomTabView mBottomTabView;
private List&lt;Drawable&gt; tabDrawables = null;


AbTitleBar mAbTitleBar = this.getTitleBar();
        mAbTitleBar.setTitleText(R.string.tab_bottom_name);
        mAbTitleBar.setLogo(R.drawable.button_selector_back);
        mAbTitleBar.setTitleBarBackground(R.drawable.top_bg);
        mAbTitleBar.setTitleTextMargin(10, 0, 0, 0);
        mAbTitleBar.setLogoLine(R.drawable.line);
        initTitleRightLayout();

        mBottomTabView = (AbBottomTabView) findViewById(R.id.mBottomTabView);

        //如果里面的页面列表不能下载原因：
        //Fragment里面用的AbTaskQueue,由于有多个tab，顺序下载有延迟，还没下载好就被缓存了。改成用AbTaskPool，就ok了。
        //或者setOffscreenPageLimit(0)

        //缓存数量
        mBottomTabView.getViewPager().setOffscreenPageLimit(5);

        //禁止滑动
        /*mBottomTabView.getViewPager().setOnTouchListener(new OnTouchListener(){

            @Override
            public boolean onTouch(View v, MotionEvent event) {
                return true;
            }

        });*/

        //mBottomTabView.setOnPageChangeListener(listener);

        FragmentLoad page1 = new FragmentLoad();
        FragmentLoad page2 = new FragmentLoad();
        FragmentRefresh page3 = new FragmentRefresh();
        FragmentLoad page4 = new FragmentLoad();

        List&lt;Fragment&gt; mFragments = new ArrayList&lt;Fragment&gt;();
        mFragments.add(page1);
        mFragments.add(page2);
        mFragments.add(page3);
        mFragments.add(page4);

        List&lt;String&gt; tabTexts = new ArrayList&lt;String&gt;();
        tabTexts.add(&quot;我的音乐&quot;);
        tabTexts.add(&quot;音乐馆&quot;);
        tabTexts.add(&quot;发现&quot;);
        tabTexts.add(&quot;更多&quot;);

        //设置样式
        mBottomTabView.setTabTextColor(Color.BLACK);
        mBottomTabView.setTabSelectColor(Color.rgb(255, 255,255));
        mBottomTabView.setTabBackgroundResource(R.drawable.tab_bg2);
        mBottomTabView.setTabLayoutBackgroundResource(R.drawable.tablayout_bg2);

        //注意图片的顺序
        tabDrawables = new ArrayList&lt;Drawable&gt;();
        tabDrawables.add(this.getResources().getDrawable(R.drawable.menu1_n));
        tabDrawables.add(this.getResources().getDrawable(R.drawable.menu1_f));
        tabDrawables.add(this.getResources().getDrawable(R.drawable.menu2_n));
        tabDrawables.add(this.getResources().getDrawable(R.drawable.menu2_f));
        tabDrawables.add(this.getResources().getDrawable(R.drawable.menu3_n));
        tabDrawables.add(this.getResources().getDrawable(R.drawable.menu3_f));
        tabDrawables.add(this.getResources().getDrawable(R.drawable.menu4_n));
        tabDrawables.add(this.getResources().getDrawable(R.drawable.menu4_f));

        //演示增加一组
        mBottomTabView.addItemViews(tabTexts,mFragments,tabDrawables);

        mBottomTabView.setTabPadding(2,10, 2, 2);
</code></pre><p>Activity碎片</p>
<pre><code>
package com.andbase.demo.activity;

import java.util.ArrayList;
import java.util.List;

import android.app.Activity;
import android.os.Bundle;
import android.os.Handler;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ListView;

import com.ab.fragment.AbFragment;
import com.ab.http.AbHttpListener;
import com.ab.http.AbRequestParams;
import com.ab.util.AbToastUtil;
import com.ab.view.pullview.AbPullToRefreshView;
import com.ab.view.pullview.AbPullToRefreshView.OnFooterLoadListener;
import com.ab.view.pullview.AbPullToRefreshView.OnHeaderRefreshListener;
import com.andbase.R;
import com.andbase.demo.adapter.ArticleListAdapter;
import com.andbase.demo.model.Article;
import com.andbase.global.MyApplication;
import com.andbase.web.NetworkWeb;


public class FragmentRefresh extends AbFragment {

    private MyApplication application;
    private Activity mActivity = null;
    private List&lt;Article&gt; mList = null;
    private AbPullToRefreshView mAbPullToRefreshView = null;
    private ListView mListView = null;
    private int currentPage = 1;
    private ArticleListAdapter myListViewAdapter = null;
    private int total = 50;
    private int pageSize = 5;

    @Override
    public View onCreateContentView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) { 

         mActivity = this.getActivity();
         application = (MyApplication) mActivity.getApplication();

         View view = inflater.inflate(R.layout.pull_to_refresh_list, null);
         //获取ListView对象
         mAbPullToRefreshView = (AbPullToRefreshView)view.findViewById(R.id.mPullRefreshView);
         mListView = (ListView)view.findViewById(R.id.mListView);

         //设置监听器
         mAbPullToRefreshView.setOnHeaderRefreshListener(new OnHeaderRefreshListener() {

            @Override
            public void onHeaderRefresh(AbPullToRefreshView view) {
                refreshTask();
            }
        });
         mAbPullToRefreshView.setOnFooterLoadListener(new OnFooterLoadListener() {

            @Override
            public void onFooterLoad(AbPullToRefreshView view) {
                loadMoreTask();

            }
        });

         //设置进度条的样式
         mAbPullToRefreshView.getHeaderView().setHeaderProgressBarDrawable(this.getResources().getDrawable(R.drawable.progress_circular));
         mAbPullToRefreshView.getFooterView().setFooterProgressBarDrawable(this.getResources().getDrawable(R.drawable.progress_circular));

         //ListView数据
         mList = new ArrayList&lt;Article&gt;();

         //使用自定义的Adapter
         myListViewAdapter = new ArticleListAdapter(mActivity, mList);
         mListView.setAdapter(myListViewAdapter);
         //item被点击事件
         mListView.setOnItemClickListener(new OnItemClickListener(){
            @Override
            public void onItemClick(AdapterView&lt;?&gt; parent, View view,
                    int position, long id) {
            }
         });

         //加载数据必须
         this.setAbFragmentOnLoadListener(new AbFragmentOnLoadListener(){

            @Override
            public void onLoad() {
                //第一次下载数据
                refreshTask();
            }

         });

         return view;
    } 

    @Override
    public void setResource() {
        //设置加载的资源
        this.setLoadDrawable(R.drawable.ic_load);
        this.setLoadMessage(&quot;正在查询,请稍候&quot;);

        this.setRefreshDrawable(R.drawable.ic_refresh);
        this.setRefreshMessage(&quot;请求出错，请重试&quot;);
    }

    /**
     * 下载数据
     */
    public void refreshTask() {
        currentPage = 1;
        // 绑定参数
        AbRequestParams params = new AbRequestParams();
        params.put(&quot;cityCode&quot;, &quot;11&quot;);
        params.put(&quot;pageSize&quot;, String.valueOf(pageSize));
        params.put(&quot;toPageNo&quot;,String.valueOf(currentPage));
        // 下载网络数据
        NetworkWeb web = NetworkWeb.newInstance(mActivity);
        web.findLogList(params, new AbHttpListener(){

            @Override
            public void onSuccess(List&lt;?&gt; newList) {
                mList.clear();
                if(newList!=null &amp;&amp; newList.size()&gt;0){
                    mList.addAll((List&lt;Article&gt;)newList);
                    myListViewAdapter.notifyDataSetChanged();
                    newList.clear();
                   }
                mAbPullToRefreshView.onHeaderRefreshFinish();

                //模拟用，真是开发中需要直接调用run内的内容
                new Handler().postDelayed(new Runnable(){

                    @Override
                    public void run() {
                        //显示内容
                        showContentView();
                    }

                }, 3000);

            }

            @Override
            public void onFailure(String content) {
                AbToastUtil.showToast(mActivity, content);
                //显示重试的框
                showRefreshView();
            }

        });
    }

    public void loadMoreTask(){
        currentPage++;
        // 绑定参数
        AbRequestParams params = new AbRequestParams();
        params.put(&quot;cityCode&quot;, &quot;11&quot;);
        params.put(&quot;pageSize&quot;, String.valueOf(pageSize));
        params.put(&quot;toPageNo&quot;,String.valueOf(currentPage));
        // 下载网络数据
        NetworkWeb web = NetworkWeb.newInstance(this.getActivity());
        web.findLogList(params, new AbHttpListener(){

            @Override
            public void onSuccess(List&lt;?&gt; newList) {
                if(newList!=null &amp;&amp; newList.size()&gt;0){
                    mList.addAll((List&lt;Article&gt;)newList);
                    myListViewAdapter.notifyDataSetChanged();
                    newList.clear();
                   }
                mAbPullToRefreshView.onFooterLoadFinish();
            }

            @Override
            public void onFailure(String content) {

            }

        });
    }

}
</code></pre><h1 id="3201">1. XY柱图</h1>

<p><a href="#32">返回目录</a></p>
<p>数据结构</p>
<pre><code>//数据
 List&lt;double[]&gt; values = new ArrayList&lt;double[]&gt;();

        // 第一组的数据
        values.add(new double[] { 14230, 0, 0, 0, 15900, 17200, 12030});
        //第二组的数据
        values.add(new double[] { 5230, 0, 0, 0, 7900, 9200, 13030});
</code></pre><p>这个是实现的过程</p>
<pre><code> &lt;LinearLayout
        android:id=&quot;@+id/chart01&quot;
        android:layout_width=&quot;fill_parent&quot;
        android:layout_height=&quot;fill_parent&quot;
        android:orientation=&quot;vertical&quot; &gt;
    &lt;/LinearLayout&gt;



 setAbContentView(R.layout.chart);

        AbTitleBar mAbTitleBar = this.getTitleBar();
        mAbTitleBar.setTitleText(R.string.chart_bar);
        mAbTitleBar.setLogo(R.drawable.button_selector_back);
        mAbTitleBar.setTitleBarBackground(R.drawable.top_bg);
        mAbTitleBar.setTitleTextMargin(10, 0, 0, 0);
        mAbTitleBar.setLogoLine(R.drawable.line);

        application = (MyApplication)abApplication;

        //要显示图形的View
        LinearLayout linearLayout = (LinearLayout) findViewById(R.id.chart01);
        //说明文字
        String[] titles = new String[] { &quot;第一组&quot;, &quot;第二组&quot; };
        //数据
        List&lt;double[]&gt; values = new ArrayList&lt;double[]&gt;();
        //每个数据点的颜色
        List&lt;int[]&gt; colors = new ArrayList&lt;int[]&gt;();
        //每个数据点的简要 说明
        List&lt;String[]&gt; explains = new ArrayList&lt;String[]&gt;();
        // 第一组的数据
        values.add(new double[] { 14230, 0, 0, 0, 15900, 17200, 12030});
        //第二组的数据
        values.add(new double[] { 5230, 0, 0, 0, 7900, 9200, 13030});

        colors.add(new int[] { Color.RED, 0, 0, 0, 0, 0, 0});
        colors.add(new int[] { 0, 0, Color.BLUE, 0, Color.GREEN, 0, 0});

        explains.add(new String[] { &quot;红色&quot;, &quot;点2&quot;, &quot;点3&quot;, &quot;点4&quot;, &quot;&quot;, &quot;点6&quot;, &quot;&quot;});
        explains.add(new String[] { &quot;没有颜色&quot;, &quot;没有颜色&quot;, &quot;蓝色的点\n第二行的文字\n第三行的文字&quot;, &quot;没有颜色\n第二行的文字\n第三行的文字\n第四行的文字\n第五行的文字&quot;, &quot;没有颜色&quot;, &quot;没有颜色&quot;, &quot;&quot;});

        //柱体或者线条颜色
        int[] mSeriescolors = new int[] { Color.rgb(153, 204, 0),Color.rgb(51, 181, 229) };
        //创建渲染器
        XYMultipleSeriesRenderer renderer = new XYMultipleSeriesRenderer();
      //柱体或者线条颜色的数量
        int length = mSeriescolors.length;
        for (int i = 0; i &lt; length; i++) {
          //创建SimpleSeriesRenderer单一渲染器
          XYSeriesRenderer r = new XYSeriesRenderer();
          //SimpleSeriesRenderer r = new SimpleSeriesRenderer();
          //设置渲染器颜色
          r.setColor(mSeriescolors[i]);
          r.setFillPoints(true);
          r.setPointStyle(PointStyle.CIRCLE);
          r.setLineWidth(1);
          r.setChartValuesTextSize(16);
          //加入到集合中
          renderer.addSeriesRenderer(r);
        }
        //点的大小
        renderer.setPointSize(2f);
        //坐标轴标题文字大小
        renderer.setAxisTitleTextSize(16);
        //图形标题文字大小
        renderer.setChartTitleTextSize(25);
        //轴线上标签文字大小
        renderer.setLabelsTextSize(15);
        //说明文字大小
        renderer.setLegendTextSize(15);
        //图表标题
        renderer.setChartTitle(&quot;我是图表的标题&quot;);
        //X轴标题
        renderer.setXTitle(&quot;X轴&quot;);
        //Y轴标题
        renderer.setYTitle(&quot;Y轴&quot;);
        //X轴最小坐标点
        renderer.setXAxisMin(0.5);
        //X轴最大坐标点
        renderer.setXAxisMax(7.5);
        //Y轴最小坐标点
        renderer.setYAxisMin(0);
        //Y轴最大坐标点
        renderer.setYAxisMax(24000);
        //坐标轴颜色
        renderer.setAxesColor(Color.rgb(51, 181, 229));
        renderer.setXLabelsColor(Color.rgb(51, 181, 229));
        renderer.setYLabelsColor(0,Color.rgb(51, 181, 229));
        //设置图表上标题与X轴与Y轴的说明文字颜色
        renderer.setLabelsColor(Color.GRAY);
        //renderer.setGridColor(Color.GRAY);
        //设置字体加粗
        renderer.setTextTypeface(&quot;sans_serif&quot;, Typeface.BOLD);
        //设置在图表上是否显示值标签
        renderer.getSeriesRendererAt(0).setDisplayChartValues(true);
        renderer.getSeriesRendererAt(1).setDisplayChartValues(true);
        //显示屏幕可见取区的XY分割数
        renderer.setXLabels(7);
        renderer.setYLabels(10);
        //X刻度标签相对X轴位置
        renderer.setXLabelsAlign(Align.CENTER);
        //Y刻度标签相对Y轴位置
        renderer.setYLabelsAlign(Align.LEFT);
        renderer.setPanEnabled(true, false);
        renderer.setZoomEnabled(true);
        renderer.setZoomButtonsVisible(true);
        renderer.setZoomRate(1.1f);
        renderer.setBarSpacing(0.5f);

        //标尺开启
        renderer.setScaleLineEnabled(true);
        //设置标尺提示框高
        renderer.setScaleRectHeight(60);
        //设置标尺提示框宽
        renderer.setScaleRectWidth(150);
        //设置标尺提示框背景色
        renderer.setScaleRectColor(Color.argb(150, 52, 182, 232));
        renderer.setScaleLineColor(Color.argb(175, 150, 150, 150));
        renderer.setScaleCircleRadius(35);
        //第一行文字的大小
        renderer.setExplainTextSize1(20);
        //第二行文字的大小
        renderer.setExplainTextSize2(20);

        //临界线
        double[] limit = new double[]{15000,12000,4000,9000};
        renderer.setmYLimitsLine(limit);
        int[] colorsLimit = new int[] { Color.rgb(100, 255,255),Color.rgb(100, 255,255),Color.rgb(0, 255, 255),Color.rgb(0, 255, 255) };
        renderer.setmYLimitsLineColor(colorsLimit);

        //显示表格线
        renderer.setShowGrid(true);

        //如果值是0是否要显示
        renderer.setDisplayValue0(true);
        //创建渲染器数据填充器
        XYMultipleSeriesDataset mXYMultipleSeriesDataset = new XYMultipleSeriesDataset();
        for (int i = 0; i &lt; length; i++) {
          CategorySeries series = new CategorySeries(titles[i]);
          double[] v = values.get(i);
          int[] c = colors.get(i);
          String[] e = explains.get(i);
          int seriesLength = v.length;
          for (int k = 0; k &lt; seriesLength; k++) {
              //设置每个点的颜色
              series.add(v[k],c[k],e[k]);
          }
          mXYMultipleSeriesDataset.addSeries(series.toXYSeries());
        }
        //背景
        renderer.setApplyBackgroundColor(true);
        renderer.setBackgroundColor(Color.rgb(222, 222, 200));
        renderer.setMarginsColor(Color.rgb(222, 222, 200));

        //线图
        View chart = ChartFactory.getBarChartView(this,mXYMultipleSeriesDataset,renderer,BarChart.Type.DEFAULT);
        linearLayout.addView(chart);

      }
</code></pre><h1 id="3301">1. 饼图</h1>

<p><a href="#33">返回目录</a></p>
<pre><code>//要显示图形的View
        LinearLayout linearLayout = (LinearLayout) findViewById(R.id.chart01);

        //每个块的颜色
        int[] colors = new int[] { Color.BLUE, Color.GREEN, Color.MAGENTA, Color.YELLOW, Color.CYAN };
        //渲染器
        DefaultRenderer renderer = new DefaultRenderer();
        //图表标题
        renderer.setChartTitle(&quot;我是图表的标题&quot;);
        //图形标题文字大小
          renderer.setChartTitleTextSize(25);
          //轴线上标签文字大小
          renderer.setLabelsTextSize(15);
          //说明文字大小
          renderer.setLegendTextSize(15);
          //设置图表上标题与X轴与Y轴的说明文字颜色
        renderer.setLabelsColor(Color.GRAY);
        //说明文字大小
        renderer.setLegendTextSize(15);
        for (int color : colors) {
              //创建SimpleSeriesRenderer对象  单一渲染器
              SimpleSeriesRenderer r = new SimpleSeriesRenderer();
              r.setColor(color);
              renderer.addSeriesRenderer(r);
        }
        //创建数据填充器
        CategorySeries series = new CategorySeries(&quot;支出情况&quot;);
        series.add(&quot;住房&quot;, 28);
        series.add(&quot;食物&quot;, 25);
        series.add(&quot;水电&quot;, 2);
        series.add(&quot;娱乐&quot;, 20);
        series.add(&quot;服装&quot;, 25);

        //设置图表的背景颜色
        renderer.setApplyBackgroundColor(true);
        renderer.setBackgroundColor(Color.rgb(222, 222, 200));
        //renderer.setMargins(new int[]{5,5,5,5});
        //获取图表View
        View chart = ChartFactory.getPieChartView(this,series,renderer);
        linearLayout.addView(chart);
</code></pre><h1 id="5301">1.图片适配的旋转木马</h1>

<p><a href="#53">返回目录</a></p>
<pre><code> &lt;com.ab.view.carousel.CarouselImageView
        android:id=&quot;@+id/carousel&quot;
        android:layout_width=&quot;fill_parent&quot;
        android:layout_height=&quot;fill_parent&quot; /&gt;


carousel = (CarouselImageView) findViewById(R.id.carousel);

        List&lt;Drawable&gt; mDrawables = new ArrayList&lt;Drawable&gt;();
        mDrawables.add(this.getResources().getDrawable(R.drawable.icon1));
        mDrawables.add(this.getResources().getDrawable(R.drawable.icon2));
        mDrawables.add(this.getResources().getDrawable(R.drawable.icon3));
        mDrawables.add(this.getResources().getDrawable(R.drawable.icon4));
        mDrawables.add(this.getResources().getDrawable(R.drawable.icon5));
        mDrawables.add(this.getResources().getDrawable(R.drawable.icon6));

        //不支持的动态添加dapter.notifyDataSetChanged();增强滑动的流畅

        CarouselImageAdapter adapter = new CarouselImageAdapter(this,mDrawables,true);
        carousel.setAdapter(adapter);

        carousel.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(CarouselAdapter&lt;?&gt; parent, View view,
                    int position, long id) {
                AbToastUtil.showToast(CarouselImageActivity.this,&quot;Click Position=&quot; + position);

            }

        });

        carousel.setOnItemSelectedListener(new OnItemSelectedListener(){

            @Override
            public void onItemSelected(CarouselAdapter&lt;?&gt; parent, View view,
                    int position, long id) {
                AbToastUtil.showToast(CarouselImageActivity.this,&quot;Selected Position=&quot; + position);
            }

            @Override
            public void onNothingSelected(CarouselAdapter&lt;?&gt; parent) {
            }

        });
</code></pre><h1 id="5601">1.环形进度条</h1>

<p><a href="#56">返回目录</a></p>
<p><img src="http://i.imgur.com/sPrlH7F.jpg" alt=""></p>
<p>xml布局的写法</p>
<pre><code>&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    xmlns:tools=&quot;http://schemas.android.com/tools&quot;
    android:layout_width=&quot;match_parent&quot;
    android:layout_height=&quot;match_parent&quot;
    android:background=&quot;@color/gray_white&quot;
    android:gravity=&quot;center&quot; 
    android:orientation=&quot;horizontal&quot;&gt;

    &lt;RelativeLayout
        android:layout_width=&quot;match_parent&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:background=&quot;@color/gray_white&quot;
        android:gravity=&quot;center&quot; &gt;
&lt;!-- 相对布局，内容居中显示 --&gt;
        &lt;RelativeLayout
            android:layout_width=&quot;210dip&quot;
            android:layout_height=&quot;210dip&quot;
            android:layout_centerHorizontal=&quot;true&quot;
            android:layout_centerVertical=&quot;true&quot;
            android:background=&quot;@drawable/progress_circle_bg&quot;
            android:clickable=&quot;true&quot;
            android:gravity=&quot;center&quot; &gt;

            &lt;TextView
                android:id=&quot;@+id/stepText&quot;
                android:layout_width=&quot;wrap_content&quot;
                android:layout_height=&quot;wrap_content&quot;
                android:layout_centerHorizontal=&quot;true&quot;
                android:text=&quot;当前&quot;
                android:textColor=&quot;@color/gray&quot; /&gt;
&lt;!-- android:textStyle=&quot;bold&quot;意思是黑体 --&gt;
            &lt;TextView
                android:id=&quot;@+id/numberText&quot;
                android:layout_width=&quot;wrap_content&quot;
                android:layout_height=&quot;wrap_content&quot;
                android:layout_below=&quot;@+id/stepText&quot;
                android:layout_centerHorizontal=&quot;true&quot;
                android:textSize=&quot;30sp&quot;
                android:textStyle=&quot;bold&quot; /&gt;

            &lt;TextView
                android:id=&quot;@+id/maxText&quot;
                android:layout_width=&quot;wrap_content&quot;
                android:layout_height=&quot;wrap_content&quot;
                android:layout_below=&quot;@+id/numberText&quot;
                android:layout_centerHorizontal=&quot;true&quot;
                android:textColor=&quot;@color/gray&quot; /&gt;
        &lt;/RelativeLayout&gt;
&lt;!-- 相对布局里相互叠加 --&gt;
        &lt;com.ab.view.progress.AbCircleProgressBar
            android:id=&quot;@+id/circleProgressBar&quot;
            android:layout_width=&quot;210dip&quot;
            android:layout_height=&quot;210dip&quot;
            android:layout_centerHorizontal=&quot;true&quot;
            android:layout_centerVertical=&quot;true&quot; /&gt;

    &lt;/RelativeLayout&gt;

&lt;/LinearLayout&gt;
</code></pre><p>代码实现的过程</p>
<pre><code>// ProgressBar进度控制
    private AbCircleProgressBar mAbProgressBar;
    // 最大100
    private int max = 100;    
    private int progress = 0;
    private TextView numberText, maxText;

// ProgressBar进度控制
        mAbProgressBar = (AbCircleProgressBar) findViewById(R.id.circleProgressBar);

        numberText = (TextView) findViewById(R.id.numberText);
        maxText = (TextView) findViewById(R.id.maxText);

        maxText.setText(&quot;总共  &quot;+String.valueOf(max));
        mAbProgressBar.setMax(max);
        mAbProgressBar.setProgress(progress);

//开启进度条
        startAddProgress();
        // 进度条加入监听器
        mAbProgressBar.setAbOnProgressListener(new AbCircleProgressBar.AbOnProgressListener() {

            @Override
            public void onProgress(int progress) {

            }

            @Override
            public void onComplete() {
                progress = 0;
                mAbProgressBar.reset();
            }
        });



public void startAddProgress() {
        progress = progress+10;
        numberText.setText(String.valueOf(progress));
        mAbProgressBar.setProgress(progress);
        mUpdateHandler.sendEmptyMessageDelayed(1, 1000);
    }

    //每秒更新十分之一
    private Handler mUpdateHandler = new Handler() {
        public void handleMessage(Message msg) {
            switch (msg.what) {
            case 1:
                startAddProgress();
                break;
            }
            super.handleMessage(msg);
        }
    };

    private Runnable mUpdateRunnable = new Runnable() {
        public void run() {
            while (true) {
                Message message = new Message();
                message.what = 1;
                mUpdateHandler.sendMessage(message);
                try {
                    // 更新间隔毫秒数
                    Thread.sleep(200);
                } catch (InterruptedException e) {
                    Thread.currentThread().interrupt();
                }
            }
        }
    };
</code></pre><h1 id="5701">1.水平进度条</h1>

<p><a href="#57">返回目录</a></p>
<p><img src="http://i.imgur.com/IvCQbxO.jpg" alt=""><br>xml文件</p>
<pre><code>&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    xmlns:tools=&quot;http://schemas.android.com/tools&quot;
    android:layout_width=&quot;match_parent&quot;
    android:layout_height=&quot;match_parent&quot;
    android:background=&quot;@color/gray_white&quot;
    android:gravity=&quot;center&quot;
    android:orientation=&quot;vertical&quot; 
    android:paddingTop=&quot;10dip&quot;&gt;

    &lt;com.ab.view.progress.AbHorizontalProgressBar
        android:id=&quot;@+id/horizontalProgressBar&quot;
        android:layout_width=&quot;250dip&quot;
        android:layout_height=&quot;30dip&quot; /&gt;

    &lt;LinearLayout
        android:layout_width=&quot;match_parent&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:gravity=&quot;center&quot;
        android:orientation=&quot;horizontal&quot; &gt;

        &lt;TextView
            android:id=&quot;@+id/numberText&quot;
            android:layout_width=&quot;wrap_content&quot;
            android:layout_height=&quot;wrap_content&quot;
            android:textColor=&quot;@color/gray&quot;/&gt;

        &lt;TextView
            android:id=&quot;@+id/maxText&quot;
            android:layout_width=&quot;wrap_content&quot;
            android:layout_height=&quot;wrap_content&quot;
            android:textColor=&quot;@color/gray&quot; /&gt;
    &lt;/LinearLayout&gt;

&lt;/LinearLayout&gt;
</code></pre><p>代码实现部分</p>
<pre><code>// ProgressBar进度控制
    private AbHorizontalProgressBar mAbProgressBar;
    // 最大1000
    private int max = 100;    
    private int progress = 0;
    private TextView numberText, maxText;


// ProgressBar进度控制
        mAbProgressBar = (AbHorizontalProgressBar) findViewById(R.id.horizontalProgressBar);

        numberText = (TextView) findViewById(R.id.numberText);
        maxText = (TextView) findViewById(R.id.maxText);

        maxText.setText(&quot;/&quot;+String.valueOf(max));
        mAbProgressBar.setMax(max);
        mAbProgressBar.setProgress(progress);

        mAbTitleBar.getLogoView().setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                finish();
            }
        });

        startAddProgress();

        mAbProgressBar.setAbOnProgressListener(new AbHorizontalProgressBar.AbOnProgressListener() {

            @Override
            public void onProgress(int progress) {

            }

            @Override
            public void onComplete() {
                progress = 0;
                mAbProgressBar.reset();
            }
        });


public void startAddProgress() {
        progress = progress+10;
        numberText.setText(String.valueOf(progress));
        mAbProgressBar.setProgress(progress);
        mUpdateHandler.sendEmptyMessageDelayed(1, 1000);
    }

    private Handler mUpdateHandler = new Handler() {
        public void handleMessage(Message msg) {
            switch (msg.what) {
            case 1:
                startAddProgress();
                break;
            }
            super.handleMessage(msg);
        }
    };

    private Runnable mUpdateRunnable = new Runnable() {
        public void run() {
            while (true) {
                Message message = new Message();
                message.what = 1;
                mUpdateHandler.sendMessage(message);
                try {
                    // 更新间隔毫秒数
                    Thread.sleep(200);
                } catch (InterruptedException e) {
                    Thread.currentThread().interrupt();
                }
            }
        }
    };
</code></pre><h1 id="6001">1.硬币翻转</h1>

<p><a href="#60">返回目录</a></p>
<p>xml定义布局</p>
<pre><code>&lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    android:layout_width=&quot;match_parent&quot;
    android:layout_height=&quot;match_parent&quot;
    android:background=&quot;@android:color/white&quot;
    android:gravity=&quot;center&quot; &gt;
&lt;!-- 硬币的两面分别放在两个相对布局中，两个相对布局又放在同一个帧布局中。 --&gt;
    &lt;FrameLayout
        android:id=&quot;@+id/container&quot;
        android:layout_width=&quot;match_parent&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:gravity=&quot;center&quot; &gt;

        &lt;RelativeLayout
            android:id=&quot;@+id/layout01&quot;
            android:layout_width=&quot;match_parent&quot;
            android:layout_height=&quot;wrap_content&quot; 
            android:gravity=&quot;center&quot;&gt;

            &lt;ImageView
                android:layout_width=&quot;wrap_content&quot;
                android:layout_height=&quot;wrap_content&quot;
                android:layout_gravity=&quot;center&quot;
                android:scaleType=&quot;matrix&quot;
                android:src=&quot;@drawable/yuan1_z&quot; &gt;
            &lt;/ImageView&gt;
        &lt;/RelativeLayout&gt;

        &lt;RelativeLayout
            android:id=&quot;@+id/layout02&quot;
            android:layout_width=&quot;match_parent&quot;
            android:layout_height=&quot;wrap_content&quot; 
            android:gravity=&quot;center&quot;
            android:visibility=&quot;gone&quot;&gt;

            &lt;ImageView
                android:layout_width=&quot;wrap_content&quot;
                android:layout_height=&quot;wrap_content&quot;
                android:layout_gravity=&quot;center&quot;
                android:scaleType=&quot;matrix&quot;
                android:src=&quot;@drawable/yuan1_f&quot; &gt;
            &lt;/ImageView&gt;
        &lt;/RelativeLayout&gt;
    &lt;/FrameLayout&gt;

&lt;/RelativeLayout&gt;
</code></pre><p>代码实现过程</p>
<pre><code>private ViewGroup mContainer = null;
private RelativeLayout mRelativeLayout01,mRelativeLayout02;


//帧布局是容器
        mContainer = (ViewGroup) findViewById(R.id.container);
        // Since we are caching large views, we want to keep their cache
        // between each animation
        //PERSISTENT_ANIMATION_CACHE 说明只保存动画绘图缓存；
        mContainer.setPersistentDrawingCache(ViewGroup.PERSISTENT_ANIMATION_CACHE);

        mRelativeLayout01 = (RelativeLayout) findViewById(R.id.layout01);
        mRelativeLayout02 = (RelativeLayout) findViewById(R.id.layout02);


        mRelativeLayout01.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {
                applyRotation(0,0,90);
            }
        });

        mRelativeLayout02.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {
                applyRotation(-1, 180, 90);
            }
        });




/**
     * Setup a new 3D rotation on the container view.
     *
     * @param position the item that was clicked to show a picture, or -1 to show the list
     * @param start the start angle at which the rotation must begin
     * @param end the end angle of the rotation
     */
    private void applyRotation(int position, float start, float end) {
        // Find the center of the container f表明是float类型
        final float centerX = mContainer.getWidth() / 2.0f;
        final float centerY = mContainer.getHeight() / 2.0f;

        // Create a new 3D rotation with the supplied parameter
        // The animation listener is used to trigger the next animation
       //从270到360度，顺时针旋转视图，此时reverse参数为false，达到360度动画结束时视图变得可见
         final AbRotate3dAnimation rotation =
                new AbRotate3dAnimation(start, end, centerX, centerY, 310.0f, true);
        rotation.setDuration(500);
        rotation.setFillAfter(true);
        //中间的差值
        rotation.setInterpolator(new AccelerateInterpolator());
        //加入对动画的监听
        rotation.setAnimationListener(new DisplayNextView(position));

        mContainer.startAnimation(rotation);
    }

    /**这个是动画监听器
     * 这个类监听动画的上半部分结束。然后，当容器旋转90度，从而不可见时，
     * 它将发布一个新的操作，有效地交换视图。
     * This class listens for the end of the first half of the animation.
     * It then posts a new action that effectively swaps the views when the container
     * is rotated 90 degrees and thus invisible.
     */
    private final class DisplayNextView implements Animation.AnimationListener {
        private final int mPosition;

        private DisplayNextView(int position) {
            mPosition = position;
        }

        public void onAnimationStart(Animation animation) {
        }

        public void onAnimationEnd(Animation animation) {
            mContainer.post(new SwapViews(mPosition));
        }

        public void onAnimationRepeat(Animation animation) {
        }
    }

    /**这个类负责交换视图并启动动画的下半部分。
     * This class is responsible for swapping the views and start the second
     * half of the animation.
     */
    private final class SwapViews implements Runnable {
        private final int mPosition;

        public SwapViews(int position) {
            mPosition = position;
        }

        public void run() {
            final float centerX = mContainer.getWidth() / 2.0f;
            final float centerY = mContainer.getHeight() / 2.0f;
            AbRotate3dAnimation rotation;

            if (mPosition &gt; -1) {
                mRelativeLayout01.setVisibility(View.GONE);
                mRelativeLayout02.setVisibility(View.VISIBLE);

                rotation = new AbRotate3dAnimation(90,180, centerX, centerY, 310.0f, false);
            } else {
                mRelativeLayout02.setVisibility(View.GONE);
                mRelativeLayout01.setVisibility(View.VISIBLE);
                rotation = new AbRotate3dAnimation(90, 0, centerX, centerY, 310.0f, false);
            }

            rotation.setDuration(500);
            rotation.setFillAfter(true);
            rotation.setInterpolator(new DecelerateInterpolator());

            mContainer.startAnimation(rotation);
        }
    }
</code></pre><h1 id="7601">1.ListView与ViewPager组合</h1>

<p><a href="#76">返回目录</a></p>
<p>xml文档是</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;com.ab.view.pullview.AbPullToRefreshView 
    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    android:id=&quot;@+id/mPullRefreshView&quot;
    android:layout_width=&quot;fill_parent&quot;
    android:layout_height=&quot;fill_parent&quot;
    android:background=&quot;@color/gray_white&quot;&gt;

    &lt;ListView
        android:id=&quot;@+id/mListView&quot;
        android:layout_width=&quot;fill_parent&quot;
        android:layout_height=&quot;fill_parent&quot;
        android:cacheColorHint=&quot;#00000000&quot;
        android:divider=&quot;@drawable/list_divider&quot;
        android:dividerHeight=&quot;1px&quot; /&gt;

&lt;/com.ab.view.pullview.AbPullToRefreshView&gt;
</code></pre><p>代码的实现是</p>
<pre><code>package com.andbase.demo.activity;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;
import java.util.Random;

import android.os.Bundle;
import android.view.Gravity;
import android.view.View;
import android.view.ViewGroup.LayoutParams;
import android.widget.AbsListView;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ImageView;
import android.widget.ListView;
import android.widget.TextView;

import com.ab.activity.AbActivity;
import com.ab.task.AbTask;
import com.ab.task.AbTaskItem;
import com.ab.task.AbTaskListener;
import com.ab.util.AbDialogUtil;
import com.ab.util.AbToastUtil;
import com.ab.view.pullview.AbPullToRefreshView;
import com.ab.view.pullview.AbPullToRefreshView.OnFooterLoadListener;
import com.ab.view.pullview.AbPullToRefreshView.OnHeaderRefreshListener;
import com.ab.view.sliding.AbSlidingPlayView;
import com.ab.view.titlebar.AbTitleBar;
import com.andbase.R;
import com.andbase.demo.adapter.ImageListAdapter;
import com.andbase.global.Constant;
import com.andbase.global.MyApplication;

public class ListNestViewPagerActivity extends AbActivity implements OnHeaderRefreshListener,OnFooterLoadListener{

    private MyApplication application;
    private List&lt;Map&lt;String, Object&gt;&gt; list = null;
    private List&lt;Map&lt;String, Object&gt;&gt; newList = null;
    private AbPullToRefreshView mAbPullToRefreshView = null;
    private ListView mListView = null;
    private int currentPage = 1;
    private ArrayList&lt;String&gt; mPhotoList = new ArrayList&lt;String&gt;();
    private AbTitleBar mAbTitleBar = null;
    private ImageListAdapter myListViewAdapter = null;
    private AbSlidingPlayView mSlidingPlayView = null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setAbContentView(R.layout.pull_to_refresh_list);
        application = (MyApplication)abApplication;

        mAbTitleBar = this.getTitleBar();
        mAbTitleBar.setTitleText(R.string.list_pager_name);
        mAbTitleBar.setLogo(R.drawable.button_selector_back);
        mAbTitleBar.setTitleBarBackground(R.drawable.top_bg);
        mAbTitleBar.setTitleTextMargin(10, 0, 0, 0);
        mAbTitleBar.setLogoLine(R.drawable.line);

        for (int i = 0; i &lt; 23; i++) {
            mPhotoList.add(Constant.BASEURL+&quot;content/templates/amsoft/images/rand/&quot;+i+&quot;.jpg&quot;);
        }
        //获取ListView对象
        mAbPullToRefreshView = (AbPullToRefreshView)this.findViewById(R.id.mPullRefreshView);
        mListView = (ListView)this.findViewById(R.id.mListView);

        //设置监听器
        mAbPullToRefreshView.setOnHeaderRefreshListener(this);
        mAbPullToRefreshView.setOnFooterLoadListener(this);

        //设置进度条的样式
        mAbPullToRefreshView.getHeaderView().setHeaderProgressBarDrawable(this.getResources().getDrawable(R.drawable.progress_circular));
        mAbPullToRefreshView.getFooterView().setFooterProgressBarDrawable(this.getResources().getDrawable(R.drawable.progress_circular));
        //mAbPullListView.getHeaderView().setHeaderProgressBarDrawable(this.getResources().getDrawable(R.drawable.progress_circular2));
        //mAbPullListView.getFooterView().setFooterProgressBarDrawable(this.getResources().getDrawable(R.drawable.progress_circular2));

        //ListView数据
        list = new ArrayList&lt;Map&lt;String, Object&gt;&gt;();

        //使用自定义的Adapter
        myListViewAdapter = new ImageListAdapter(this, list,R.layout.item_list,
                new String[] { &quot;itemsIcon&quot;, &quot;itemsTitle&quot;,&quot;itemsText&quot; }, new int[] { R.id.itemsIcon,
                        R.id.itemsTitle,R.id.itemsText });

        //item被点击事件
        mListView.setOnItemClickListener(new OnItemClickListener(){
            @Override
            public void onItemClick(AdapterView&lt;?&gt; parent, View view,
                    int position, long id) {
            }
        });

        //组和个AbSlidingPlayView
        mSlidingPlayView = new AbSlidingPlayView(this);

        final View mPlayView = mInflater.inflate(R.layout.play_view_item, null);
        ImageView mPlayImage = (ImageView) mPlayView.findViewById(R.id.mPlayImage);
        TextView mPlayText = (TextView) mPlayView.findViewById(R.id.mPlayText);
        mPlayText.setText(&quot;1111111111111&quot;);
        mPlayImage.setBackgroundResource(R.drawable.pic1);

        final View mPlayView1 = mInflater.inflate(R.layout.play_view_item, null);
        ImageView mPlayImage1 = (ImageView) mPlayView1.findViewById(R.id.mPlayImage);
        TextView mPlayText1 = (TextView) mPlayView1.findViewById(R.id.mPlayText);
        mPlayText1.setText(&quot;2222222222222&quot;);
        mPlayImage1.setBackgroundResource(R.drawable.pic2);

        final View mPlayView2 = mInflater.inflate(R.layout.play_view_item, null);
        ImageView mPlayImage2 = (ImageView) mPlayView2.findViewById(R.id.mPlayImage);
        TextView mPlayText2 = (TextView) mPlayView2.findViewById(R.id.mPlayText);
        mPlayText2.setText(&quot;33333333333333333&quot;);
        mPlayImage2.setBackgroundResource(R.drawable.pic3);

        mSlidingPlayView.setNavHorizontalGravity(Gravity.RIGHT);
        mSlidingPlayView.addView(mPlayView);
        mSlidingPlayView.addView(mPlayView1);
        mSlidingPlayView.addView(mPlayView2);
        mSlidingPlayView.startPlay();
        //设置高度
        mSlidingPlayView.setLayoutParams(new AbsListView.LayoutParams(LayoutParams.FILL_PARENT,300));
        mListView.addHeaderView(mSlidingPlayView);
        //解决冲突问题
        mSlidingPlayView.setParentListView(mListView);
        mSlidingPlayView.setOnItemClickListener(new AbSlidingPlayView.AbOnItemClickListener() {

            @Override
            public void onClick(int position) {
                AbToastUtil.showToast(ListNestViewPagerActivity.this,&quot;点击&quot;+position);
            }
        });

        mSlidingPlayView.setOnPageChangeListener(new AbSlidingPlayView.AbOnChangeListener() {

            @Override
            public void onChange(int position) {
                AbToastUtil.showToast(ListNestViewPagerActivity.this,&quot;改变&quot;+position);
            }
        });

        mListView.setAdapter(myListViewAdapter);

        AbDialogUtil.showProgressDialog(ListNestViewPagerActivity.this,R.drawable.progress_circular,&quot;正在查询...&quot;);

        //第一次下载数据
        refreshTask();
    }


    @Override
    protected void onResume() {
        super.onResume();
    }

    public void onPause() {
        super.onPause();
    }

    @Override
    public void finish() {
        mSlidingPlayView.stopPlay();
        super.finish();
    }

    //动态获得数据
    public void refreshTask(){
        AbTask mAbTask = new AbTask();
        AbTaskItem item = new AbTaskItem();
        item.setListener(new AbTaskListener() {
//修改数据
            @Override
            public void update() {
                AbDialogUtil.removeDialog(ListNestViewPagerActivity.this);
                list.clear();
                if(newList!=null &amp;&amp; newList.size()&gt;0){
                    list.addAll(newList);
                    myListViewAdapter.notifyDataSetChanged();
                    newList.clear();
                   }
                mAbPullToRefreshView.onHeaderRefreshFinish();
            }
//获得数据
            @Override
            public void get() {
                   try {
                       Thread.sleep(1000);
                       currentPage = 1;
                       //list中是map的集合
                       newList = new ArrayList&lt;Map&lt;String, Object&gt;&gt;();
                       Map&lt;String, Object&gt; map = null;
                       //map中包含list
                       for (int i = 0; i &lt; 10; i++) {
                           map = new HashMap&lt;String, Object&gt;();
                           map.put(&quot;itemsIcon&quot;,mPhotoList.get(i));
                           map.put(&quot;itemsTitle&quot;, &quot;item&quot;+i);
                           map.put(&quot;itemsText&quot;, &quot;item...&quot;+i);
                           newList.add(map);
                       }
                   } catch (Exception e) {
                   }
          };
        });

        mAbTask.execute(item);
    }

    public void loadMoreTask(){

        AbTask mAbTask = new AbTask();
        AbTaskItem item = new AbTaskItem();
        item.setListener(new AbTaskListener() {

            @Override
            public void update() {
//                list上次的数据不清楚
                if(newList!=null &amp;&amp; newList.size()&gt;0){
                    list.addAll(newList);
                    myListViewAdapter.notifyDataSetChanged();
                    newList.clear();
                }
                mAbPullToRefreshView.onFooterLoadFinish();
            }

            @Override
            public void get() {
                   try {
                       currentPage++;
                       Thread.sleep(1000);
                       newList = new ArrayList&lt;Map&lt;String, Object&gt;&gt;();
                       Map&lt;String, Object&gt; map = null;

                       for (int i = 0; i &lt; 10; i++) {
                           map = new HashMap&lt;String, Object&gt;();
                           map.put(&quot;itemsIcon&quot;,mPhotoList.get(new Random().nextInt(mPhotoList.size())));
                           map.put(&quot;itemsTitle&quot;, &quot;item上拉&quot;+i);
                           map.put(&quot;itemsText&quot;, &quot;item上拉...&quot;+i);
                           newList.add(map);
                       }

                   } catch (Exception e) {
                       currentPage--;
                       newList.clear();
                       AbToastUtil.showToastInThread(ListNestViewPagerActivity.this,e.getMessage());
                   }
          };
        });

        mAbTask.execute(item);
    }

    @Override
    public void onFooterLoad(AbPullToRefreshView view) {
        loadMoreTask();
    }

    @Override
    public void onHeaderRefresh(AbPullToRefreshView view) {
        refreshTask();

    }
}
</code></pre><h1 id="7701">1.ListView与ViewPager组合</h1>

<p><a href="#77">返回目录</a></p>
<pre><code>package com.andbase.demo.activity;

import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;

import com.ab.activity.AbActivity;
import com.ab.view.slidingmenu.SlidingMenu;
import com.ab.view.titlebar.AbTitleBar;
import com.andbase.R;
/**
 * 
 * © 2012 amsoft.cn
 * 名称：SlidingMenuNestViewPagerActivity.java 
 * 描述：SlidingMenu+ViewPager冲突解决的演示
 * @author 还如一梦中
 * @date：2013-10-25 上午9:15:58
 * @version v1.0
 */
public class SlidingMenuNestViewPagerActivity extends AbActivity {

    private SlidingMenu menu;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setAbContentView(R.layout.sliding_menu_content);

        AbTitleBar mAbTitleBar = this.getTitleBar();
        mAbTitleBar.setTitleText(R.string.sliding_menu_pager_name);
        mAbTitleBar.setLogo(R.drawable.button_selector_back);
        mAbTitleBar.setTitleBarBackground(R.drawable.top_bg);
        mAbTitleBar.setTitleTextMargin(10, 0, 0, 0);
        mAbTitleBar.setLogoLine(R.drawable.line);
        mAbTitleBar.getLogoView().setBackgroundResource(R.drawable.button_selector_menu);

        //主视图的Fragment添加
        getFragmentManager()
        .beginTransaction()
        .replace(R.id.content_frame, new FragmentLoad())
        .commit();

        //SlidingMenu的配置
        menu = new SlidingMenu(this);
        menu.setMode(SlidingMenu.LEFT);

        //slidingmenu的事件模式，如果里面有可以滑动的请用TOUCHMODE_MARGIN
        //可解决事件冲突问题
        menu.setTouchModeAbove(SlidingMenu.TOUCHMODE_MARGIN);        
        menu.setShadowWidthRes(R.dimen.shadow_width);
        //渐变的背景
        menu.setShadowDrawable(R.drawable.shadow);
        //偏移的距离
        menu.setBehindOffsetRes(R.dimen.slidingmenu_offset);
        menu.setFadeDegree(0.35f);
        menu.attachToActivity(this, SlidingMenu.SLIDING_CONTENT);

        //menu视图的Fragment添加
        menu.setMenu(R.layout.sliding_menu_menu);
        getFragmentManager()
        .beginTransaction()
        .replace(R.id.menu_frame, new FragmentLoad())
        .commit();

        mAbTitleBar.getLogoView().setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {
                if (menu.isMenuShowing()) {
                     menu.showContent();
                 } else {
                     menu.showMenu();
                 }
            }
        });
    }

    @Override
    public void onBackPressed() {
        if (menu.isMenuShowing()) {
            menu.showContent();
        } else {
            super.onBackPressed();
        }
    }

}
</code></pre><h1 id="10601">1.各种集合框架</h1>

<p><a href="#106">返回目录</a></p>
<pre><code>111
</code></pre><h1 id="10602">2.进度条</h1>

<p><a href="#106">返回目录</a></p>
<pre><code>//设置进度条的样式
        mAbPullToRefreshView.getHeaderView().setHeaderProgressBarDrawable(this.getResources().getDrawable(R.drawable.progress_circular));

从0到360度 200秒 差值 重复
&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;animated-rotate xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    android:duration=&quot;200&quot;
    android:fromDegrees=&quot;0.0&quot;
    android:interpolator=&quot;@android:anim/accelerate_decelerate_interpolator&quot;
    android:pivotX=&quot;50.0%&quot;
    android:pivotY=&quot;50.0%&quot;
    android:repeatMode=&quot;restart&quot;
    android:toDegrees=&quot;360.0&quot; 
    android:drawable=&quot;@drawable/progress_loading2&quot;&gt;
&lt;/animated-rotate&gt;
</code></pre><h1 id="10603">3.土司</h1>

<p><a href="#106">返回目录</a></p>
<pre><code>AbToastUtil.showToast(ListNestViewPagerActivity.this,&quot;点击&quot;+position);
</code></pre><h1 id="10604">4.容器的运用list与map相互嵌套 动态获得数据</h1>

<p><a href="#106">返回目录</a></p>
<pre><code>private List&lt;Map&lt;String, Object&gt;&gt; list = null;
    private List&lt;Map&lt;String, Object&gt;&gt; newList = null;


//使用自定义的Adapter  把数据list放入adapter中
        myListViewAdapter = new ImageListAdapter(this, list,R.layout.item_list,
                new String[] { &quot;itemsIcon&quot;, &quot;itemsTitle&quot;,&quot;itemsText&quot; }, new int[] { R.id.itemsIcon,
                        R.id.itemsTitle,R.id.itemsText });

    //动态获得数据
    public void refreshTask(){
        AbTask mAbTask = new AbTask();
        AbTaskItem item = new AbTaskItem();
        item.setListener(new AbTaskListener() {
//修改数据
            @Override
            public void update() {
                AbDialogUtil.removeDialog(ListNestViewPagerActivity.this);
                list.clear();
                if(newList!=null &amp;&amp; newList.size()&gt;0){
                    list.addAll(newList);
                    myListViewAdapter.notifyDataSetChanged();
                    newList.clear();
                   }
                mAbPullToRefreshView.onHeaderRefreshFinish();
            }
//获得数据
            @Override
            public void get() {
                   try {
                       Thread.sleep(1000);
                       currentPage = 1;
                       //list中是map的集合
                       newList = new ArrayList&lt;Map&lt;String, Object&gt;&gt;();
                       Map&lt;String, Object&gt; map = null;
                       //map中包含list
                       for (int i = 0; i &lt; 10; i++) {
                           map = new HashMap&lt;String, Object&gt;();
                           map.put(&quot;itemsIcon&quot;,mPhotoList.get(i));
                           map.put(&quot;itemsTitle&quot;, &quot;item&quot;+i);
                           map.put(&quot;itemsText&quot;, &quot;item...&quot;+i);
                           newList.add(map);
                       }
                   } catch (Exception e) {
                   }
          };
        });

        mAbTask.execute(item);
    }


//获取该行的数据
          final Map&lt;String, Object&gt;  obj = (Map&lt;String, Object&gt;)mData.get(position);
          String imageUrl = (String)obj.get(&quot;itemsIcon&quot;);
          itemsTitle.setText((String)obj.get(&quot;itemsTitle&quot;));
          itemsText.setText((String)obj.get(&quot;itemsText&quot;));
</code></pre><h1 id="10605">5.图片下载器</h1>

<p><a href="#106">返回目录</a></p>
<pre><code>//图片下载器
    private AbImageLoader mAbImageLoader = null;

 //图片下载器
        mAbImageLoader = new AbImageLoader(mContext);
        mAbImageLoader.setMaxWidth(150);
        mAbImageLoader.setMaxHeight(150);
        mAbImageLoader.setLoadingImage(R.drawable.image_loading);
        mAbImageLoader.setErrorImage(R.drawable.image_error);
        mAbImageLoader.setEmptyImage(R.drawable.image_empty);

//设置加载中的View
          mAbImageLoader.setLoadingView(convertView.findViewById(R.id.progressBar));
          //图片的下载
          mAbImageLoader.display(itemsIcon,imageUrl);
</code></pre><h1 id="7901">1.圆形挂钟</h1>

<p><a href="#79">返回目录</a></p>
<p>自定义模拟时钟</p>
<pre><code>/*
 * Copyright (C) 2012 www.amsoft.cn
 * 
 * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
package com.ab.view.app;

import java.util.TimeZone;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.graphics.Canvas;
import android.graphics.drawable.Drawable;
import android.os.Handler;
import android.text.format.DateUtils;
import android.text.format.Time;
import android.view.View;

import com.ab.util.AbLogUtil;

// TODO: Auto-generated Javadoc
/**
 * © 2012 amsoft.cn
 * 名称：AbAnalogClock.java 
 * 描述：自定义模拟时钟
 *
 * @author 还如一梦中
 * @version v1.0
 * @date：2013-11-6 上午9:13:49
 */
public class AbAnalogClock extends View {

    /** The m calendar. */
    private Time mCalendar;

    //时针图标
    /** The m hour hand. */
    private Drawable mHourHand;

    //分针图标
    /** The m minute hand. */
    private Drawable mMinuteHand;

    //秒针图标
    /** The m second hand. */
    private Drawable mSecondHand;

    //表盘图标
    /** The m dial. */
    private Drawable mDial;

    //表盘图片的大小 宽和高
    /** The m dial width. */
    private int mDialWidth;

    /** The m dial height. */
    private int mDialHeight;

    /** The m attached. */
    private boolean mAttached;

    //当前时间
    /** The m minutes. */
    private float mMinutes;

    /** The m hour. */
    private float mHour;

    /** The m second. */
    private float mSecond;

    /** The m handler. */
    private final Handler mHandler = new Handler();

    /** The m changed. */
    private boolean mChanged;

    /**
     * Instantiates a new ab analog clock.
     *通过构造器来传递图片
     * @param context the context
     * @param dial the dial
     * @param hourHand the hour hand
     * @param minuteHand the minute hand
     * @param secondHand the second hand
     */
    public AbAnalogClock(Context context, Drawable dial, Drawable hourHand,
            Drawable minuteHand,Drawable secondHand) {
        super(context);

        mDial = dial;
        mHourHand = hourHand;
        mMinuteHand = minuteHand;
        mSecondHand = secondHand;

        mCalendar = new Time();

        mDialWidth = mDial.getIntrinsicWidth();
        mDialHeight = mDial.getIntrinsicHeight();
    }

    /* (non-Javadoc)
     * @see android.view.View#onAttachedToWindow()
     */
    @Override
    protected void onAttachedToWindow() {
        super.onAttachedToWindow();

        if (!mAttached) {
            mAttached = true;
//意图过滤器
            IntentFilter filter = new IntentFilter();

            filter.addAction(Intent.ACTION_TIME_TICK);
            filter.addAction(Intent.ACTION_TIME_CHANGED);
            filter.addAction(Intent.ACTION_TIMEZONE_CHANGED);
//注册广播 意图 和mHandler
            getContext().registerReceiver(mIntentReceiver, filter, null,mHandler);
        }

        // NOTE: It&#39;s safe to do these after registering the receiver since the
        // receiver always runs
        // in the main thread, therefore the receiver can&#39;t run before this
        // method returns.

        // The time zone may have changed while the receiver wasn&#39;t registered,
        // so update the Time
        mCalendar = new Time();

        // 更新当前时间每秒调用一次
        onTimeChanged();

    }

    /* (non-Javadoc)
     * @see android.view.View#onDetachedFromWindow()
     */
    @Override
    protected void onDetachedFromWindow() {
        super.onDetachedFromWindow();
        if (mAttached) {
            getContext().unregisterReceiver(mIntentReceiver);
            mAttached = false;
        }
    }

    /* (non-Javadoc)
     * @see android.view.View#onMeasure(int, int)
     */
    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {

        int widthMode = MeasureSpec.getMode(widthMeasureSpec);
        int widthSize = MeasureSpec.getSize(widthMeasureSpec);
        int heightMode = MeasureSpec.getMode(heightMeasureSpec);
        int heightSize = MeasureSpec.getSize(heightMeasureSpec);

        float hScale = 1.0f;
        float vScale = 1.0f;

        if (widthMode != MeasureSpec.UNSPECIFIED &amp;&amp; widthSize &lt; mDialWidth) {
            hScale = (float) widthSize / (float) mDialWidth;
        }

        if (heightMode != MeasureSpec.UNSPECIFIED &amp;&amp; heightSize &lt; mDialHeight) {
            vScale = (float) heightSize / (float) mDialHeight;
        }

        float scale = Math.min(hScale, vScale);

        setMeasuredDimension(mDialWidth * (int)scale,mDialHeight * (int)scale);
    }

    /* (non-Javadoc)
     * @see android.view.View#onSizeChanged(int, int, int, int)
     */
    @Override
    protected void onSizeChanged(int w, int h, int oldw, int oldh) {
        super.onSizeChanged(w, h, oldw, oldh);
        mChanged = true;
    }

    /* (non-Javadoc)
     * @see android.view.View#onDraw(android.graphics.Canvas)
     */
    @Override
    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);

        boolean changed = mChanged;
        if (changed) {
            mChanged = false;
        }

        int availableWidth = getRight() - getLeft();
        int availableHeight = getBottom() - getTop();

        int x = availableWidth / 2;
        int y = availableHeight / 2;

        final Drawable dial = mDial;
        int w = dial.getIntrinsicWidth();
        int h = dial.getIntrinsicHeight();

        boolean scaled = false;

        if (availableWidth &lt; w || availableHeight &lt; h) {
            scaled = true;
            float scale = Math.min((float) availableWidth / (float) w,
                    (float) availableHeight / (float) h);
            canvas.save();
            canvas.scale(scale, scale, x, y);
        }

        if (changed) {
            dial.setBounds(x - (w / 2), y - (h / 2), x + (w / 2), y + (h / 2));
        }
        dial.draw(canvas);

        //时针
        canvas.save();
        canvas.rotate(mHour / 12.0f * 360.0f, x, y);
        final Drawable hourHand = mHourHand;
        if (changed) {
            w = hourHand.getIntrinsicWidth();
            h = hourHand.getIntrinsicHeight();
            hourHand.setBounds(x - (w / 2), y - (h / 2), x + (w / 2), y
                    + (h / 2));
        }
        hourHand.draw(canvas);
        canvas.restore();

        //分针
        canvas.save();
        canvas.rotate(mMinutes / 60.0f * 360.0f, x, y);

        final Drawable minuteHand = mMinuteHand;
        if (changed) {
            w = minuteHand.getIntrinsicWidth();
            h = minuteHand.getIntrinsicHeight();
            minuteHand.setBounds(x - (w / 2), y - (h / 2), x + (w / 2), y
                    + (h / 2));
        }
        minuteHand.draw(canvas);
        canvas.restore();

        //秒针
        canvas.save();
        canvas.rotate(mSecond / 60.0f * 360.0f, x, y);

        final Drawable secondHand = mSecondHand;
        if (changed) {
            w = secondHand.getIntrinsicWidth();
            h = secondHand.getIntrinsicHeight();
            secondHand.setBounds(x - (w / 2), y - (h / 2), x + (w / 2), y
                    + (h / 2));
        }
        secondHand.draw(canvas);
        canvas.restore();

        if (scaled) {
            canvas.restore();
        }
    }

    /**
     * On time changed.
     */
    private void onTimeChanged() {
        mCalendar.setToNow();

        int hour = mCalendar.hour;
        int minute = mCalendar.minute;
        int second = mCalendar.second;
        mSecond =  second;
        mMinutes = minute + second / 60.0f;
        mHour = hour + mMinutes / 60.0f;
        mChanged = true;
        AbLogUtil.d(AbAnalogClock.class, &quot;时间改变:mHour:&quot;+mHour+&quot;,mMinutes:&quot;+mMinutes+&quot;,mSecond:&quot;+mSecond);
        updateContentDescription(mCalendar);
        new Handler().postDelayed(new Runnable() {

            @Override
            public void run() {
                onTimeChanged();
            }
        }, 1000);
        invalidate();
    }

    /** The m intent receiver. */
    private final BroadcastReceiver mIntentReceiver = new BroadcastReceiver() {
        @Override
        public void onReceive(Context context, Intent intent) {
            if (intent.getAction().equals(Intent.ACTION_TIMEZONE_CHANGED)) {
                String tz = intent.getStringExtra(&quot;time-zone&quot;);
                mCalendar = new Time(TimeZone.getTimeZone(tz).getID());
            }
        }
    };

    /**
     * Update content description.
     *
     * @param time the time
     */
    private void updateContentDescription(Time time) {
        final int flags = DateUtils.FORMAT_SHOW_TIME | DateUtils.FORMAT_24HOUR;
        String contentDescription = DateUtils.formatDateTime(getContext(),
                time.toMillis(false), flags);
        setContentDescription(contentDescription);
    }
}
</code></pre><p>实现的代码</p>
<pre><code>    这个是表壳 时分秒
        Drawable dial = this.getResources().getDrawable(R.drawable.clock_dial);
        Drawable hourHand = this.getResources().getDrawable(R.drawable.clock_hour);
        Drawable minuteHand = this.getResources().getDrawable(R.drawable.clock_minute);
        Drawable secondHand = this.getResources().getDrawable(R.drawable.clock_second);
        AbAnalogClock view = new AbAnalogClock(this, dial, hourHand, minuteHand,secondHand);

        LinearLayout contentLayout = (LinearLayout)this.findViewById(R.id.contentLayout);
        contentLayout.addView(view);
</code></pre><h1 id="8001">1.数字时钟</h1>

<p><a href="#80">返回目录</a></p>
<p>自定义的view控件</p>
<pre><code>package codewarehouse.yzkj.com.ceshi;

/*
 * Copyright (C) 2012 www.amsoft.cn
 *
 * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */


        import java.util.List;
        import java.util.TimeZone;

        import com.ab.util.AbStrUtil;

        import android.content.BroadcastReceiver;
        import android.content.Context;
        import android.content.Intent;
        import android.content.IntentFilter;
        import android.graphics.Canvas;
        import android.graphics.drawable.Drawable;
        import android.os.Handler;
        import android.text.format.DateUtils;
        import android.text.format.Time;
        import android.view.View;

// TODO: Auto-generated Javadoc
/**
 * © 2012 amsoft.cn
 * 名称：AbNumberClock.java
 * 描述：自定义数字时钟的view
 *
 * @author 还如一梦中
 * @version v1.0
 * @date：2013-11-6 上午10:19:42
 */
public class AbNumberClock extends View {

    /** The m calendar. */
    private Time mCalendar;

    /** The m time bg. */
    private Drawable mTimeBg;

    /** The m time colon. */
    private Drawable mTimeColon;

    /** The d time bmp. */
    private List&lt;Drawable&gt; dTimeBmp;

    /** The d apm bmp. */
    private List&lt;Drawable&gt; dApmBmp;

    /** The m time bg width. */
    private int mTimeBgWidth;

    /** The m time bg height. */
    private int mTimeBgHeight;

    /** The m attached. */
    private boolean mAttached;

    /** The m handler. */
    private final Handler mHandler = new Handler();

    /** The m minutes. */
    private String mMinutes;

    /** The m hour. */
    private String mHour;

    /** The m second. */
    private String mSecond;

    /**
     * Instantiates a new ab number clock.
     *  这个是构造器
     * @param context the context
     * @param timeBg the time bg
     * @param timeColon the time colon
     * @param timeBmp the time bmp
     * @param apmBmp the apm bmp
     */
    public AbNumberClock(Context context, Drawable timeBg, Drawable timeColon,
                         List&lt;Drawable&gt; timeBmp, List&lt;Drawable&gt; apmBmp) {
        super(context);

        mTimeBg = timeBg;
        mTimeColon = timeColon;
        dTimeBmp = timeBmp;
        dApmBmp = apmBmp;

        mCalendar = new Time();
//宽度是2个分隔符和6个数字和上下午的标志的宽度的和
        if (!dApmBmp.isEmpty() &amp;&amp; dApmBmp.size() &gt; 0) {
            mTimeBgWidth = 2 * mTimeColon.getIntrinsicWidth() + 6
                    * dTimeBmp.get(0).getIntrinsicWidth()
                    + dApmBmp.get(0).getIntrinsicWidth();
            mTimeBgHeight =  dTimeBmp.get(0).getIntrinsicHeight();
        } else {
            mTimeBgWidth = 2 * mTimeColon.getIntrinsicWidth() + 8
                    * dTimeBmp.get(0).getIntrinsicWidth();
            mTimeBgHeight = dTimeBmp.get(0).getIntrinsicHeight();
        }
    }

    /* (non-Javadoc)
    当把组件放入某个窗口时触发该方法
     * @see android.view.View#onAttachedToWindow()
     */
    @Override
    protected void onAttachedToWindow() {
        super.onAttachedToWindow();

        if (!mAttached) {
            mAttached = true;
            //意图过滤器 过滤三个动作
            IntentFilter filter = new IntentFilter();

            filter.addAction(Intent.ACTION_TIME_TICK);
            filter.addAction(Intent.ACTION_TIME_CHANGED);
            filter.addAction(Intent.ACTION_TIMEZONE_CHANGED);

            getContext().registerReceiver(mIntentReceiver, filter, null,mHandler);
        }

        // NOTE: It&#39;s safe to do these after registering the receiver since the
        // receiver always runs
        // in the main thread, therefore the receiver can&#39;t run before this
        // method returns.

        // The time zone may have changed while the receiver wasn&#39;t registered,
        // so update the Time
        mCalendar = new Time();

        // Make sure we update to the current time
        onTimeChanged();
    }

    /* (non-Javadoc)
    当把该组件从某个窗口分离时触发该方法
     * @see android.view.View#onDetachedFromWindow()
     */
    @Override
    protected void onDetachedFromWindow() {
        super.onDetachedFromWindow();
        if (mAttached) {
            getContext().unregisterReceiver(mIntentReceiver);
            mAttached = false;
        }
    }

    /* (non-Javadoc)
    用来检测view组件和它包含的所有子组件的大小
     * @see android.view.View#onMeasure(int, int)
     */
    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {

        int widthMode = MeasureSpec.getMode(widthMeasureSpec);
        int widthSize = MeasureSpec.getSize(widthMeasureSpec);
        int heightMode = MeasureSpec.getMode(heightMeasureSpec);
        int heightSize = MeasureSpec.getSize(heightMeasureSpec);

        float hScale = 1.0f;
        float vScale = 1.0f;

        if (widthMode != MeasureSpec.UNSPECIFIED &amp;&amp; widthSize &lt; mTimeBgWidth) {
            hScale = (float) widthSize / (float) mTimeBgWidth;
        }

        if (heightMode != MeasureSpec.UNSPECIFIED &amp;&amp; heightSize &lt; mTimeBgHeight) {
            vScale = (float) heightSize / (float) mTimeBgHeight;
        }

        float scale = Math.min(hScale, vScale);
        setMeasuredDimension(mTimeBgWidth * (int)scale,mTimeBgHeight * (int)scale);

        /*setMeasuredDimension(
                resolveSizeAndState((int) (mTimeBgWidth * scale),widthMeasureSpec, 0),
                resolveSizeAndState((int) (mTimeBgHeight * scale),heightMeasureSpec, 0));*/
    }

    /* (non-Javadoc)
    当该组件的大小被改变时，回调该方法
     * @see android.view.View#onSizeChanged(int, int, int, int)
     */
    @Override
    protected void onSizeChanged(int w, int h, int oldw, int oldh) {
        super.onSizeChanged(w, h, oldw, oldh);
    }

    /* (non-Javadoc)
     * @see android.view.View#onDraw(android.graphics.Canvas)
     */
    @Override
    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);

        int availableWidth = getRight() - getLeft();
        int availableHeight = getBottom() - getTop();

        int x = availableWidth / 2;
        int y = availableHeight / 2;
        int w = 0;
        int h = 0;

        if (!dApmBmp.isEmpty() &amp;&amp; dApmBmp.size() &gt; 0) {
            w = 2*mTimeColon.getIntrinsicWidth() + 8
                    * dTimeBmp.get(0).getIntrinsicWidth()
                    + dApmBmp.get(0).getIntrinsicWidth();
            h = dTimeBmp.get(0).getIntrinsicHeight();
        } else {
            w = 2*mTimeColon.getIntrinsicWidth() +  6
                    * dTimeBmp.get(0).getIntrinsicWidth();
            h = dTimeBmp.get(0).getIntrinsicHeight();
        }

        boolean scaled = false;
        if (availableWidth &lt; w || availableHeight &lt; h) {
            scaled = true;
            float scale = Math.min((float) availableWidth / (float) w,
                    (float) availableHeight / (float) h);
            canvas.save();
            canvas.scale(scale, scale, x, y);
        }

        int dis_x = x - (w / 2);
        int dis_y = y - (h / 2);
        if (mTimeBg != null) {
            final Drawable timeBg = mTimeBg;
            timeBg.setBounds(dis_x, dis_y, dis_x + w, dis_y + h);
            timeBg.draw(canvas);
            canvas.save();
        }

        int pos = Integer.parseInt(mHour.substring(0, 1));
        Drawable timeBmp = dTimeBmp.get(pos);
        int numW = timeBmp.getIntrinsicWidth();
        int numH = timeBmp.getIntrinsicHeight();
        timeBmp.setBounds(dis_x, dis_y, dis_x + numW, dis_y + numH);
        timeBmp.draw(canvas);
        pos = Integer.parseInt(mHour.substring(1, 2));
        timeBmp = dTimeBmp.get(pos);
        timeBmp.setBounds(dis_x + numW, dis_y, dis_x + 2 * numW, dis_y + numH);
        timeBmp.draw(canvas);

        final Drawable timeColon = mTimeColon;
        int colonW = timeColon.getIntrinsicWidth();
        int colonH = timeColon.getIntrinsicHeight();
        if (colonH &lt; numH) {
            timeColon.setBounds(dis_x + 2 * numW, dis_y + (numH - colonH) / 2,
                    dis_x + 2 * numW + colonW, dis_y + (numH - colonH) / 2
                            + colonH);
        } else {
            timeColon.setBounds(dis_x + 2 * numW, dis_y, dis_x + 2 * numW
                    + colonW, dis_y + colonH);
        }
        timeColon.draw(canvas);

        pos = Integer.parseInt(mMinutes.substring(0, 1));
        timeBmp = dTimeBmp.get(pos);
        timeBmp.setBounds(dis_x + 2 * numW + colonW, dis_y, dis_x + 3 * numW
                + colonW, dis_y + numH);
        timeBmp.draw(canvas);
        pos = Integer.parseInt(mMinutes.substring(1, 2));
        timeBmp = dTimeBmp.get(pos);
        timeBmp.setBounds(dis_x + 3 * numW + colonW, dis_y, dis_x + 4 * numW
                + colonW, dis_y + numH);
        timeBmp.draw(canvas);

        if (colonH &lt; numH) {
            timeColon.setBounds(dis_x + 4 * numW+colonW, dis_y + (numH - colonH) / 2,
                    dis_x + 4 * numW + 2*colonW, dis_y + (numH - colonH) / 2
                            + colonH);
        } else {
            timeColon.setBounds(dis_x + 4 * numW+colonW, dis_y, dis_x + 4 * numW
                    + 2*colonW, dis_y + colonH);
        }
        timeColon.draw(canvas);

        pos = Integer.parseInt(mSecond.substring(0, 1));
        timeBmp = dTimeBmp.get(pos);
        timeBmp.setBounds(dis_x + 4 * numW + 2*colonW, dis_y, dis_x + 5 * numW
                + 2*colonW, dis_y + numH);
        timeBmp.draw(canvas);
        pos = Integer.parseInt(mSecond.substring(1, 2));
        timeBmp = dTimeBmp.get(pos);
        timeBmp.setBounds(dis_x + 5 * numW + 2*colonW, dis_y, dis_x + 6 * numW
                + 2*colonW, dis_y + numH);
        timeBmp.draw(canvas);

        if (!dApmBmp.isEmpty() &amp;&amp; dApmBmp.size() &gt; 0) {
            if (!get24HourMode()) {
                if (mCalendar.hour &gt; 12) {
                    pos = 1;
                } else {
                    pos = 0;
                }
                timeBmp = dApmBmp.get(pos);
                int apmW = timeBmp.getIntrinsicWidth();
                int apmH = timeBmp.getIntrinsicHeight();
                if (apmH &lt; numH) {
                    timeBmp.setBounds(dis_x + 4 * numW + colonW, dis_y
                            + (numH - apmH) / 2, dis_x + 4 * numW + colonW
                            + apmW, dis_y + (numH - apmH) / 2 + apmH);
                } else {
                    timeBmp.setBounds(dis_x + 4 * numW + colonW, dis_y, dis_x
                            + 4 * numW + colonW + apmW, dis_y + apmH);
                }
                timeBmp.draw(canvas);
            }
        }

        if (scaled) {
            canvas.restore();
        }
    }

    /**
     * Gets the 24 hour mode.
     *
     * @return the 24 hour mode
     */
    private boolean get24HourMode() {
        return android.text.format.DateFormat.is24HourFormat(getContext());
    }

    /**
     * On time changed.
     */
    private void onTimeChanged() {
        mCalendar.setToNow();

        if (!get24HourMode() &amp;&amp; !dApmBmp.isEmpty() &amp;&amp; dApmBmp.size() &gt; 0) {
            if (mCalendar.hour &gt; 12) {
                mHour = String.format(&quot;%02d&quot;, mCalendar.hour - 12);
            } else {
                mHour = String.format(&quot;%02d&quot;, mCalendar.hour);
            }
        } else {
            mHour = String.format(&quot;%02d&quot;, mCalendar.hour);
        }
        mSecond =  AbStrUtil.strFormat2(String.valueOf(mCalendar.second));
        mMinutes = String.format(&quot;%02d&quot;, mCalendar.minute);

        updateContentDescription(mCalendar);
        new Handler().postDelayed(new Runnable() {

            @Override
            public void run() {
                onTimeChanged();
            }
        }, 1000);
        invalidate();
    }

    /** The m intent receiver. 广播接受器*/
    private final BroadcastReceiver mIntentReceiver = new BroadcastReceiver() {
        @Override
        public void onReceive(Context context, Intent intent) {
            if (intent.getAction().equals(Intent.ACTION_TIMEZONE_CHANGED)) {
                String tz = intent.getStringExtra(&quot;time-zone&quot;);
                mCalendar = new Time(TimeZone.getTimeZone(tz).getID());
            }
        }
    };

    /**
     * Update content description.
     *
     * @param time the time
     */
    private void updateContentDescription(Time time) {
        int flags = DateUtils.FORMAT_SHOW_TIME | DateUtils.FORMAT_24HOUR;

        String contentDescription = DateUtils.formatDateTime(this.getContext(),
                time.toMillis(false), flags);
        setContentDescription(contentDescription);
    }
}
</code></pre><p>代码的实现</p>
<pre><code> //  背景和分割字符
        Drawable timeBg = this.getResources().getDrawable(R.drawable.timer_bg);
        Drawable timeColon = this.getResources().getDrawable(R.drawable.timer_colon);

        List&lt;Drawable&gt; dTimeArray = new ArrayList&lt;Drawable&gt;();
        List&lt;Drawable&gt; dApmArray = new ArrayList&lt;Drawable&gt;();
//        这是10个数字
        dTimeArray.add(this.getResources().getDrawable(R.drawable.time0));
        dTimeArray.add(this.getResources().getDrawable(R.drawable.time1));
        dTimeArray.add(this.getResources().getDrawable(R.drawable.time2));
        dTimeArray.add(this.getResources().getDrawable(R.drawable.time3));
        dTimeArray.add(this.getResources().getDrawable(R.drawable.time4));
        dTimeArray.add(this.getResources().getDrawable(R.drawable.time5));
        dTimeArray.add(this.getResources().getDrawable(R.drawable.time6));
        dTimeArray.add(this.getResources().getDrawable(R.drawable.time7));
        dTimeArray.add(this.getResources().getDrawable(R.drawable.time8));
        dTimeArray.add(this.getResources().getDrawable(R.drawable.time9));

        //AM 和PM的图标
        //dApmArray.add(this.getResources().getDrawable(R.drawable.time0));
        //dApmArray.add(this.getResources().getDrawable(R.drawable.time1));


        AbNumberClock view = new AbNumberClock(this, timeBg, timeColon, dTimeArray,dApmArray);
        LinearLayout contentLayout = (LinearLayout)this.findViewById(R.id.contentLayout);
        contentLayout.addView(view);
</code></pre><h1 id="9101">1.台历</h1>

<p><a href="#91">返回目录</a></p>
<pre><code>//        这个是台历的背景
        Drawable caleBg = this.getResources().getDrawable(R.drawable.desk_calendar);
        Drawable caleDot = null;
        Point posYear = new Point(60,80);
//        以下是十个数字年份
        List&lt;Drawable&gt; dYearArray = new ArrayList&lt;Drawable&gt;();
        dYearArray.add(this.getResources().getDrawable(R.drawable.year0));
        dYearArray.add(this.getResources().getDrawable(R.drawable.year1));
        dYearArray.add(this.getResources().getDrawable(R.drawable.year2));
        dYearArray.add(this.getResources().getDrawable(R.drawable.year3));
        dYearArray.add(this.getResources().getDrawable(R.drawable.year4));
        dYearArray.add(this.getResources().getDrawable(R.drawable.year5));
        dYearArray.add(this.getResources().getDrawable(R.drawable.year6));
        dYearArray.add(this.getResources().getDrawable(R.drawable.year7));
        dYearArray.add(this.getResources().getDrawable(R.drawable.year8));
        dYearArray.add(this.getResources().getDrawable(R.drawable.year9));


        Point posMonth = new Point(300,80);
//        这个是月份
        List&lt;Drawable&gt; dMonthArray = new ArrayList&lt;Drawable&gt;();
        dMonthArray.add(this.getResources().getDrawable(R.drawable.month1));
        dMonthArray.add(this.getResources().getDrawable(R.drawable.month2));
        dMonthArray.add(this.getResources().getDrawable(R.drawable.month3));
        dMonthArray.add(this.getResources().getDrawable(R.drawable.month4));
        dMonthArray.add(this.getResources().getDrawable(R.drawable.month5));
        dMonthArray.add(this.getResources().getDrawable(R.drawable.month6));
        dMonthArray.add(this.getResources().getDrawable(R.drawable.month7));
        dMonthArray.add(this.getResources().getDrawable(R.drawable.month8));
        dMonthArray.add(this.getResources().getDrawable(R.drawable.month9));
        dMonthArray.add(this.getResources().getDrawable(R.drawable.month10));
        dMonthArray.add(this.getResources().getDrawable(R.drawable.month11));
        dMonthArray.add(this.getResources().getDrawable(R.drawable.month12));
//        这个是天
        Point posDate = new Point(90,180);
        List&lt;Drawable&gt; dDateArray = new ArrayList&lt;Drawable&gt;();
        dDateArray.add(this.getResources().getDrawable(R.drawable.date0));
        dDateArray.add(this.getResources().getDrawable(R.drawable.date1));
        dDateArray.add(this.getResources().getDrawable(R.drawable.date2));
        dDateArray.add(this.getResources().getDrawable(R.drawable.date3));
        dDateArray.add(this.getResources().getDrawable(R.drawable.date4));
        dDateArray.add(this.getResources().getDrawable(R.drawable.date5));
        dDateArray.add(this.getResources().getDrawable(R.drawable.date6));
        dDateArray.add(this.getResources().getDrawable(R.drawable.date7));
        dDateArray.add(this.getResources().getDrawable(R.drawable.date8));
        dDateArray.add(this.getResources().getDrawable(R.drawable.date9));

        Point posWeek = new Point(322,235);
        List&lt;Drawable&gt; dWeekArray = new ArrayList&lt;Drawable&gt;();

        AbCalendar view = new AbCalendar(this, caleBg, caleDot, posYear, dYearArray,
                posMonth, dMonthArray, posDate, dDateArray, posWeek,
                dWeekArray);

        LinearLayout contentLayout = (LinearLayout)this.findViewById(R.id.contentLayout);
        contentLayout.addView(view);
</code></pre><h1 id="10001">1.我的联系人</h1>

<p><a href="#100">返回目录</a></p>
<p>xml布局文件</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    android:layout_width=&quot;fill_parent&quot;
    android:layout_height=&quot;fill_parent&quot;
    android:background=&quot;@color/gray_white&quot;
    android:orientation=&quot;vertical&quot; &gt;

    &lt;com.ab.view.sliding.AbSlidingSmoothFixTabView
        android:id=&quot;@+id/mAbSlidingTabView&quot;
        android:layout_width=&quot;fill_parent&quot;
        android:layout_height=&quot;fill_parent&quot;/&gt;

&lt;/RelativeLayout&gt;
</code></pre><p>代码的实现</p>
<pre><code> private AbSlidingSmoothFixTabView mAbSlidingTabView = null;



mAbSlidingTabView = (AbSlidingSmoothFixTabView)findViewById(R.id.mAbSlidingTabView);

        //缓存数量
        mAbSlidingTabView.getViewPager().setOffscreenPageLimit(3);

        //禁止滑动
        /*mAbSlidingTabView.getViewPager().setOnTouchListener(new OnTouchListener(){

            @Override
            public boolean onTouch(View v, MotionEvent event) {
                return true;
            }

        });*/

        FragmentLoad page1 = new FragmentLoad();
        ContacterFragment mContacterFragment = new ContacterFragment();
        FragmentLoad page3 = new FragmentLoad();
//        这个是Fragmentd的容器
        List&lt;Fragment&gt; mFragments = new ArrayList&lt;Fragment&gt;();
        mFragments.add(page1);
        mFragments.add(mContacterFragment);
        mFragments.add(page3);

        List&lt;String&gt; tabTexts = new ArrayList&lt;String&gt;();
        tabTexts.add(&quot;会话&quot;);
        tabTexts.add(&quot;好友&quot;);
        tabTexts.add(&quot;群组&quot;);      
        //设置样式
        mAbSlidingTabView.setTabTextSize(15);
        mAbSlidingTabView.setTabColor(Color.BLACK);
        mAbSlidingTabView.setTabSelectedColor(Color.rgb(30, 168, 131));
//        这个是顶部的背景
        mAbSlidingTabView.setTabLayoutBackgroundResource(R.drawable.slide_top);
        //演示增加一组 一组有三个
        mAbSlidingTabView.addItemViews(tabTexts, mFragments);

        mAbSlidingTabView.setTabPadding(20, 8, 20, 8);

          //showProgressDialog();
</code></pre><h1 id="10002">2.ContacterFragment 联系人列表界面</h1>

<p><a href="#100">返回目录</a></p>
<p>xml定义布局</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    android:layout_width=&quot;fill_parent&quot;
    android:layout_height=&quot;fill_parent&quot;
    android:orientation=&quot;vertical&quot; &gt;

    &lt;ExpandableListView
        android:id=&quot;@+id/contact_list&quot;
        android:layout_width=&quot;fill_parent&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:cacheColorHint=&quot;@color/transparent&quot;
        android:childDivider=&quot;@drawable/list_divider&quot;
        android:childIndicator=&quot;@null&quot;
        android:scrollbars=&quot;none&quot; &gt;
    &lt;/ExpandableListView&gt;

    &lt;Button 
        android:id=&quot;@+id/tan&quot;
        android:layout_width=&quot;wrap_content&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:text=&quot;打开会话&quot;/&gt;

&lt;/LinearLayout&gt;
</code></pre><p>代码实现 联系人列表</p>
<pre><code>
package com.andbase.im.activity;

import java.util.ArrayList;
import java.util.List;

import org.jivesoftware.smack.Roster;

import android.app.Fragment;
import android.content.Intent;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.Button;
import android.widget.ExpandableListView;
import android.widget.ExpandableListView.OnChildClickListener;

import com.andbase.R;
import com.andbase.global.MyApplication;
import com.andbase.im.adapter.ContacterExpandableListAdapter;
import com.andbase.im.model.IMRosterGroup;
import com.andbase.im.model.IMUser;
import com.andbase.im.util.IMUtil;
import com.andbase.model.User;

/**
 * 联系人列表界面
 *
 */
public class ContacterFragment extends Fragment {

    private MyApplication application;
    private ContacterActivity mActivity = null;
    private ExpandableListView mListView;
//    这个是两组数据
    private List&lt;String&gt; mGroupNames;
    private List&lt;IMRosterGroup&gt; mIMRosterGroups;

    private User mUser = null;
    private ContacterExpandableListAdapter mContacterListAdapter = null;

    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) { 
         mActivity = (ContacterActivity)this.getActivity();
         application = (MyApplication) mActivity.getApplication();

         View view = inflater.inflate(R.layout.im_contact_list, null);
         mListView = (ExpandableListView) view.findViewById(R.id.contact_list);

         Button b=(Button)view.findViewById(R.id.tan);

         b.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                toChat(&quot;tan&quot;);
            }
        });

         mGroupNames = new ArrayList&lt;String&gt;();
         mIMRosterGroups = new ArrayList&lt;IMRosterGroup&gt;();

         mContacterListAdapter = new ContacterExpandableListAdapter(mActivity, mIMRosterGroups);
         mListView.setAdapter(mContacterListAdapter);

         mListView.setOnChildClickListener(new OnChildClickListener() {

                public boolean onChildClick(ExpandableListView parent, View v,
                        int groupPosition, int childPosition, long id) {
                    IMRosterGroup  mIMRosterGroup  = mIMRosterGroups.get(groupPosition);
                    List&lt;IMUser&gt; mUsers = mIMRosterGroup.getUsers();
                    IMUser user = mUsers.get(childPosition);
                    toChat(user.getName());
                    return true;
                }
        });

        initContacter();

        return view;
    } 


    @Override
    public void onStart() {
        super.onStart();
    }

    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
    }

    public void initContacter(){
        mGroupNames.clear();
        mIMRosterGroups.clear();
        //增加分组
        try {
            Roster mRoster = IMUtil.getRoster();
            mGroupNames.addAll(IMUtil.getGroupNames(mRoster));
            mIMRosterGroups.addAll(IMUtil.getRosterGroups(mRoster));
        } catch (Exception e) {
            e.printStackTrace();
            mGroupNames.clear();
            mIMRosterGroups.clear();
        }
        mContacterListAdapter.notifyDataSetChanged();
        if(mGroupNames.size()&gt;0){
            //扩大在分组列表视图组  将第一个组展开
            mListView.expandGroup(0);
        }

    }

    public void toChat(String userName){
        //进入会话窗口
        Intent chatIntent = new Intent(mActivity,ChatActivity.class);
        chatIntent.putExtra(&quot;USERNAME&quot;, userName);
        startActivity(chatIntent);
    }



}
</code></pre><h1 id="10801">1.与朋友的会话</h1>

<p><a href="#108">返回目录</a></p>
<pre><code>比较难理解，所以没有做看懂，就没有在这里写注释
</code></pre><h1 id="10501">1.重连接服务</h1>

<p><a href="#105">返回目录</a></p>
<pre><code>package com.andbase.im.service;

import org.jivesoftware.smack.XMPPConnection;
import org.jivesoftware.smack.packet.Presence;

import android.app.Service;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.content.SharedPreferences;
import android.net.ConnectivityManager;
import android.os.IBinder;
import android.util.Log;
import android.widget.Toast;

import com.ab.task.AbTask;
import com.ab.task.AbTaskItem;
import com.ab.task.AbTaskListener;
import com.ab.util.AbAppUtil;
import com.andbase.im.global.IMConstant;
import com.andbase.im.util.IMUtil;

/**
 * 重连接服务.
 */
public class ReConnectService extends Service {
    private Context context;

    @Override
    public void onCreate() {
        context = this;
        Log.i(&quot;TAG&quot;, &quot;[服务]重连服务：启动&quot;);
        //意图过滤器
        IntentFilter mFilter = new IntentFilter();
        mFilter.addAction(ConnectivityManager.CONNECTIVITY_ACTION);
        //监听网络状态变化的 广播接收器
        registerReceiver(reConnectionBroadcastReceiver, mFilter);
        super.onCreate();
    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        return super.onStartCommand(intent, flags, startId);
    }

    @Override
    public IBinder onBind(Intent intent) {
        return null;
    }

    @Override
    public void onDestroy() {
        Log.i(&quot;TAG&quot;, &quot;[服务]重连服务：关闭&quot;);
        unregisterReceiver(reConnectionBroadcastReceiver);
        super.onDestroy();
    }
//这个是广播
    BroadcastReceiver reConnectionBroadcastReceiver = new BroadcastReceiver() {

        @Override
        public void onReceive(Context context, Intent intent) {
            String action = intent.getAction();
            if (action.equals(ConnectivityManager.CONNECTIVITY_ACTION)) {
                Log.d(&quot;TAG&quot;, &quot;----监听到网络状态改变----&quot;);
                XMPPConnection connection = IMUtil.getXMPPConnection();
                //网络是否可以连接到网络
                boolean isAvailable = AbAppUtil.isNetworkAvailable(context);
                //分别是网络可用和不可用时的状态
                if (isAvailable) {
                    if (!connection.isConnected()) {
                        reConnect(connection);
                    } else {
                        sendInentAndPre(IMConstant.RECONNECT_STATE_SUCCESS);
                        Toast.makeText(context, &quot;用户已上线!&quot;, Toast.LENGTH_LONG).show();
                    }
                } else {
                    sendInentAndPre(IMConstant.RECONNECT_STATE_FAIL);
                    Toast.makeText(context, &quot;网络断开,用户已离线!&quot;, Toast.LENGTH_LONG).show();
                }
            }

        }

    };

    /**
     * 
     * 递归重连，直连上为止.
     * 
     */
    public void reConnect(final XMPPConnection connection) {
           AbTask task = new AbTask();
           final AbTaskItem item = new AbTaskItem();
           item.setListener(new AbTaskListener(){

                @Override
                public void get(){
                    try{
                        connection.connect();
                    }catch (Exception e){
                        e.printStackTrace();
                    }
                }

                @Override
                public void update(){
                    if (connection.isConnected()) {
                        Presence presence = new Presence(Presence.Type.available);
                        connection.sendPacket(presence);
                        Toast.makeText(context, &quot;用户已上线!&quot;, Toast.LENGTH_LONG).show();
                     }else{
                         reConnect(connection);
                     }
                }

           });

           task.execute(item);
    }

    private void sendInentAndPre(boolean isSuccess) {
        Intent intent = new Intent();
        SharedPreferences preference = getSharedPreferences(IMConstant.IMSHARE,0);
        // 保存在线连接信息
        preference.edit().putBoolean(IMConstant.IS_ONLINE, isSuccess).commit();
        intent.setAction(IMConstant.ACTION_RECONNECT_STATE);
        intent.putExtra(IMConstant.RECONNECT_STATE, isSuccess);
        sendBroadcast(intent);
    }

}
</code></pre><h1 id="10401">1.系统消息服务</h1>

<p><a href="#104">返回目录</a></p>
<pre><code>package com.andbase.im.service;

import org.jivesoftware.smack.PacketListener;
import org.jivesoftware.smack.XMPPConnection;
import org.jivesoftware.smack.filter.MessageTypeFilter;
import org.jivesoftware.smack.packet.Message;
import org.jivesoftware.smack.packet.Message.Type;
import org.jivesoftware.smack.packet.Packet;

import android.app.Service;
import android.content.Context;
import android.content.Intent;
import android.os.IBinder;
import android.util.Log;

import com.ab.util.AbDateUtil;
import com.andbase.global.Constant;
import com.andbase.im.XmppConnectionManager;
import com.andbase.im.dao.IMMsgDao;
import com.andbase.im.global.IMConstant;
import com.andbase.im.model.IMMessage;

/**
 * 
 * 系统消息服务.
 * 
 */
public class IMSystemMsgService extends Service {

    /** 记录日志的标记. */
    private String TAG = IMSystemMsgService.class.getSimpleName();

    /** 记录日志的开关. */
    private boolean D = Constant.DEBUG;

    private Context context;

    private IMMsgDao mIMMsgDao = null;

    @Override
    public void onCreate() {
        context = this;
        Log.i(&quot;TAG&quot;, &quot;[服务]系统消息服务：启动&quot;);
        init();
        super.onCreate();
    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        return super.onStartCommand(intent, flags, startId);
    }

    @Override
    public IBinder onBind(Intent intent) {
        return null;
    }

    @Override
    public void onDestroy() {
        Log.i(&quot;TAG&quot;, &quot;[服务]系统消息服务：关闭&quot;);
        XmppConnectionManager.getInstance().getConnection()
                .removePacketListener(pListener);
        super.onDestroy();
    }

    private void init() {
        //数据业务类
        mIMMsgDao = new IMMsgDao(context);
        XMPPConnection con = XmppConnectionManager.getInstance()
                .getConnection();
        con.addPacketListener(pListener, new MessageTypeFilter(
                Message.Type.normal));
    }

    // 来消息监听
    PacketListener pListener = new PacketListener() {

        @Override
        public void processPacket(Packet packetz) {
            Message message = (Message) packetz;
            if (message != null &amp;&amp; message.getBody() != null
                    &amp;&amp; !message.getBody().equals(&quot;null&quot;)) {
                if (message.getType() == Type.normal) {

                    Log.i(&quot;TAG&quot;, &quot;[服务]收到系统消息：&quot;+message.getBody());

                    // 生成消息历史记录
                    IMMessage mIMMessage = new IMMessage();
                    mIMMessage.setTitle(&quot;系统信息&quot;);
                    mIMMessage.setContent(message.getBody());

                    if (Message.Type.error == message.getType()) {
                        mIMMessage.setSendState(IMMessage.FAILED);
                    } else {
                        mIMMessage.setSendState(IMMessage.RECEIVED);
                    }
                    mIMMessage.setType(IMMessage.SYS_MSG);

                    String from = message.getFrom().split(&quot;@&quot;)[0];
                    //发送方
                    mIMMessage.setUserName(from);
                    //接收方
                    mIMMessage.setToUserName(message.getTo().split(&quot;@&quot;)[0]);

                    mIMMessage.setReadState(IMMessage.UNREAD);

                    String time = AbDateUtil.getCurrentDate(AbDateUtil.dateFormatYMDHMS);
                    mIMMessage.setTime(time);

                    //保存本地
                    mIMMsgDao.startWritableDatabase(false);
                    long messageId = mIMMsgDao.insert(mIMMessage);
                    mIMMsgDao.closeDatabase();

                    if (messageId != -1) {
                        //发出接收到的系统消息
                        Intent intent = new Intent();
                        intent.setAction(IMConstant.ACTION_NEW_MESSAGE);
                        intent.setAction(IMConstant.ACTION_SYS_MESSAGE);
                        intent.putExtra(&quot;MESSAGE&quot;, mIMMessage);
                        sendBroadcast(intent);

                    }

                }
            }
        }
    };


}
</code></pre><h1 id="10301">1.聊天服务</h1>

<p><a href="#103">返回目录</a></p>
<pre><code>package com.andbase.im.service;

import org.jivesoftware.smack.PacketListener;
import org.jivesoftware.smack.XMPPConnection;
import org.jivesoftware.smack.filter.MessageTypeFilter;
import org.jivesoftware.smack.packet.Message;
import org.jivesoftware.smack.packet.Packet;

import android.app.Service;
import android.content.Context;
import android.content.Intent;
import android.os.IBinder;
import android.util.Log;

import com.ab.util.AbDateUtil;
import com.andbase.global.Constant;
import com.andbase.im.XmppConnectionManager;
import com.andbase.im.dao.IMMsgDao;
import com.andbase.im.global.IMConstant;
import com.andbase.im.model.IMMessage;
import com.andbase.im.util.IMUtil;

/**
 * 
 * 聊天服务.
 */
public class IMChatService extends Service {

    /** 记录日志的标记. */
    private String TAG = IMChatService.class.getSimpleName();

    /** 记录日志的开关. */
    private boolean D = Constant.DEBUG;

    private Context context;
    private IMMsgDao mIMMsgDao = null;

    @Override
    public void onCreate() {
        context = this;
        Log.i(&quot;TAG&quot;, &quot;[服务]会话服务：启动&quot;);
        init();
        super.onCreate();
    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        return super.onStartCommand(intent, flags, startId);
    }

    @Override
    public IBinder onBind(Intent intent) {
        return null;
    }

    @Override
    public void onDestroy() {
        Log.i(&quot;TAG&quot;, &quot;[服务]会话服务：关闭&quot;);
        super.onDestroy();
    }

    private void init() {
        //数据业务类
        mIMMsgDao = new IMMsgDao(context);
        XMPPConnection conn = XmppConnectionManager.getInstance()
                .getConnection();
        conn.addPacketListener(pListener, new MessageTypeFilter(
                Message.Type.chat));


    }

    /**监听到消息*/
    PacketListener pListener = new PacketListener() {

        @Override
        public void processPacket(Packet arg0) {
            Message message = (Message) arg0;
            if (message != null &amp;&amp; message.getBody() != null
                    &amp;&amp; !message.getBody().equals(&quot;null&quot;)) {

                Log.i(&quot;TAG&quot;, &quot;[服务]收到会话消息：&quot;+message.getBody());

                // 生成消息历史记录
                IMMessage mIMMessage = new IMMessage();
                mIMMessage.setTitle(&quot;会话信息&quot;);
                mIMMessage.setContent(message.getBody());

                if (Message.Type.error == message.getType()) {
                    mIMMessage.setSendState(IMMessage.FAILED);
                } else {
                    mIMMessage.setSendState(IMMessage.RECEIVED);
                }
                mIMMessage.setType(IMMessage.CHAT_MSG);

                String from = IMUtil.getUserNameByJid(message.getFrom());
                //发送方
                mIMMessage.setUserName(from);
                //接收方
                mIMMessage.setToUserName(IMUtil.getUserNameByJid(message.getTo()));

                mIMMessage.setReadState(IMMessage.UNREAD);

                String time = AbDateUtil.getCurrentDate(AbDateUtil.dateFormatYMDHMS);
                mIMMessage.setTime(time);

                //保存本地
                mIMMsgDao.startWritableDatabase(false);
                long messageId = mIMMsgDao.insert(mIMMessage);
                mIMMsgDao.closeDatabase();

                if (messageId != -1) {
                    //发出接收到会话的消息
                    Intent intent = new Intent();
                    intent.setAction(IMConstant.ACTION_NEW_MESSAGE);
                    intent.setAction(IMConstant.ACTION_CHAT_MESSAGE);
                    intent.putExtra(&quot;MESSAGE&quot;, mIMMessage);
                    sendBroadcast(intent);

                }

            }

        }

    };

}
</code></pre><h1 id="10201">1.联系人服务</h1>

<p><a href="#102">返回目录</a></p>
<pre><code>package com.andbase.im.service;

import java.util.Collection;

import org.jivesoftware.smack.PacketListener;
import org.jivesoftware.smack.Roster;
import org.jivesoftware.smack.Roster.SubscriptionMode;
import org.jivesoftware.smack.RosterEntry;
import org.jivesoftware.smack.RosterListener;
import org.jivesoftware.smack.filter.PacketFilter;
import org.jivesoftware.smack.packet.Packet;
import org.jivesoftware.smack.packet.Presence;

import android.app.Service;
import android.content.Context;
import android.content.Intent;
import android.os.IBinder;
import android.util.Log;

import com.ab.util.AbDateUtil;
import com.andbase.global.Constant;
import com.andbase.im.dao.IMMsgDao;
import com.andbase.im.global.IMConstant;
import com.andbase.im.model.IMMessage;
import com.andbase.im.model.IMUser;
import com.andbase.im.util.IMUtil;

/**
 * 
 * 联系人服务.
 * 
 */
public class IMContactService extends Service {

    /** 记录日志的标记. */
    private String TAG = IMContactService.class.getSimpleName();

    /** 记录日志的开关. */
    private boolean D = Constant.DEBUG;

    private Roster roster = null;
    private Context context;
    private IMMsgDao mIMMsgDao = null;

    @Override
    public void onCreate() {
        context = this;
        Log.i(&quot;TAG&quot;, &quot;[服务]联系人服务：启动&quot;);
        init();
        addSubscriptionListener();
        super.onCreate();
    }

    @Override
    public IBinder onBind(Intent intent) {
        return null;
    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        return super.onStartCommand(intent, flags, startId);
    }

    private void init() {
        initRoster();
    }

    /**
     * 添加一个监听，监听好友添加请求。
     */
    private void addSubscriptionListener() {
        PacketFilter filter = new PacketFilter() {
            @Override
            public boolean accept(Packet packet) {
                if (packet instanceof Presence) {
                    Presence presence = (Presence) packet;
                    if (presence.getType().equals(Presence.Type.subscribe)) {
                        return true;
                    }
                }
                return false;
            }
        };
        IMUtil.getXMPPConnection()
                .addPacketListener(subscriptionPacketListener, filter);
    }

    /**
     * 初始化花名册 服务重启时，更新花名册
     */
    private void initRoster() {
        roster = IMUtil.getRoster();
        roster.removeRosterListener(rosterListener);
        roster.addRosterListener(rosterListener);
        IMUtil.updateContacterList();
        //数据业务类
        mIMMsgDao = new IMMsgDao(context);

    }

    private PacketListener subscriptionPacketListener = new PacketListener() {

        @Override
        public void processPacket(Packet packet) {

            Log.i(&quot;TAG&quot;, &quot;[服务]收到联系人消息：&quot;+packet.getFrom());

            //在登录中保存的
            String user = getSharedPreferences(IMConstant.IMSHARE, 0)
                    .getString(IMConstant.USERNAME, null);
            if (packet.getFrom().contains(user))
                return;


            // 如果是自动接收所有请求，则回复一个添加信息
            if (Roster.getDefaultSubscriptionMode().equals(
                    SubscriptionMode.accept_all)) {
                Presence subscription = new Presence(Presence.Type.subscribe);
                subscription.setTo(packet.getFrom());
                IMUtil.getXMPPConnection()
                        .sendPacket(subscription);
            } else {
                // 生成消息历史记录
                IMMessage mIMMessage = new IMMessage();
                mIMMessage.setTitle(&quot;好友请求&quot;);
                String from = IMUtil.getUserNameByJid(packet.getFrom());
                mIMMessage.setContent(from + &quot;申请加您为好友&quot;);

                Log.i(&quot;TAG&quot;, &quot;[服务]收到好友请求：&quot;+from + &quot;申请加您为好友&quot;);

                mIMMessage.setSendState(IMMessage.RECEIVED);
                mIMMessage.setType(IMMessage.ADD_FRIEND_MSG);

                //发送方
                mIMMessage.setUserName(from);
                //接收方
                mIMMessage.setToUserName(IMUtil.getUserNameByJid(packet.getTo()));

                mIMMessage.setReadState(IMMessage.UNREAD);
                mIMMessage.setRequestState(IMMessage.ALL);
                String time = AbDateUtil.getCurrentDate(AbDateUtil.dateFormatYMDHMS);
                mIMMessage.setTime(time);

                //保存本地
                mIMMsgDao.startWritableDatabase(false);
                long messageId = mIMMsgDao.insert(mIMMessage);
                mIMMsgDao.closeDatabase();
                if (messageId != -1) {
                    //发出接收到会话的消息
                    Intent intent = new Intent();
                    intent.setAction(IMConstant.ACTION_ROSTER_SUBSCRIPTION);
                    intent.putExtra(&quot;MESSAGE&quot;, mIMMessage);
                    sendBroadcast(intent);

                }
            }
        }
    };


    @Override
    public void onDestroy() {
        Log.i(&quot;TAG&quot;, &quot;[服务]联系人服务：关闭&quot;);
        // 释放资源
        IMUtil.getXMPPConnection()
                .removePacketListener(subscriptionPacketListener);
        IMUtil.destroyContacterList();
        super.onDestroy();
    }

    private RosterListener rosterListener = new RosterListener() {

        @Override
        public void presenceChanged(Presence presence) {
            Intent intent = new Intent();
            intent.setAction(IMConstant.ACTION_ROSTER_PRESENCE_CHANGED);
            String subscriber = presence.getFrom().substring(0,
                    presence.getFrom().indexOf(&quot;/&quot;));
            RosterEntry entry = roster.getEntry(subscriber);
            if (IMUtil.contacters.containsKey(subscriber)) {
                // 将状态改变之前的user广播出去
                intent.putExtra(IMUser.USERKEY,
                        IMUtil.contacters.get(subscriber));
                IMUtil.contacters.remove(subscriber);
                IMUtil.contacters.put(subscriber,
                        IMUtil.transEntryToUser(entry, roster));
            }
            sendBroadcast(intent);
        }

        @Override //更新联系人
        public void entriesUpdated(Collection&lt;String&gt; addresses) {
            for (String address : addresses) {
                Intent intent = new Intent();
                intent.setAction(IMConstant.ACTION_ROSTER_UPDATED);
                // 获得状态改变的entry
                RosterEntry userEntry = roster.getEntry(address);
                IMUser user = IMUtil
                        .transEntryToUser(userEntry, roster);
                if (IMUtil.contacters.get(address) != null) {
                    // 这里发布的是更新前的user
                    intent.putExtra(IMUser.USERKEY,
                            IMUtil.contacters.get(address));
                    // 将发生改变的用户更新到userManager
                    IMUtil.contacters.remove(address);
                    IMUtil.contacters.put(address, user);
                }
                sendBroadcast(intent);
                // 用户更新，getEntries会更新
                // roster.getUnfiledEntries中的entry不会更新
            }
        }

        @Override //删除联系人
        public void entriesDeleted(Collection&lt;String&gt; addresses) {
            for (String address : addresses) {
                Intent intent = new Intent();
                intent.setAction(IMConstant.ACTION_ROSTER_DELETED);
                IMUser user = null;
                if (IMUtil.contacters.containsKey(address)) {
                    user = IMUtil.contacters.get(address);
                    IMUtil.contacters.remove(address);
                }
                intent.putExtra(IMUser.USERKEY, user);
                sendBroadcast(intent);
            }
        }

        @Override //添加联系人
        public void entriesAdded(Collection&lt;String&gt; addresses) {
            for (String address : addresses) {
                Intent intent = new Intent();
                intent.setAction(IMConstant.ACTION_ROSTER_ADDED);
                RosterEntry userEntry = roster.getEntry(address);
                IMUser user = IMUtil
                        .transEntryToUser(userEntry, roster);
                IMUtil.contacters.put(address, user);
                intent.putExtra(IMUser.USERKEY, user);
                sendBroadcast(intent);
            }
        }
    };



}
</code></pre><h1 id="10901">1.接收消息的广播接受器</h1>

<p><a href="#109">返回目录</a></p>
<pre><code>package com.andbase.im.receiver;

import android.app.Notification;
import android.app.NotificationManager;
import android.app.PendingIntent;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.util.Log;

import com.ab.db.storage.AbSqliteStorage;
import com.andbase.R;
import com.andbase.friend.UserDao;
import com.andbase.im.activity.MessageActivity;
import com.andbase.im.model.IMMessage;
import com.andbase.main.MainActivity;

public class IMMessageReceiver extends BroadcastReceiver {

    private final static String TAG = &quot;PushMessageReceiver&quot;;
    //通知管理器
    private NotificationManager mNotificationManager;
    //通知的id
    private static int NOTIFICATIONS_ID = R.layout.main;
    //数据库操作类
    public AbSqliteStorage mAbSqliteStorage = null;
    public UserDao mUserDao = null;

    @Override
    public void onReceive(Context context, Intent intent) {

        IMMessage mIMMessage = (IMMessage)intent.getParcelableExtra(&quot;MESSAGE&quot;);
        if(mIMMessage!=null){

             //获取通知管理器
            mNotificationManager = (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);
            //设置通知的图标与提示的内容
            Notification notification = new Notification(R.drawable.ic_launcher,&quot;新消息&quot;,System.currentTimeMillis());
            //点击跳转
            Intent mIntent  = null;
            if(mIMMessage.getType()==IMMessage.ADD_FRIEND_MSG){
                Log.d(TAG, &quot;[广播接收器]收到了好友请求:&quot; + mIMMessage.getContent());
                mIntent  = new Intent(context, MessageActivity.class);
            }else if(mIMMessage.getType()==IMMessage.CHAT_MSG){
                Log.d(TAG, &quot;[广播接收器]收到了会话消息:&quot; + mIMMessage.getContent());
                mIntent  = new Intent(context, MainActivity.class);
                mIntent.putExtra(&quot;USERNAME&quot;, mIMMessage.getUserName());
                mIntent.putExtra(&quot;TYPE&quot;,mIMMessage.getType());
            }else if(mIMMessage.getType()==IMMessage.SYS_MSG){
                Log.d(TAG, &quot;[广播接收器]收到了系统消息:&quot; + mIMMessage.getContent());
                mIntent  = new Intent(context, MessageActivity.class);
            }

            PendingIntent contentIntent = PendingIntent.getActivity(context, 0,mIntent, 0);

            //设置通知的标题与显示的内容及点击通知后的跳转
            notification.setLatestEventInfo(context,mIMMessage.getUserName(), mIMMessage.getContent(), contentIntent);
            //点击notification之后，该notification自动消失
            notification.flags = Notification.FLAG_AUTO_CANCEL;
            //notification被notify的时候，触发默认声音和默认震动
            notification.defaults = Notification.DEFAULT_SOUND|Notification.DEFAULT_VIBRATE;
            //显示通知
            mNotificationManager.notify(NOTIFICATIONS_ID, notification);

        }else{
            Log.d(TAG, &quot;收到了消息:空&quot;);
        }


    }


}
</code></pre><h1 id="10101">1.系统通知 分配从数据库加载数据</h1>

<p><a href="#101">返回目录</a></p>
<pre><code>package com.andbase.im.activity;

import java.util.ArrayList;
import java.util.List;

import android.os.Bundle;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ImageView;
import android.widget.ListView;
import android.widget.Toast;

import com.ab.activity.AbActivity;
import com.ab.db.storage.AbSqliteStorage;
import com.ab.db.storage.AbSqliteStorageListener.AbDataSelectListener;
import com.ab.db.storage.AbStorageQuery;
import com.ab.util.AbToastUtil;
import com.ab.view.pullview.AbPullToRefreshView;
import com.ab.view.pullview.AbPullToRefreshView.OnFooterLoadListener;
import com.ab.view.pullview.AbPullToRefreshView.OnHeaderRefreshListener;
import com.ab.view.titlebar.AbTitleBar;
import com.andbase.R;
import com.andbase.global.MyApplication;
import com.andbase.im.adapter.MessageListAdapter;
import com.andbase.im.dao.IMMsgDao;
import com.andbase.im.model.IMMessage;
/**
 * 消息列表界面
 *
 */
public class MessageActivity extends AbActivity implements OnHeaderRefreshListener,OnFooterLoadListener{

    private MyApplication application;
    private List&lt;IMMessage&gt; list = null;
    private AbPullToRefreshView mAbPullToRefreshView = null;
    private ListView mListView = null;
    private MessageListAdapter myListViewAdapter = null;
    //每一页显示的行数
    public int pageSize = 10;
    //当前页数
    public int pageNum = 1;

    //数据库操作类
    private AbSqliteStorage mAbSqliteStorage = null;
    private IMMsgDao mIMMsgDao = null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setAbContentView(R.layout.im_message_list);

        AbTitleBar mAbTitleBar = this.getTitleBar();
        mAbTitleBar.setTitleText(R.string.message_name);
        mAbTitleBar.setLogo(R.drawable.button_selector_back);
        mAbTitleBar.setTitleBarBackground(R.drawable.top_bg);
        mAbTitleBar.setTitleTextMargin(10, 0, 0, 0);
        mAbTitleBar.setLogoLine(R.drawable.line);

        ImageView ii=new ImageView(this);
        ii.setImageResource(R.drawable.button_selector_back);
        ii.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                Toast.makeText(MessageActivity.this,&quot;你好&quot;, 1).show();
            }
        });
        mAbTitleBar.addRightView(ii);

        application = (MyApplication) getApplication();

        //初始化AbSqliteStorage
        mAbSqliteStorage = AbSqliteStorage.getInstance(this);
        //数据业务类
        mIMMsgDao = new IMMsgDao(this);

        //获取ListView对象
        mAbPullToRefreshView = (AbPullToRefreshView)this.findViewById(R.id.mPullRefreshView);
        mListView = (ListView)this.findViewById(R.id.mListView);

        //打开关闭下拉刷新加载更多功能
        mAbPullToRefreshView.setOnHeaderRefreshListener(this);
        mAbPullToRefreshView.setOnFooterLoadListener(this);

        //设置进度条的样式
        mAbPullToRefreshView.getHeaderView().setHeaderProgressBarDrawable(this.getResources().getDrawable(R.drawable.progress_circular));
        mAbPullToRefreshView.getFooterView().setFooterProgressBarDrawable(this.getResources().getDrawable(R.drawable.progress_circular));
        //mAbPullListView.getHeaderView().setHeaderProgressBarDrawable(this.getResources().getDrawable(R.drawable.progress_circular2));
        //mAbPullListView.getFooterView().setFooterProgressBarDrawable(this.getResources().getDrawable(R.drawable.progress_circular2));

        //ListView数据
        list = new ArrayList&lt;IMMessage&gt;();

        //使用自定义的Adapter 
        myListViewAdapter = new MessageListAdapter(this,list);
        mListView.setAdapter(myListViewAdapter);
        //item被点击事件
        mListView.setOnItemClickListener(new OnItemClickListener(){
           @Override
           public void onItemClick(AdapterView&lt;?&gt; parent, View view,
                   int position, long id) {
           }
        });

    }

    @Override
    protected void onResume(){
        //第一次下载数据
        list.clear();
        queryData(0);

        super.onResume();
    }

    @Override
    public void onHeaderRefresh(AbPullToRefreshView view) {
        pageNum = 1;
        list.clear();
        queryData(0);
    }

    @Override
    public void onFooterLoad(AbPullToRefreshView view) {
        pageNum ++;
        queryData(1);
    }

//这个是从数据库查询数据  query是0则表示刷新
    public void queryData(final int query){
        //查询数据 类型是以下两种
        AbStorageQuery mAbStorageQuery = new AbStorageQuery();
        mAbStorageQuery.equals(&quot;type&quot;, IMMessage.SYS_MSG);

        AbStorageQuery mAbStorageQuery2 = new AbStorageQuery();
        mAbStorageQuery2.equals(&quot;type&quot;, IMMessage.ADD_FRIEND_MSG);

        mAbStorageQuery.or(mAbStorageQuery2);
       // 每次加载10条
        mAbStorageQuery.setLimit(pageSize);
        //从第几个数据开始加载
        mAbStorageQuery.setOffset((pageNum-1)*pageSize);

        //无sql存储的查询
        mAbSqliteStorage.findData(mAbStorageQuery, mIMMsgDao, new AbDataSelectListener(){

            @Override
            public void onFailure(int errorCode, String errorMessage) {
                AbToastUtil.showToast(MessageActivity.this,errorMessage);
            }

            @Override
            public void onSuccess(List&lt;?&gt; paramList) {
                if(query==0){
                    if(paramList!=null &amp;&amp; paramList.size()&gt;0){
                        list.addAll((List&lt;IMMessage&gt; )paramList);
                        myListViewAdapter.notifyDataSetChanged();
                    }
                    mAbPullToRefreshView.onHeaderRefreshFinish();
                }else{
                    if(paramList!=null){
                        list.addAll((List&lt;IMMessage&gt;)paramList);
                        myListViewAdapter.notifyDataSetChanged();
                    }
                    mAbPullToRefreshView.onFooterLoadFinish();
                }

            }

        });

    }

}
</code></pre><h1 id="0301">1.类 MainActivity主页</h1>

<p><a href="#1">返回目录</a></p>
<p><img src="http://i.imgur.com/qgoGTaJ.png" alt=""><br>xml文件</p>
<pre><code>&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    xmlns:tools=&quot;http://schemas.android.com/tools&quot;
    android:layout_width=&quot;match_parent&quot;
    android:layout_height=&quot;match_parent&quot;
    android:orientation=&quot;vertical&quot;
    tools:context=&quot;.MainActivity&quot;&gt;

    &lt;ProgressBar
        android:id=&quot;@+id/progress_bar&quot;
        style=&quot;?android:progressBarStyleHorizontal&quot;
        android:layout_width=&quot;fill_parent&quot;
        android:layout_height=&quot;8dip&quot;
        android:max=&quot;100&quot;
        android:progress=&quot;0&quot;
        android:progressDrawable=&quot;@drawable/progress_horizontal_img&quot;
        android:visibility=&quot;gone&quot; /&gt;

    &lt;WebView
        android:id=&quot;@+id/webView&quot;
        android:layout_width=&quot;fill_parent&quot;
        android:layout_height=&quot;fill_parent&quot;/&gt;

&lt;/LinearLayout&gt;
</code></pre><p>右边的按钮</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    android:layout_width=&quot;48dp&quot;
    android:layout_height=&quot;wrap_content&quot;
    android:orientation=&quot;horizontal&quot; &gt;

    &lt;ImageButton
        android:id=&quot;@+id/line1&quot;
        android:layout_width=&quot;1dip&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:layout_gravity=&quot;center_vertical&quot;
        android:background=&quot;@drawable/line&quot;
        android:scaleType=&quot;fitCenter&quot; /&gt;

    &lt;Button
        android:id=&quot;@+id/moreBtn&quot;
        android:layout_width=&quot;48dp&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:layout_gravity=&quot;center_horizontal|center_vertical&quot;
        android:background=&quot;@drawable/button_selector_more&quot; /&gt;

&lt;/LinearLayout&gt;
</code></pre><p>源代码的实现</p>
<pre><code>package com.tyq.StudyDiary;

import android.app.Activity;
import android.content.Intent;
import android.graphics.Bitmap;
import android.os.Handler;
import android.support.v7.app.ActionBarActivity;
import android.os.Bundle;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.view.ViewGroup;
import android.webkit.JsPromptResult;
import android.webkit.JsResult;
import android.webkit.WebChromeClient;
import android.webkit.WebSettings;
import android.webkit.WebView;
import android.webkit.WebViewClient;
import android.widget.Button;
import android.widget.LinearLayout;
import android.widget.ProgressBar;
import android.widget.RelativeLayout;

import com.ab.activity.AbActivity;
import com.ab.util.AbToastUtil;
import com.ab.view.titlebar.AbTitleBar;


public class MainActivity extends AbActivity {
    // 标题栏
    private AbTitleBar mAbTitleBar = null;
    // 主界面
    private WebView mWebView = null;
    //进度条
    private ProgressBar mProgressBar = null;
    //访问的网址
    String url = &quot;https://tanyinqing.github.io/&quot;;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setAbContentView(R.layout.activity_main);
        //初始化标题
        initTitle();
        //初始化右边标题
        initTitleRightLayout();

        mWebView = (WebView)findViewById(R.id.webView);
        mProgressBar = (ProgressBar)findViewById(R.id.progress_bar);
        // 设置支持JavaScript脚本
        WebSettings webSettings = mWebView.getSettings();
        webSettings.setJavaScriptEnabled(true);
        // 设置可以访问文件
        webSettings.setAllowFileAccess(true);
        // 设置可以支持缩放
        webSettings.setSupportZoom(true);
        // 设置默认缩放方式尺寸是far
        webSettings.setDefaultZoom(WebSettings.ZoomDensity.MEDIUM);
        // 设置出现缩放工具
        webSettings.setBuiltInZoomControls(false);
        webSettings.setDefaultFontSize(24);

        // 回到首页
        mWebView.loadUrl(url);

        // 设置WebViewClient
        mWebView.setWebViewClient(new WebViewClient() {
            // url拦截
            @Override
            public boolean shouldOverrideUrlLoading(WebView view, String url) {
                // 使用自己的WebView组件来响应Url加载事件，而不是使用默认浏览器器加载页面
                view.loadUrl(url);
                // 相应完成返回true
                return true;
                // return super.shouldOverrideUrlLoading(view, url);
            }

            // 页面开始加载  显示进度条
            @Override
            public void onPageStarted(WebView view, String url, Bitmap favicon) {
                mProgressBar.setVisibility(View.VISIBLE);
                super.onPageStarted(view, url, favicon);
            }

            // 页面加载完成  隐藏进度条
            @Override
            public void onPageFinished(WebView view, String url) {
                mProgressBar.setVisibility(View.GONE);
                super.onPageFinished(view, url);
            }

            // WebView加载的所有资源url
            @Override
            public void onLoadResource(WebView view, String url) {
                super.onLoadResource(view, url);
            }

            @Override
            public void onReceivedError(WebView view, int errorCode,
                                        String description, String failingUrl) {
                super.onReceivedError(view, errorCode, description, failingUrl);
            }

        });

        // 设置WebChromeClient
        mWebView.setWebChromeClient(new WebChromeClient() {
            @Override
            // 处理javascript中的alert
            public boolean onJsAlert(WebView view, String url, String message,
                                     final JsResult result) {
                return super.onJsAlert(view, url, message, result);
            };

            @Override
            // 处理javascript中的confirm
            public boolean onJsConfirm(WebView view, String url,
                                       String message, final JsResult result) {
                return super.onJsConfirm(view, url, message, result);
            };

            @Override
            // 处理javascript中的prompt
            public boolean onJsPrompt(WebView view, String url, String message,
                                      String defaultValue, final JsPromptResult result) {
                return super.onJsPrompt(view, url, message, defaultValue,
                        result);
            };

            // 设置网页加载的进度条  不断跟新进度条
            @Override
            public void onProgressChanged(WebView view, int newProgress) {
                mProgressBar.setProgress(newProgress);
                super.onProgressChanged(view, newProgress);
            }

            // 设置程序的Title
            @Override
            public void onReceivedTitle(WebView view, String title) {
                super.onReceivedTitle(view, title);
            }
        });
    }

    private Boolean isExit = false;
    /**
     * 描述：返回.
     */
    @Override
    public void onBackPressed() {
            if (canBack()) {//如果网页不能够回退
                if (isExit == false) {//如果是2秒内第一次按返回键
                    isExit = true;
                    AbToastUtil.showToast(MainActivity.this,&quot;再按一次退出程序&quot;);
                    new Handler().postDelayed(new Runnable(){

                        @Override
                        public void run() {
                            isExit = false;
                        }

                    }, 2000);
                } else {//如果是2秒内第二次按返回键
                    super.onBackPressed();
                }
            }
    }

    /**
     *
     * 描述：页面是否能退回
     * @return
     * @throws
     * @date：2013-12-13 上午11:06:58
     * @version v1.0
     */
    public boolean canBack(){
        if(mWebView.canGoBack()){
            mWebView.goBack();
            return false;
        }
        return true;
    }

    private void initTitle() {
        mAbTitleBar = this.getTitleBar();
        mAbTitleBar.setTitleText(R.string.im_login);
        mAbTitleBar.setLogo(R.drawable.button_selector_back);
        mAbTitleBar.setTitleBarBackground(R.drawable.top_bg);
        mAbTitleBar.setTitleTextMargin(10, 0, 0, 0);
        mAbTitleBar.setLogoLine(R.drawable.line);
        //限制标题栏的高
        RelativeLayout.LayoutParams buttonParams = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.MATCH_PARENT, DensityUtil.dip2px(this, 48));
        buttonParams.setMargins(0, 0, 0, 0);
        mAbTitleBar.setLayoutParams(buttonParams);
        mAbTitleBar.setPadding(0, 0, 0, 0);
//这个是现在返回键的大小
        RelativeLayout.LayoutParams mTitleLogoViewParams = new RelativeLayout.LayoutParams(DensityUtil.dip2px(this, 48),DensityUtil.dip2px(this, 48));
        mTitleLogoViewParams.setMargins(0, 0, 0, 0);
        mAbTitleBar.getLogoView().setLayoutParams(mTitleLogoViewParams);

//这个是分割的竖线
        RelativeLayout.LayoutParams mTitleLogoLineParams = new RelativeLayout.LayoutParams(DensityUtil.dip2px(this, 2),DensityUtil.dip2px(this, 48));
        mTitleLogoLineParams.addRule(RelativeLayout.RIGHT_OF, mAbTitleBar.getLogoView().getId());
        mTitleLogoLineParams.setMargins(DensityUtil.dip2px(this, 48), 0, 0, 0);
        mAbTitleBar.getChildAt(1).setLayoutParams(mTitleLogoLineParams);

        mAbTitleBar.getLogoView().setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View arg0) {
                // 回到首页
                mWebView.loadUrl(url);
            }
        });
    }

    private void initTitleRightLayout() {
        mAbTitleBar.clearRightView();

        //
        LinearLayout.LayoutParams buttonRightParams = new LinearLayout.LayoutParams(DensityUtil.dip2px(this, 888), DensityUtil.dip2px(this, 48));
        mAbTitleBar.getRightLayout().setOrientation(LinearLayout.HORIZONTAL);
        buttonRightParams.setMargins(0, 0, 0, 0);
        // 缓存的rootView需要判断是否已经被加过parent，
        // 如果有parent需要从parent删除，要不然会发生这个rootview已经有parent的错误。
        ViewGroup parent = (ViewGroup) mAbTitleBar.getRightLayout().getParent();
        if (parent != null)
        {
            parent.removeView(mAbTitleBar.getRightLayout());
        }
        mAbTitleBar.getRightLayout().setLayoutParams(buttonRightParams);

        //这个是现在返回键的大小
        RelativeLayout.LayoutParams mTitleLogoViewParams = new RelativeLayout.LayoutParams(DensityUtil.dip2px(this, 48),DensityUtil.dip2px(this, 48));
        mTitleLogoViewParams.setMargins(0, 0, 0, 0);

        View rightViewMore = mInflater.inflate(R.layout.more_btn, null);
        //显示的是下面这个
        View rightViewApp = mInflater.inflate(R.layout.app_btn, null);
        /*rightViewMore.setLayoutParams(mTitleLogoViewParams);
        rightViewApp.setLayoutParams(mTitleLogoViewParams);*/
       // mAbTitleBar.addRightView(rightViewApp);
        mAbTitleBar.addRightView(rightViewMore);
        Button about = (Button) rightViewMore.findViewById(R.id.moreBtn);
        Button appBtn = (Button) rightViewApp.findViewById(R.id.appBtn);

        appBtn.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                AbToastUtil.showToast(MainActivity.this, &quot;点击1&quot;);
            }
        });

        about.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                AbToastUtil.showToast(MainActivity.this, &quot;点击2&quot;);
            }

        });
    }
}
</code></pre>

</body>

</html>

<!-- This document was created with MarkdownPad, the Markdown editor for Windows (http://markdownpad.com) -->

